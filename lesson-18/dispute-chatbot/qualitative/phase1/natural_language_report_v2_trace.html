<!DOCTYPE html>
<html>
<head>
    <title>Dispute Classification V2 - Trace Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1, h2, h3 { color: #2c3e50; }
        .dashboard { display: flex; gap: 20px; margin-bottom: 30px; }
        .card { flex: 1; background: #f8f9fa; padding: 20px; border-radius: 6px; border: 1px solid #e9ecef; }
        .stat-value { font-size: 24px; font-weight: bold; color: #2c3e50; }
        .stat-label { color: #6c757d; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-weight: 600; color: #495057; }
        
        .status-pass { color: #28a745; font-weight: bold; }
        .status-fail { color: #dc3545; font-weight: bold; }
        .status-error { color: #fd7e14; font-weight: bold; }
        
        .row-pass { background-color: #f8fff9; }
        .row-fail { background-color: #fff8f8; cursor: pointer; }
        .row-fail:hover { background-color: #ffeef0; }
        
        .trace-detail { display: none; background: #fafafa; padding: 20px; border-top: 1px solid #eee; }
        .trace-detail.active { display: table-row; }
        
        .trace-step { margin-bottom: 15px; border-left: 3px solid #dee2e6; padding-left: 15px; }
        .trace-step h4 { margin: 0 0 10px 0; font-size: 16px; }
        
        .prompt-box, .response-box { background: #fff; padding: 10px; border: 1px solid #eee; border-radius: 4px; font-family: monospace; white-space: pre-wrap; margin-top: 5px; font-size: 12px; max-height: 300px; overflow-y: auto; }
        .label { font-weight: bold; font-size: 12px; color: #666; display: block; margin-bottom: 4px; }
        
        .diff-container { display: flex; gap: 20px; margin-bottom: 15px; }
        .diff-col { flex: 1; }
        .mismatch { background-color: #ffe6e6; padding: 2px 5px; border-radius: 3px; color: #dc3545; }
        
        .filter-bar { margin-bottom: 20px; }
        button { padding: 8px 16px; margin-right: 10px; cursor: pointer; background: #e9ecef; border: none; border-radius: 4px; }
        button.active { background: #007bff; color: white; }
    </style>
    <script>
        function toggleTrace(id) {
            const row = document.getElementById('trace-' + id);
            if (row.style.display === 'none' || !row.style.display) {
                row.style.display = 'table-row';
            } else {
                row.style.display = 'none';
            }
        }
        
        function filterRows(type) {
            const rows = document.querySelectorAll('.case-row');
            rows.forEach(row => {
                if (type === 'all' || row.classList.contains(type)) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Update buttons
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + type).classList.add('active');
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Dispute Classification V2 Analysis</h1>
        
        <div class="dashboard">
            <div class="card">
                <div class="stat-value">37.0%</div>
                <div class="stat-label">Overall Pass Rate</div>
                <div style="margin-top: 10px; font-size: 13px;">
                    112 / 303 Passed
                </div>
            </div>
            <div class="card">
                <div class="stat-label">Performance by Persona</div>
                <div style="margin-top: 10px;">
    <div><strong>Emotional:</strong> 45.5%</div><div><strong>Narrative:</strong> 46.5%</div><div><strong>Ambiguous:</strong> 18.8%</div>
                </div>
            </div>
            <div class="card">
                <div class="stat-label">Failure Stages</div>
                <div style="margin-top: 10px;">
    <div><strong>FAILURE_CATEGORY:</strong> 129 (67.5%)</div><div><strong>FAILURE_CODE:</strong> 62 (32.5%)</div>
                </div>
            </div>
        </div>

        <div class="filter-bar">
            <button id="btn-all" class="filter-btn active" onclick="filterRows('all')">All Cases</button>
            <button id="btn-pass" class="filter-btn" onclick="filterRows('status-pass')">Passed</button>
            <button id="btn-fail" class="filter-btn" onclick="filterRows('status-fail')">Failed</button>
        </div>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Persona</th>
                    <th>Status</th>
                    <th>Network</th>
                    <th>Code</th>
                    <th>Confidence</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
    
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(0)">
                <td>gen_amex_A01_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: A01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-0" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states 'I didn't authorize this', indicating they did not participate in or approve the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states 'I didn't authorize this', indicating they did not participate in or approve the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T AUTHORIZE THIS', which directly indicates a denial of the transaction. This aligns perfectly with the F24 code for 'No Cardholder Authorization', making it the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T AUTHORIZE THIS', which directly indicates a denial of the transaction. This aligns perfectly with the F24 code for 'No Cardholder Authorization', making it the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(1)">
                <td>gen_amex_A01_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">A01</span> <small>(exp: A01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-1" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I recently checked my credit card statement and noticed a charge that was higher than what I remember authorizing. I was at the store last Tuesday, and I distinctly recall agreeing to a different amount. I even had a lovely chat with the cashier about the weather. Could you please help me understand why this discrepancy occurred? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A01",
  "explanation": "Amount charged differs from what was authorized",
  "matched_keywords": [
    "higher than"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently checked my credit card statement and noticed a charge that was higher than what I remember authorizing. I was at the store last Tuesday, and I distinctly recall agreeing to a different amount. I even had a lovely chat with the cashier about the weather. Could you please help me understand why this discrepancy occurred? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is disputing a charge that is higher than what they remember authorizing, indicating an authorization issue rather than fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is disputing a charge that is higher than what they remember authorizing, indicating an authorization issue rather than fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently checked my credit card statement and noticed a charge that was higher than what I remember authorizing. I was at the store last Tuesday, and I distinctly recall agreeing to a different amount. I even had a lovely chat with the cashier about the weather. Could you please help me understand why this discrepancy occurred? Thank you so much for your assistance. (Network: Amex)

[System hint: Based on keywords '['higher than']', consider code A01 - Amount charged differs from what was authorized]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the charge was higher than what the cardholder remembers authorizing, which directly aligns with the reason code A01 - Charge Amount Exceeds Authorization Amount. The description indicates a specific discrepancy in the amount charged compared to what was agreed upon."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the charge was higher than what the cardholder remembers authorizing, which directly aligns with the reason code A01 - Charge Amount Exceeds Authorization Amount. The description indicates a specific discrepancy in the amount charged compared to what was agreed upon."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(2)">
                <td>gen_amex_A01_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">P05</span> <small>(exp: A01)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-2" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. The numbers don't seem to match what I expected from my last visit. Could you look into this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: P05</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. The numbers don't seem to match what I expected from my last visit. Could you look into this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and is unsure about the transaction, but they have not explicitly claimed that it was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and is unsure about the transaction, but they have not explicitly claimed that it was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. The numbers don't seem to match what I expected from my last visit. Could you look into this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P05",
    "confidence": 0.85,
    "reasoning": "The description indicates that the charge amount does not match the cardholder's expectations from their last visit, suggesting a discrepancy in the charge amount. This aligns with the reason code P05, which pertains to an incorrect charge amount. However, the description lacks specific details about the exact amount charged versus what was expected, leading to a slightly lower confidence."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P05",
  "confidence": 0.85,
  "reasoning": "The description indicates that the charge amount does not match the cardholder's expectations from their last visit, suggesting a discrepancy in the charge amount. This aligns with the reason code P05, which pertains to an incorrect charge amount. However, the description lacks specific details about the exact amount charged versus what was expected, leading to a slightly lower confidence."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(3)">
                <td>gen_amex_A02_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: A02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-3" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged without my permission?! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged without my permission?! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they were charged without their permission, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they were charged without their permission, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged without my permission?! FIX THIS NOW! (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user was charged without their permission, which directly aligns with the definition of 'No Cardholder Authorization'. This suggests that the cardholder denies making the transaction, making F24 the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user was charged without their permission, which directly aligns with the definition of 'No Cardholder Authorization'. This suggests that the cardholder denies making the transaction, making F24 the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(4)">
                <td>gen_amex_A02_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: A02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-4" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recall authorizing. It's quite puzzling because I always make sure to double-check my transactions. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recall authorizing. It's quite puzzling because I always make sure to double-check my transactions. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recall authorizing. It's quite puzzling because I always make sure to double-check my transactions. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the reason code F24, which is used when the cardholder denies the transaction, suggesting it was not authorized by them."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the reason code F24, which is used when the cardholder denies the transaction, suggesting it was not authorized by them."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(5)">
                <td>gen_amex_A02_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: A02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-5" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there was a mix-up with one of the entries. Could you look into it for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up with one of the entries. Could you look into it for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up with one of the entries. Could you look into it for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder noticed something odd on their statement, suggesting they did not recognize a charge. This aligns with the F24 code, which is used when the cardholder denies the transaction, indicating it was unauthorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder noticed something odd on their statement, suggesting they did not recognize a charge. This aligns with the F24 code, which is used when the cardholder denies the transaction, indicating it was unauthorized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(6)">
                <td>gen_amex_C02_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C02</span> <small>(exp: C02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-6" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY REFUND?! It's been WEEKS! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: C02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C02",
  "explanation": "Merchant promised credit that was never processed",
  "matched_keywords": [
    "where's my refund"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY REFUND?! It's been WEEKS! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder is expressing frustration about not receiving a refund after a significant amount of time, indicating that they likely returned an item or canceled a service but did not receive the expected refund."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder is expressing frustration about not receiving a refund after a significant amount of time, indicating that they likely returned an item or canceled a service but did not receive the expected refund."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY REFUND?! It's been WEEKS! FIX THIS NOW! (Network: Amex)

[System hint: Based on keywords '["where's my refund"]', consider code C02 - Merchant promised credit that was never processed]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C02",
    "confidence": 0.95,
    "reasoning": "The dispute description explicitly mentions 'WHERE'S MY REFUND?!' indicating that the cardholder is inquiring about a promised credit that has not been processed. This aligns perfectly with reason code C02, which is specifically for situations where a merchant promised a credit that was never processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C02",
  "confidence": 0.95,
  "reasoning": "The dispute description explicitly mentions 'WHERE'S MY REFUND?!' indicating that the cardholder is inquiring about a promised credit that has not been processed. This aligns perfectly with reason code C02, which is specifically for situations where a merchant promised a credit that was never processed."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(7)">
                <td>gen_amex_C02_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C02</span> <small>(exp: C02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-7" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Amex card to pay, but unfortunately, the restaurant had some issues with their system. They assured me that the charge wouldn't go through, but it seems it did. I've been waiting for the credit to appear on my statement, but it's been quite some time now. Could you please look into this for me? Thank you so much for your help! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: C02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A08",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "wouldn't go through"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Amex card to pay, but unfortunately, the restaurant had some issues with their system. They assured me that the charge wouldn't go through, but it seems it did. I've been waiting for the credit to appear on my statement, but it's been quite some time now. Could you please look into this for me? Thank you so much for your help! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder was assured that the charge wouldn't go through, but it did, and they are waiting for a credit that has not appeared on their statement."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder was assured that the charge wouldn't go through, but it did, and they are waiting for a credit that has not appeared on their statement."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Amex card to pay, but unfortunately, the restaurant had some issues with their system. They assured me that the charge wouldn't go through, but it seems it did. I've been waiting for the credit to appear on my statement, but it's been quite some time now. Could you please look into this for me? Thank you so much for your help! (Network: Amex)

[System hint: Based on keywords '["wouldn't go through"]', consider code A08 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the restaurant assured the cardholder that the charge wouldn't go through, yet the charge was processed. The cardholder is now waiting for a credit that has not appeared on their statement, which aligns perfectly with the reason code C02 - Credit Not Processed, as it reflects the situation where a promised credit has not been issued."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the restaurant assured the cardholder that the charge wouldn't go through, yet the charge was processed. The cardholder is now waiting for a credit that has not appeared on their statement, which aligns perfectly with the reason code C02 - Credit Not Processed, as it reflects the situation where a promised credit has not been issued."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(8)">
                <td>gen_amex_C02_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: C02)</small></td>
                <td>0.9</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-8" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like a transaction didn't quite align with what I expected. Could you help clarify this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like a transaction didn't quite align with what I expected. Could you help clarify this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction on their statement and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction on their statement and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like a transaction didn't quite align with what I expected. Could you help clarify this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.90,
    "reasoning": "The description indicates that the cardholder noticed something odd on their statement and is seeking clarification, which suggests they do not recognize the transaction. This aligns closely with the 'No Cardholder Authorization' code (F24), as it implies the cardholder denies making the transaction. However, the ambiguity in the description means it is not a perfect match, hence the confidence level of 0.90."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.9,
  "reasoning": "The description indicates that the cardholder noticed something odd on their statement and is seeking clarification, which suggests they do not recognize the transaction. This aligns closely with the 'No Cardholder Authorization' code (F24), as it implies the cardholder denies making the transaction. However, the ambiguity in the description means it is not a perfect match, hence the confidence level of 0.90."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(9)">
                <td>gen_amex_A08_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">A08</span> <small>(exp: A08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-9" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my card declined? FIX THIS NOW! I need answers ASAP! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: A08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A08",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my card declined? FIX THIS NOW! I need answers ASAP! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is inquiring about a declined transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is inquiring about a declined transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my card declined? FIX THIS NOW! I need answers ASAP! (Network: Amex)

[System hint: Based on keywords '['declined']', consider code A08 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A08",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card was declined, which directly corresponds to an authorization issue at the point of sale. The specific reason code A08 is appropriate as it pertains to a card being declined due to an authorization issue, not fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A08",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card was declined, which directly corresponds to an authorization issue at the point of sale. The specific reason code A08 is appropriate as it pertains to a card being declined due to an authorization issue, not fraud."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(10)">
                <td>gen_amex_A08_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">A08</span> <small>(exp: A08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-10" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite an eventful day yesterday. I started with a lovely breakfast at my favorite café, and then I went shopping for some essentials. However, when I tried to use my Amex card at the store, it was unexpectedly declined. I was quite surprised because I had checked my balance earlier, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: A08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A08",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite an eventful day yesterday. I started with a lovely breakfast at my favorite café, and then I went shopping for some essentials. However, when I tried to use my Amex card at the store, it was unexpectedly declined. I was quite surprised because I had checked my balance earlier, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a declined transaction despite having a sufficient balance, indicating an authorization issue rather than fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a declined transaction despite having a sufficient balance, indicating an authorization issue rather than fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite an eventful day yesterday. I started with a lovely breakfast at my favorite café, and then I went shopping for some essentials. However, when I tried to use my Amex card at the store, it was unexpectedly declined. I was quite surprised because I had checked my balance earlier, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Amex)

[System hint: Based on keywords '['declined']', consider code A08 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A08",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly states that the card was declined at the point of sale, which directly corresponds to the A08 reason code for 'Card declined at point of sale - authorization issue, not fraud'. There are no indications of fraud or other issues, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A08",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly states that the card was declined at the point of sale, which directly corresponds to the A08 reason code for 'Card declined at point of sale - authorization issue, not fraud'. There are no indications of fraud or other issues, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(11)">
                <td>gen_amex_A08_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A02</span> <small>(exp: A08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-11" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the checkout, and something unexpected happened. The transaction didn't go through, and I was left standing there, unsure of what to do next. It was quite puzzling, and I hope you can shed some light on this situation. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: A08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The transaction didn't go through, and I was left standing there, unsure of what to do next. It was quite puzzling, and I hope you can shed some light on this situation. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder describes an issue where the transaction didn't go through, indicating an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder describes an issue where the transaction didn't go through, indicating an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The transaction didn't go through, and I was left standing there, unsure of what to do next. It was quite puzzling, and I hope you can shed some light on this situation. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A02",
    "confidence": 0.95,
    "reasoning": "The description indicates that the transaction did not go through at checkout, which suggests that there was no valid authorization for the charge. This aligns perfectly with reason code A02, which is specifically for situations where there is no valid authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A02",
  "confidence": 0.95,
  "reasoning": "The description indicates that the transaction did not go through at checkout, which suggests that there was no valid authorization for the charge. This aligns perfectly with reason code A02, which is specifically for situations where there is no valid authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(12)">
                <td>gen_amex_C04_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C04</span> <small>(exp: C04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-12" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I RETURNED IT! WHERE'S MY MONEY? FIX THIS NOW! 😡 (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: C04</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C04",
  "explanation": "Customer returned merchandise but credit not received",
  "matched_keywords": [
    "returned"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I RETURNED IT! WHERE'S MY MONEY? FIX THIS NOW! 😡 (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder indicates they returned the item and is inquiring about their refund, which suggests they are expecting a credit that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder indicates they returned the item and is inquiring about their refund, which suggests they are expecting a credit that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I RETURNED IT! WHERE'S MY MONEY? FIX THIS NOW! 😡 (Network: Amex)

[System hint: Based on keywords '['returned']', consider code C04 - Customer returned merchandise but credit not received]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C04",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'I RETURNED IT! WHERE'S MY MONEY?', indicating that the customer returned merchandise but has not received the corresponding credit. This directly aligns with reason code C04, which is specifically for goods/services returned but credit not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C04",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'I RETURNED IT! WHERE'S MY MONEY?', indicating that the customer returned merchandise but has not received the corresponding credit. This directly aligns with reason code C04, which is specifically for goods/services returned but credit not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(13)">
                <td>gen_amex_C04_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C04</span> <small>(exp: C04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-13" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently returned a blender I bought online because it wasn't quite what I expected. I followed all the return instructions to the letter, even made sure to get a tracking number. It's been over two weeks now, and I still haven't seen the refund on my card. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: C04</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C04",
  "explanation": "Customer returned merchandise but credit not received",
  "matched_keywords": [
    "returned"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently returned a blender I bought online because it wasn't quite what I expected. I followed all the return instructions to the letter, even made sure to get a tracking number. It's been over two weeks now, and I still haven't seen the refund on my card. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder returned the blender and followed the return instructions but has not received the expected refund, indicating a credit issue."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder returned the blender and followed the return instructions but has not received the expected refund, indicating a credit issue."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently returned a blender I bought online because it wasn't quite what I expected. I followed all the return instructions to the letter, even made sure to get a tracking number. It's been over two weeks now, and I still haven't seen the refund on my card. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Amex)

[System hint: Based on keywords '['returned']', consider code C04 - Customer returned merchandise but credit not received]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C04",
    "confidence": 0.95,
    "reasoning": "The customer returned the blender and followed all return instructions but has not received the refund yet. This situation directly aligns with code C04, which is for goods/services returned but credit not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C04",
  "confidence": 0.95,
  "reasoning": "The customer returned the blender and followed all return instructions but has not received the refund yet. This situation directly aligns with code C04, which is for goods/services returned but credit not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(14)">
                <td>gen_amex_C04_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">C02</span> <small>(exp: C04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-14" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought everything was sorted after our last chat, but it seems like there's still something pending on my account. I remember sending back the item as we discussed, and I was under the impression that everything was in order. Could you check if there's anything else I need to do on my end? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: C02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought everything was sorted after our last chat, but it seems like there's still something pending on my account. I remember sending back the item as we discussed, and I was under the impression that everything was in order. Could you check if there's anything else I need to do on my end? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder mentions returning the item and is inquiring about the status of their account, indicating they expect a refund that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder mentions returning the item and is inquiring about the status of their account, indicating they expect a refund that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought everything was sorted after our last chat, but it seems like there's still something pending on my account. I remember sending back the item as we discussed, and I was under the impression that everything was in order. Could you check if there's anything else I need to do on my end? (Network: Amex)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the user returned an item and is inquiring about a pending credit on their account. This aligns perfectly with the C02 reason code, which specifically addresses situations where a credit was not processed after a return."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the user returned an item and is inquiring about a pending credit on their account. This aligns perfectly with the C02 reason code, which specifically addresses situations where a credit was not processed after a return."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(15)">
                <td>gen_amex_C28_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C28</span> <small>(exp: C28)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-15" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: C28</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: C28</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder explicitly states they canceled their subscription but are still being charged, indicating a recurring charge after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder explicitly states they canceled their subscription but are still being charged, indicating a recurring charge after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Amex)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **C28**: Cancelled Recurring Billing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C28",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the user canceled their subscription but is still being charged, which directly aligns with the reason code C28 for Cancelled Recurring Billing. The user's frustration about ongoing charges after cancellation supports this selection."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C28",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the user canceled their subscription but is still being charged, which directly aligns with the reason code C28 for Cancelled Recurring Billing. The user's frustration about ongoing charges after cancellation supports this selection."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(16)">
                <td>gen_amex_C28_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C28</span> <small>(exp: C28)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-16" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I wasn't expecting. It was a bit of a surprise, especially since I had a lovely morning with my family, enjoying breakfast and planning our weekend. I distinctly remember canceling this service a while back, and I'm quite puzzled as to why it's still appearing on my statement. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: C28</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: C28</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I wasn't expecting. It was a bit of a surprise, especially since I had a lovely morning with my family, enjoying breakfast and planning our weekend. I distinctly remember canceling this service a while back, and I'm quite puzzled as to why it's still appearing on my statement. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder mentions canceling a service but is still seeing a charge, indicating they believe they should not have been billed after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder mentions canceling a service but is still seeing a charge, indicating they believe they should not have been billed after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I wasn't expecting. It was a bit of a surprise, especially since I had a lovely morning with my family, enjoying breakfast and planning our weekend. I distinctly remember canceling this service a while back, and I'm quite puzzled as to why it's still appearing on my statement. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **C28**: Cancelled Recurring Billing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C28",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly mentioned canceling the service, which aligns perfectly with the reason code C28 for Cancelled Recurring Billing. The description indicates that the charge was unexpected due to the cancellation, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C28",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly mentioned canceling the service, which aligns perfectly with the reason code C28 for Cancelled Recurring Billing. The description indicates that the charge was unexpected due to the cancellation, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(17)">
                <td>gen_amex_C28_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: C28)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-17" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we were done with this, but it seems like things are still happening. Can you check what's going on? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: C28</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we were done with this, but it seems like things are still happening. Can you check what's going on? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about the ongoing situation and requests clarification, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about the ongoing situation and requests clarification, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we were done with this, but it seems like things are still happening. Can you check what's going on? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates confusion about ongoing charges, suggesting the cardholder did not authorize the transaction. This aligns with the F24 code, which is for 'No Cardholder Authorization', indicating that the cardholder denies the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates confusion about ongoing charges, suggesting the cardholder did not authorize the transaction. This aligns with the F24 code, which is for 'No Cardholder Authorization', indicating that the cardholder denies the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(18)">
                <td>gen_amex_C18_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C18</span> <small>(exp: C18)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-18" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY COPY? I ASKED WEEKS AGO! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: C18</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: C18</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY COPY? I ASKED WEEKS AGO! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about not receiving a copy of something they requested, which does not fit into any specific category of chargeback disputes. The language indicates a general issue with customer service rather than a specific transaction dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about not receiving a copy of something they requested, which does not fit into any specific category of chargeback disputes. The language indicates a general issue with customer service rather than a specific transaction dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY COPY? I ASKED WEEKS AGO! FIX THIS NOW! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C18",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates a request for a copy that has not been fulfilled, which directly aligns with reason code C18: Request for Copy Unfulfilled. The urgency expressed in the message further supports this match."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C18",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates a request for a copy that has not been fulfilled, which directly aligns with reason code C18: Request for Copy Unfulfilled. The urgency expressed in the message further supports this match."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(19)">
                <td>gen_amex_C18_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C18</span> <small>(exp: C18)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-19" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hi there, I hope you're having a good day. I was just thinking about how much I enjoy my morning coffee when I realized I still haven't received the document I requested from you. It's been quite some time, and I'm starting to get a bit concerned. Could you please look into this for me? Thank you so much! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: C18</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: C18</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was just thinking about how much I enjoy my morning coffee when I realized I still haven't received the document I requested from you. It's been quite some time, and I'm starting to get a bit concerned. Could you please look into this for me? Thank you so much! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The dispute description does not explicitly claim fraud or any specific issue related to a transaction. It expresses concern about not receiving a document, which does not fit into the other defined categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The dispute description does not explicitly claim fraud or any specific issue related to a transaction. It expresses concern about not receiving a document, which does not fit into the other defined categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was just thinking about how much I enjoy my morning coffee when I realized I still haven't received the document I requested from you. It's been quite some time, and I'm starting to get a bit concerned. Could you please look into this for me? Thank you so much! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C18",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the user has not received a document they requested, which aligns perfectly with the reason code C18: Request for Copy Unfulfilled. The user's concern about not receiving the document directly corresponds to this code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C18",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the user has not received a document they requested, which aligns perfectly with the reason code C18: Request for Copy Unfulfilled. The user's concern about not receiving the document directly corresponds to this code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(20)">
                <td>gen_amex_C18_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">C08</span> <small>(exp: C18)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-20" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was expecting something in the mail that hasn't shown up yet. It's been a while, and I'm not sure what happened. Could you check on this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: C18</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: product_not_received</div>
                            <div class="mismatch">Code: C08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was expecting something in the mail that hasn't shown up yet. It's been a while, and I'm not sure what happened. Could you check on this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder is indicating that they expected something to arrive in the mail but it has not shown up, which aligns with the definition of not receiving goods or services."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder is indicating that they expected something to arrive in the mail but it has not shown up, which aligns with the definition of not receiving goods or services."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was expecting something in the mail that hasn't shown up yet. It's been a while, and I'm not sure what happened. Could you check on this for me? (Network: Amex)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **C08**: Goods/Services Not Received or Only Partially Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C08",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder was expecting something in the mail that has not yet arrived, which directly aligns with the reason code C08 for goods/services not received. There are no indications of partial receipt or other issues, making this the best fit."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C08",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder was expecting something in the mail that has not yet arrived, which directly aligns with the reason code C08 for goods/services not received. There are no indications of partial receipt or other issues, making this the best fit."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(21)">
                <td>gen_amex_C08_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C08</span> <small>(exp: C08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-21" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_not_received</div>
                            <div>Code: C08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: C08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Amex)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **C08**: Goods/Services Not Received or Only Partially Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer did not receive the goods they paid for. This directly aligns with the reason code C08, which is specifically for goods/services not received or only partially received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer did not receive the goods they paid for. This directly aligns with the reason code C08, which is specifically for goods/services not received or only partially received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(22)">
                <td>gen_amex_C08_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C08</span> <small>(exp: C08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-22" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently ordered a set of kitchen knives from a website that seemed reputable. It was a sunny day, and I was excited to try out some new recipes. However, the package never arrived. I checked with my neighbors and even the local post office, but no luck. I was really looking forward to using them for a dinner party I had planned. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_not_received</div>
                            <div>Code: C08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: C08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C08",
  "explanation": "Goods or services were never received",
  "matched_keywords": [
    "never arrived"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a set of kitchen knives from a website that seemed reputable. It was a sunny day, and I was excited to try out some new recipes. However, the package never arrived. I checked with my neighbors and even the local post office, but no luck. I was really looking forward to using them for a dinner party I had planned. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder paid for kitchen knives but never received the package, indicating a failure in delivery."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder paid for kitchen knives but never received the package, indicating a failure in delivery."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a set of kitchen knives from a website that seemed reputable. It was a sunny day, and I was excited to try out some new recipes. However, the package never arrived. I checked with my neighbors and even the local post office, but no luck. I was really looking forward to using them for a dinner party I had planned. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)

[System hint: Based on keywords '['never arrived']', consider code C08 - Goods or services were never received]
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **C08**: Goods/Services Not Received or Only Partially Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the package containing the kitchen knives never arrived, which directly aligns with the reason code C08 for goods or services not received. The description provides clear indicators of the issue, confirming that the item was expected but not delivered."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the package containing the kitchen knives never arrived, which directly aligns with the reason code C08 for goods or services not received. The description provides clear indicators of the issue, confirming that the item was expected but not delivered."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(23)">
                <td>gen_amex_C08_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C08</span> <small>(exp: C08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-23" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was eagerly waiting for something special to arrive, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I hope this can be sorted out soon. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_not_received</div>
                            <div>Code: C08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: general</div>
                            <div class="">Code: C08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was eagerly waiting for something special to arrive, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I hope this can be sorted out soon. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description expresses disappointment and anticipation regarding a transaction but does not provide explicit indicators of fraud, product not received, or any other specific issue. It suggests a general dissatisfaction with the outcome rather than a clear dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description expresses disappointment and anticipation regarding a transaction but does not provide explicit indicators of fraud, product not received, or any other specific issue. It suggests a general dissatisfaction with the outcome rather than a clear dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was eagerly waiting for something special to arrive, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I hope this can be sorted out soon. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C08",
    "confidence": 0.95,
    "reasoning": "The description indicates disappointment regarding an expected delivery, suggesting that the item never arrived. This aligns perfectly with the reason code for goods not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C08",
  "confidence": 0.95,
  "reasoning": "The description indicates disappointment regarding an expected delivery, suggesting that the item never arrived. This aligns perfectly with the reason code for goods not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(24)">
                <td>gen_amex_C14_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">P08</span> <small>(exp: C14)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-24" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: C14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: duplicate</div>
                            <div class="mismatch">Code: P08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "P08",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, as indicated by their statement 'WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY!'"
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, as indicated by their statement 'WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY!'"
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Amex)

[System hint: Based on keywords '['charged twice']', consider code P08 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges processed multiple times."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges processed multiple times."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(25)">
                <td>gen_amex_C14_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C14</span> <small>(exp: C14)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-25" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have lunch at our favorite restaurant. I remember paying for the meal with cash because I had some extra on hand. However, when I checked my credit card statement later, I noticed a charge for the same meal. I'm a bit puzzled about this and would appreciate your help in resolving it. Thank you so much for your assistance! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: C14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: C14</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have lunch at our favorite restaurant. I remember paying for the meal with cash because I had some extra on hand. However, when I checked my credit card statement later, I noticed a charge for the same meal. I'm a bit puzzled about this and would appreciate your help in resolving it. Thank you so much for your assistance! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder claims to have paid for the meal with cash but also sees a charge on their credit card for the same meal, indicating they were charged twice for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder claims to have paid for the meal with cash but also sees a charge on their credit card for the same meal, indicating they were charged twice for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have lunch at our favorite restaurant. I remember paying for the meal with cash because I had some extra on hand. However, when I checked my credit card statement later, I noticed a charge for the same meal. I'm a bit puzzled about this and would appreciate your help in resolving it. Thank you so much for your assistance! (Network: Amex)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C14",
    "confidence": 0.95,
    "reasoning": "The cardholder states they paid for the meal with cash but later found a charge on their credit card for the same meal. This situation indicates that the payment was made by other means (cash), and the card was charged as well, which aligns perfectly with the C14 reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C14",
  "confidence": 0.95,
  "reasoning": "The cardholder states they paid for the meal with cash but later found a charge on their credit card for the same meal. This situation indicates that the payment was made by other means (cash), and the card was charged as well, which aligns perfectly with the C14 reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(26)">
                <td>gen_amex_C14_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: C14)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-26" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement after my recent shopping trip. I remember settling everything at the counter, but it seems like there's a little hiccup. Could you help me sort this out? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: C14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement after my recent shopping trip. I remember settling everything at the counter, but it seems like there's a little hiccup. Could you help me sort this out? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is unsure about a charge, but they haven't explicitly claimed fraud or denied making the purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is unsure about a charge, but they haven't explicitly claimed fraud or denied making the purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement after my recent shopping trip. I remember settling everything at the counter, but it seems like there's a little hiccup. Could you help me sort this out? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder is disputing a charge they do not recognize, suggesting a lack of authorization for the transaction. The phrase 'I remember settling everything at the counter' implies that they believe they did not authorize this specific charge, which aligns perfectly with the F24 code for 'No Cardholder Authorization'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder is disputing a charge they do not recognize, suggesting a lack of authorization for the transaction. The phrase 'I remember settling everything at the counter' implies that they believe they did not authorize this specific charge, which aligns perfectly with the F24 code for 'No Cardholder Authorization'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(27)">
                <td>gen_amex_C05_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C05</span> <small>(exp: C05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-27" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">CANCELLED ORDER, STILL CHARGED! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: C05</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C05",
  "explanation": "Order was cancelled but charge still appeared",
  "matched_keywords": [
    "cancelled order"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
CANCELLED ORDER, STILL CHARGED! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder canceled their order but was still charged, indicating they expected a refund that was not processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder canceled their order but was still charged, indicating they expected a refund that was not processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
CANCELLED ORDER, STILL CHARGED! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)

[System hint: Based on keywords '['cancelled order']', consider code C05 - Order was cancelled but charge still appeared]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C05",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the order was cancelled but the charge still appeared, which directly aligns with the description of code C05 - Goods/Services Cancelled. The keywords 'cancelled order' indicate that the service or product was not to be charged, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C05",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the order was cancelled but the charge still appeared, which directly aligns with the description of code C05 - Goods/Services Cancelled. The keywords 'cancelled order' indicate that the service or product was not to be charged, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(28)">
                <td>gen_amex_C05_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">C02</span> <small>(exp: C05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-28" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently ordered a set of kitchen knives from a store online, but due to a change in my plans, I had to cancel the order. I made sure to cancel it well before the shipping date, and I even received a confirmation email from the store. However, to my surprise, I noticed that the charge still appeared on my credit card statement. I was really looking forward to using those funds for a family dinner this weekend. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: C02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently ordered a set of kitchen knives from a store online, but due to a change in my plans, I had to cancel the order. I made sure to cancel it well before the shipping date, and I even received a confirmation email from the store. However, to my surprise, I noticed that the charge still appeared on my credit card statement. I was really looking forward to using those funds for a family dinner this weekend. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder canceled the order and received confirmation, but was still charged, indicating that the expected refund was not processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder canceled the order and received confirmation, but was still charged, indicating that the expected refund was not processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently ordered a set of kitchen knives from a store online, but due to a change in my plans, I had to cancel the order. I made sure to cancel it well before the shipping date, and I even received a confirmation email from the store. However, to my surprise, I noticed that the charge still appeared on my credit card statement. I was really looking forward to using those funds for a family dinner this weekend. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C02",
    "confidence": 0.95,
    "reasoning": "The customer canceled the order before shipping and received a confirmation, yet the charge still appeared on their statement. This indicates that the credit for the canceled order was not processed, making C02 the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C02",
  "confidence": 0.95,
  "reasoning": "The customer canceled the order before shipping and received a confirmation, yet the charge still appeared on their statement. This indicates that the credit for the canceled order was not processed, making C02 the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(29)">
                <td>gen_amex_C05_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A08</span> <small>(exp: C05)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-29" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought everything was sorted out, but it seems like there's still a little hiccup with the recent transaction. I remember making some changes, and I was under the impression that everything was settled. Could you take a look and let me know what's going on? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: C05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: A08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought everything was sorted out, but it seems like there's still a little hiccup with the recent transaction. I remember making some changes, and I was under the impression that everything was settled. Could you take a look and let me know what's going on? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder mentions a 'hiccup' with the transaction and refers to changes they made, indicating a potential authorization or processing issue rather than a clear case of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder mentions a 'hiccup' with the transaction and refers to changes they made, indicating a potential authorization or processing issue rather than a clear case of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought everything was sorted out, but it seems like there's still a little hiccup with the recent transaction. I remember making some changes, and I was under the impression that everything was settled. Could you take a look and let me know what's going on? (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A08",
    "confidence": 0.85,
    "reasoning": "The description indicates that there was a misunderstanding regarding the transaction, suggesting that there may have been an issue with the authorization approval. The phrase 'I thought everything was sorted out' implies that the authorization may have expired or was not properly processed after changes were made."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A08",
  "confidence": 0.85,
  "reasoning": "The description indicates that there was a misunderstanding regarding the transaction, suggesting that there may have been an issue with the authorization approval. The phrase 'I thought everything was sorted out' implies that the authorization may have expired or was not properly processed after changes were made."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(30)">
                <td>gen_amex_C32_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C32</span> <small>(exp: C32)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-30" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS UNACCEPTABLE! My order arrived BROKEN! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C32</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: C32</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "C32",
  "explanation": "Product received was defective or not as described",
  "matched_keywords": [
    "broken"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS UNACCEPTABLE! My order arrived BROKEN! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder states that their order arrived broken, which indicates that the received goods were defective or damaged."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder states that their order arrived broken, which indicates that the received goods were defective or damaged."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS UNACCEPTABLE! My order arrived BROKEN! FIX THIS NOW! (Network: Amex)

[System hint: Based on keywords '['broken']', consider code C32 - Product received was defective or not as described]
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C32",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the order arrived broken, which directly aligns with the definition of goods/services being damaged or defective. Therefore, C32 is the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C32",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the order arrived broken, which directly aligns with the definition of goods/services being damaged or defective. Therefore, C32 is the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(31)">
                <td>gen_amex_C32_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C32</span> <small>(exp: C32)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-31" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently ordered a set of glassware from your store, and I was so excited to use them for my dinner party last weekend. Unfortunately, when I opened the package, I found that several pieces were chipped and unusable. It was quite disappointing, especially since I had planned everything so meticulously. I would appreciate your guidance on how to resolve this issue. Thank you for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C32</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: C32</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a set of glassware from your store, and I was so excited to use them for my dinner party last weekend. Unfortunately, when I opened the package, I found that several pieces were chipped and unusable. It was quite disappointing, especially since I had planned everything so meticulously. I would appreciate your guidance on how to resolve this issue. Thank you for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received glassware that was chipped and unusable, indicating that the product was defective or damaged upon arrival."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received glassware that was chipped and unusable, indicating that the product was defective or damaged upon arrival."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a set of glassware from your store, and I was so excited to use them for my dinner party last weekend. Unfortunately, when I opened the package, I found that several pieces were chipped and unusable. It was quite disappointing, especially since I had planned everything so meticulously. I would appreciate your guidance on how to resolve this issue. Thank you for your assistance. (Network: Amex)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C32",
    "confidence": 0.95,
    "reasoning": "The description clearly states that several pieces of the glassware were chipped and unusable upon arrival, indicating that the goods were damaged or defective. This directly aligns with the C32 reason code, which is specifically for goods/services that are damaged or defective."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C32",
  "confidence": 0.95,
  "reasoning": "The description clearly states that several pieces of the glassware were chipped and unusable upon arrival, indicating that the goods were damaged or defective. This directly aligns with the C32 reason code, which is specifically for goods/services that are damaged or defective."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(32)">
                <td>gen_amex_C32_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">C31</span> <small>(exp: C32)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-32" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was really looking forward to using the item I purchased, but it seems like it didn't quite meet my expectations. I noticed something off when I first opened it, and it hasn't been quite right since. Could we discuss a possible solution? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C32</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="mismatch">Code: C31</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was really looking forward to using the item I purchased, but it seems like it didn't quite meet my expectations. I noticed something off when I first opened it, and it hasn't been quite right since. Could we discuss a possible solution? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder expresses dissatisfaction with the item received, indicating it did not meet expectations and had issues since opening, which aligns with the definition of receiving goods that are defective or not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder expresses dissatisfaction with the item received, indicating it did not meet expectations and had issues since opening, which aligns with the definition of receiving goods that are defective or not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was really looking forward to using the item I purchased, but it seems like it didn't quite meet my expectations. I noticed something off when I first opened it, and it hasn't been quite right since. Could we discuss a possible solution? (Network: Amex)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C31",
    "confidence": 0.85,
    "reasoning": "The description indicates that the item did not meet the user's expectations and seemed 'off' upon opening, which aligns with the notion that the goods/services were not as described. However, there is also a possibility that the item could be considered defective, which introduces some ambiguity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C31",
  "confidence": 0.85,
  "reasoning": "The description indicates that the item did not meet the user's expectations and seemed 'off' upon opening, which aligns with the notion that the goods/services were not as described. However, there is also a possibility that the item could be considered defective, which introduces some ambiguity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(33)">
                <td>gen_amex_F14_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F14)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-33" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged without my OK? FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged without my OK? FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged without my OK? FIX THIS NOW! (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder did not authorize the charge, which directly aligns with the reason code F24 (No Cardholder Authorization). The phrase 'charged without my OK' clearly suggests a denial of the transaction, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder did not authorize the charge, which directly aligns with the reason code F24 (No Cardholder Authorization). The phrase 'charged without my OK' clearly suggests a denial of the transaction, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(34)">
                <td>gen_amex_F14_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F14)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-34" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, including picking up groceries and taking my dog to the vet. I usually keep track of my expenses, but this one slipped through the cracks. Could you please help me understand why this charge appeared? Thank you for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, including picking up groceries and taking my dog to the vet. I usually keep track of my expenses, but this one slipped through the cracks. Could you please help me understand why this charge appeared? Thank you for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, including picking up groceries and taking my dog to the vet. I usually keep track of my expenses, but this one slipped through the cracks. Could you please help me understand why this charge appeared? Thank you for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, which indicates a denial of the transaction. This aligns perfectly with the reason code F24, which is used when the cardholder claims there was no authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, which indicates a denial of the transaction. This aligns perfectly with the reason code F24, which is used when the cardholder claims there was no authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(35)">
                <td>gen_amex_F14_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F14)</small></td>
                <td>0.9</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-35" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there was a little oversight during my last purchase. Could you check what might have gone amiss? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F14</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a little oversight during my last purchase. Could you check what might have gone amiss? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and asking for clarification, but they have not explicitly claimed fraud or denied making the purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and asking for clarification, but they have not explicitly claimed fraud or denied making the purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a little oversight during my last purchase. Could you check what might have gone amiss? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.90,
    "reasoning": "The description indicates that the user noticed something odd on their statement and suggests there may have been an oversight during the purchase. This aligns closely with the idea of the cardholder not recognizing the transaction, which is best captured by the 'No Cardholder Authorization' code (F24). While the description does not explicitly state that the user did not make the purchase, the implication of an oversight suggests a lack of recognition or authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.9,
  "reasoning": "The description indicates that the user noticed something odd on their statement and suggests there may have been an oversight during the purchase. This aligns closely with the idea of the cardholder not recognizing the transaction, which is best captured by the 'No Cardholder Authorization' code (F24). While the description does not explicitly state that the user did not make the purchase, the implication of an oversight suggests a lack of recognition or authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(36)">
                <td>gen_amex_F10_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F10)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-36" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I NEVER made?! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F10</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I NEVER made?! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never made the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never made the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I NEVER made?! FIX THIS NOW! (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The user explicitly states 'I NEVER made' the charge, indicating a clear denial of authorization for the transaction. This aligns perfectly with the F24 code, which is used when the cardholder denies the transaction, suggesting it was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The user explicitly states 'I NEVER made' the charge, indicating a clear denial of authorization for the transaction. This aligns perfectly with the F24 code, which is used when the cardholder denies the transaction, suggesting it was fraudulent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(37)">
                <td>gen_amex_F10_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F10)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-37" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. It's been a hectic week, with my cat getting into mischief and my car needing repairs, so I might have overlooked something. But I'm quite certain I didn't authorize this transaction. Could you please help me sort this out? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F10</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. It's been a hectic week, with my cat getting into mischief and my car needing repairs, so I might have overlooked something. But I'm quite certain I didn't authorize this transaction. Could you please help me sort this out? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking assistance to identify it, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking assistance to identify it, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. It's been a hectic week, with my cat getting into mischief and my car needing repairs, so I might have overlooked something. But I'm quite certain I didn't authorize this transaction. Could you please help me sort this out? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they did not authorize the transaction, which aligns perfectly with the definition of 'No Cardholder Authorization' (F24). This indicates a clear case of fraud where the cardholder denies making the purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they did not authorize the transaction, which aligns perfectly with the definition of 'No Cardholder Authorization' (F24). This indicates a clear case of fraud where the cardholder denies making the purchase."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(38)">
                <td>gen_amex_F10_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F10)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-38" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. I remember all my purchases, but this one seems out of place. Could you help me understand what's going on? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F10</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. I remember all my purchases, but this one seems out of place. Could you help me understand what's going on? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a transaction they do not recognize, but they have not explicitly claimed that it was fraudulent. They are seeking clarification about the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a transaction they do not recognize, but they have not explicitly claimed that it was fraudulent. They are seeking clarification about the charge."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. I remember all my purchases, but this one seems out of place. Could you help me understand what's going on? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction, suggesting they did not authorize it. This aligns perfectly with the F24 code, which is used when a cardholder denies a transaction, indicating a lack of authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction, suggesting they did not authorize it. This aligns perfectly with the F24 code, which is used when a cardholder denies a transaction, indicating a lack of authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(39)">
                <td>gen_amex_F24_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">F24</span> <small>(exp: F24)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-39" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T MAKE? FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F24</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "F24",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T MAKE? FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T MAKE? FIX THIS NOW! (Network: Amex)

[System hint: Based on keywords '["didn't make"]', consider code F24 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of reason code F24 - No Cardholder Authorization. The phrase 'I DIDN'T MAKE' indicates a clear denial of authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of reason code F24 - No Cardholder Authorization. The phrase 'I DIDN'T MAKE' indicates a clear denial of authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(40)">
                <td>gen_amex_F24_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">F24</span> <small>(exp: F24)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-40" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. It's quite puzzling because I always keep track of my expenses. I remember last Tuesday, I was at home all day, catching up on some reading and didn't even step out. Could you please help me understand how this charge appeared? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F24</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. It's quite puzzling because I always keep track of my expenses. I remember last Tuesday, I was at home all day, catching up on some reading and didn't even step out. Could you please help me understand how this charge appeared? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they do not recognize the charge and claims they did not authorize it, indicating potential fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they do not recognize the charge and claims they did not authorize it, indicating potential fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. It's quite puzzling because I always keep track of my expenses. I remember last Tuesday, I was at home all day, catching up on some reading and didn't even step out. Could you please help me understand how this charge appeared? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they did not make the purchase and are puzzled by a charge from a store they have never visited. This clearly indicates a lack of authorization for the transaction, which aligns perfectly with the F24 reason code for 'No Cardholder Authorization'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they did not make the purchase and are puzzled by a charge from a store they have never visited. This clearly indicates a lack of authorization for the transaction, which aligns perfectly with the F24 reason code for 'No Cardholder Authorization'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(41)">
                <td>gen_amex_F24_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">F24</span> <small>(exp: F24)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-41" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement. It seems like there's an entry that doesn't quite fit with my usual spending habits. Could you help clarify this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F24</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there's an entry that doesn't quite fit with my usual spending habits. Could you help clarify this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement that they do not recognize, but they have not explicitly claimed that it is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement that they do not recognize, but they have not explicitly claimed that it is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there's an entry that doesn't quite fit with my usual spending habits. Could you help clarify this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder is expressing confusion about a transaction on their statement that they do not recognize, which indicates they did not authorize this charge. This aligns directly with the F24 code, which is used when a cardholder denies a transaction due to lack of authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder is expressing confusion about a transaction on their statement that they do not recognize, which indicates they did not authorize this charge. This aligns directly with the F24 code, which is used when a cardholder denies a transaction due to lack of authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(42)">
                <td>gen_amex_C31_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C31</span> <small>(exp: C31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-42" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered. FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: C31</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered. FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder explicitly states that the product is 'NOTHING like what I ordered', indicating that the received goods were not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder explicitly states that the product is 'NOTHING like what I ordered', indicating that the received goods were not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered. FIX THIS NOW! (Network: Amex)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C31",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the product is 'NOTHING like what I ordered', indicating that the goods received do not match the description or expectations set at the time of purchase. This aligns perfectly with the reason code C31, which is for goods/services not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C31",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the product is 'NOTHING like what I ordered', indicating that the goods received do not match the description or expectations set at the time of purchase. This aligns perfectly with the reason code C31, which is for goods/services not as described."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(43)">
                <td>gen_amex_C31_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C31</span> <small>(exp: C31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-43" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently ordered a product using my Amex card, and to my surprise, it was not what I expected at all. I had a long day at work, and I was really looking forward to receiving this item. I even told my friends about it, and now I feel quite embarrassed. The description on the website was completely different from what I received. I would appreciate your assistance in resolving this matter. Thank you for your understanding. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: C31</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a product using my Amex card, and to my surprise, it was not what I expected at all. I had a long day at work, and I was really looking forward to receiving this item. I even told my friends about it, and now I feel quite embarrassed. The description on the website was completely different from what I received. I would appreciate your assistance in resolving this matter. Thank you for your understanding. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received a product that did not match the description on the website, indicating that the item was not as expected or described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received a product that did not match the description on the website, indicating that the item was not as expected or described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a product using my Amex card, and to my surprise, it was not what I expected at all. I had a long day at work, and I was really looking forward to receiving this item. I even told my friends about it, and now I feel quite embarrassed. The description on the website was completely different from what I received. I would appreciate your assistance in resolving this matter. Thank you for your understanding. (Network: Amex)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C31",
    "confidence": 0.95,
    "reasoning": "The description clearly indicates that the product received was not as expected and did not match the description provided on the website. This aligns perfectly with the reason code C31, which pertains to goods/services not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C31",
  "confidence": 0.95,
  "reasoning": "The description clearly indicates that the product received was not as expected and did not match the description provided on the website. This aligns perfectly with the reason code C31, which pertains to goods/services not as described."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(44)">
                <td>gen_amex_C31_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">C31</span> <small>(exp: C31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-44" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was really looking forward to using the item I got, but it seems like it doesn't quite match up with what I had in mind. It's a bit of a letdown, considering how much I anticipated its arrival. Could we discuss this further? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: C31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: C31</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was really looking forward to using the item I got, but it seems like it doesn't quite match up with what I had in mind. It's a bit of a letdown, considering how much I anticipated its arrival. Could we discuss this further? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder expresses disappointment with the item received, indicating it does not match their expectations, which aligns with the definition of receiving goods that are not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder expresses disappointment with the item received, indicating it does not match their expectations, which aligns with the definition of receiving goods that are not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was really looking forward to using the item I got, but it seems like it doesn't quite match up with what I had in mind. It's a bit of a letdown, considering how much I anticipated its arrival. Could we discuss this further? (Network: Amex)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C31",
    "confidence": 0.95,
    "reasoning": "The description indicates that the item does not match the cardholder's expectations, suggesting it was not as described. The phrase 'doesn't quite match up with what I had in mind' aligns closely with the reason code C31, which pertains to goods/services not being as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C31",
  "confidence": 0.95,
  "reasoning": "The description indicates that the item does not match the cardholder's expectations, suggesting it was not as described. The phrase 'doesn't quite match up with what I had in mind' aligns closely with the reason code C31, which pertains to goods/services not being as described."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(45)">
                <td>gen_amex_F29_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F29)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-45" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT THE HECK AMEX?! I DIDN'T BUY THIS! FIX IT NOW OR ELSE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F29</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT THE HECK AMEX?! I DIDN'T BUY THIS! FIX IT NOW OR ELSE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy the item and expresses frustration, indicating they believe the transaction was unauthorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy the item and expresses frustration, indicating they believe the transaction was unauthorized."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT THE HECK AMEX?! I DIDN'T BUY THIS! FIX IT NOW OR ELSE! (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY THIS', which indicates a denial of authorization for the transaction. This aligns perfectly with reason code F24: No Cardholder Authorization, as it directly addresses the claim of unauthorized use of the card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY THIS', which indicates a denial of authorization for the transaction. This aligns perfectly with reason code F24: No Cardholder Authorization, as it directly addresses the claim of unauthorized use of the card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(46)">
                <td>gen_amex_F29_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F29)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-46" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello Amex team, I hope you're having a good day. I was just sipping my morning coffee when I noticed a charge on my statement that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F29</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "F24",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello Amex team, I hope you're having a good day. I was just sipping my morning coffee when I noticed a charge on my statement that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello Amex team, I hope you're having a good day. I was just sipping my morning coffee when I noticed a charge on my statement that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Amex)

[System hint: Based on keywords '["don't recognize"]', consider code F24 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the charge and denies making the transaction, which aligns perfectly with reason code F24 - No Cardholder Authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the charge and denies making the transaction, which aligns perfectly with reason code F24 - No Cardholder Authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(47)">
                <td>gen_amex_F29_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F29)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-47" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping much lately, especially not from home. Could you look into this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F29</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping much lately, especially not from home. Could you look into this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a charge that doesn't fit their usual spending and is seeking clarification, but they haven't explicitly claimed fraud or unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a charge that doesn't fit their usual spending and is seeking clarification, but they haven't explicitly claimed fraud or unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping much lately, especially not from home. Could you look into this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder indicates that there is a charge on their statement that seems unusual and does not fit with their typical spending habits. This suggests that they did not authorize the transaction, which aligns with the F24 code for 'No Cardholder Authorization'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder indicates that there is a charge on their statement that seems unusual and does not fit with their typical spending habits. This suggests that they did not authorize the transaction, which aligns with the F24 code for 'No Cardholder Authorization'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(48)">
                <td>gen_amex_F30_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F30)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-48" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F30</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "F24",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Amex)

[System hint: Based on keywords '["didn't make"]', consider code F24 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of reason code F24 - No Cardholder Authorization. The phrase 'I DIDN'T make' indicates a clear denial of authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of reason code F24 - No Cardholder Authorization. The phrase 'I DIDN'T make' indicates a clear denial of authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(49)">
                <td>gen_amex_F30_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F30)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-49" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. I remember using my card at the grocery store last week, but this one seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F30</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. I remember using my card at the grocery store last week, but this one seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that I don't recall making. I remember using my card at the grocery store last week, but this one seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they do not recall making the charge, indicating a denial of authorization for the transaction. This aligns perfectly with the F24 code, which is used when a cardholder disputes a transaction they did not authorize."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they do not recall making the charge, indicating a denial of authorization for the transaction. This aligns perfectly with the F24 code, which is used when a cardholder disputes a transaction they did not authorize."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(50)">
                <td>gen_amex_F30_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F30)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-50" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my statement. It seems like my card had a little adventure without me. Could you look into this? Thanks. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F30</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my statement. It seems like my card had a little adventure without me. Could you look into this? Thanks. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their statement but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their statement but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my statement. It seems like my card had a little adventure without me. Could you look into this? Thanks. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder did not recognize a transaction on their statement, suggesting that they did not authorize the charge. This aligns directly with the reason code F24, which is for 'No Cardholder Authorization'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder did not recognize a transaction on their statement, suggesting that they did not authorize the charge. This aligns directly with the reason code F24, which is for 'No Cardholder Authorization'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(51)">
                <td>gen_amex_F31_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-51" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">MY CARD WAS STOLEN! FIX THIS NOW! I DIDN'T AUTHORIZE ANYTHING! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "F24",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "stolen"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
MY CARD WAS STOLEN! FIX THIS NOW! I DIDN'T AUTHORIZE ANYTHING! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states that their card was stolen and that they did not authorize any transactions, which clearly indicates a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states that their card was stolen and that they did not authorize any transactions, which clearly indicates a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
MY CARD WAS STOLEN! FIX THIS NOW! I DIDN'T AUTHORIZE ANYTHING! (Network: Amex)

[System hint: Based on keywords '['stolen']', consider code F24 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that their card was stolen and that they did not authorize any transactions, which directly aligns with the definition of F24 - No Cardholder Authorization. This is a clear case of fraud where the cardholder denies making the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that their card was stolen and that they did not authorize any transactions, which directly aligns with the definition of F24 - No Cardholder Authorization. This is a clear case of fraud where the cardholder denies making the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(52)">
                <td>gen_amex_F31_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-52" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I recently had a rather unusual experience. I was out for a walk in the park, enjoying the crisp autumn air, when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently had a rather unusual experience. I was out for a walk in the park, enjoying the crisp autumn air, when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder claims they did not recognize transactions after losing their credit card, indicating that they did not authorize those transactions."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder claims they did not recognize transactions after losing their credit card, indicating that they did not authorize those transactions."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently had a rather unusual experience. I was out for a walk in the park, enjoying the crisp autumn air, when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they noticed transactions they didn't recognize, indicating that they did not authorize those transactions. This aligns perfectly with the F24 code, which is for 'No Cardholder Authorization'. The situation described suggests fraudulent activity since the card was lost and unauthorized transactions occurred."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they noticed transactions they didn't recognize, indicating that they did not authorize those transactions. This aligns perfectly with the F24 code, which is for 'No Cardholder Authorization'. The situation described suggests fraudulent activity since the card was lost and unauthorized transactions occurred."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(53)">
                <td>gen_amex_F31_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: F31)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-53" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed some unexpected activity on my account after a recent change in my wallet's contents. Could you help clarify this situation? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: fraudulent</div>
                            <div>Code: F31</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed some unexpected activity on my account after a recent change in my wallet's contents. Could you help clarify this situation? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder mentions unexpected activity and seeks clarification, indicating they do not recognize the transaction, but they have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder mentions unexpected activity and seeks clarification, indicating they do not recognize the transaction, but they have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed some unexpected activity on my account after a recent change in my wallet's contents. Could you help clarify this situation? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates unexpected activity on the account, suggesting that the cardholder did not authorize the transaction. This aligns with the F24 code, which is used when the cardholder denies the transaction, indicating it was not authorized by them."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates unexpected activity on the account, suggesting that the cardholder did not authorize the transaction. This aligns with the F24 code, which is used when the cardholder denies the transaction, indicating it was not authorized by them."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(54)">
                <td>gen_amex_M01_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: M01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-54" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged?! FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: M01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged?! FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the charge, indicating a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the charge, indicating a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged?! FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Amex)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The user explicitly states 'I DIDN'T AUTHORIZE', which directly indicates a denial of the transaction. This aligns perfectly with the F24 code, which is for 'No Cardholder Authorization', indicating that the cardholder did not authorize the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The user explicitly states 'I DIDN'T AUTHORIZE', which directly indicates a denial of the transaction. This aligns perfectly with the F24 code, which is for 'No Cardholder Authorization', indicating that the cardholder did not authorize the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(55)">
                <td>gen_amex_M01_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: M01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-55" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I might have missed something, but I don't remember agreeing to this charge. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: M01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I might have missed something, but I don't remember agreeing to this charge. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recall authorizing the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recall authorizing the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Amex card that I don't recall authorizing. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I might have missed something, but I don't remember agreeing to this charge. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the 'No Cardholder Authorization' code (F24), which is used when the cardholder disputes a charge they did not authorize."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the 'No Cardholder Authorization' code (F24), which is used when the cardholder disputes a charge they did not authorize."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(56)">
                <td>gen_amex_M01_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: M01)</small></td>
                <td>0.9</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-56" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something unexpected. It seems like there was a mix-up or misunderstanding. Could you look into this for me? I appreciate your help in clarifying this situation. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: M01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something unexpected. It seems like there was a mix-up or misunderstanding. Could you look into this for me? I appreciate your help in clarifying this situation. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a transaction and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a transaction and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something unexpected. It seems like there was a mix-up or misunderstanding. Could you look into this for me? I appreciate your help in clarifying this situation. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.90,
    "reasoning": "The description indicates a mix-up or misunderstanding regarding a transaction, which suggests that the cardholder may not recognize the charge. This aligns closely with the 'No Cardholder Authorization' code (F24), as it implies the cardholder denies making the transaction. However, the ambiguity in the description prevents a perfect match, hence the confidence level is slightly lower."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.9,
  "reasoning": "The description indicates a mix-up or misunderstanding regarding a transaction, which suggests that the cardholder may not recognize the charge. This aligns closely with the 'No Cardholder Authorization' code (F24), as it implies the cardholder denies making the transaction. However, the ambiguity in the description prevents a perfect match, hence the confidence level is slightly lower."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(57)">
                <td>gen_amex_P01_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A02</span> <small>(exp: P01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-57" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT ASAP! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT ASAP! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT ASAP! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card is not working, which suggests that there may be no valid authorization for the transaction. This aligns closely with reason code A02, which is specifically for cases where there is no valid authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card is not working, which suggests that there may be no valid authorization for the transaction. This aligns closely with reason code A02, which is specifically for cases where there is no valid authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(58)">
                <td>gen_amex_P01_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A08</span> <small>(exp: P01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-58" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just trying to buy my morning coffee, and to my surprise, my card was declined. I double-checked the number, and it seems correct. I even tried it at another store, but no luck. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A08",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just trying to buy my morning coffee, and to my surprise, my card was declined. I double-checked the number, and it seems correct. I even tried it at another store, but no luck. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder's card was declined during a transaction attempt, indicating an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder's card was declined during a transaction attempt, indicating an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just trying to buy my morning coffee, and to my surprise, my card was declined. I double-checked the number, and it seems correct. I even tried it at another store, but no luck. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Amex)

[System hint: Based on keywords '['declined']', consider code A08 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A08",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly indicates that the card was declined at the point of sale, which directly corresponds to the A08 reason code for 'Card declined at point of sale - authorization issue, not fraud'. There are no indications of fraud or other issues, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A08",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly indicates that the card was declined at the point of sale, which directly corresponds to the A08 reason code for 'Card declined at point of sale - authorization issue, not fraud'. There are no indications of fraud or other issues, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(59)">
                <td>gen_amex_P01_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A02</span> <small>(exp: P01)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-59" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I was left standing there, unsure of what to do next. Could you shed some light on this situation? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I was left standing there, unsure of what to do next. Could you shed some light on this situation? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates confusion at the checkout without any explicit claim of fraud or unauthorized transaction. It suggests an issue with the transaction process rather than a specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates confusion at the checkout without any explicit claim of fraud or unauthorized transaction. It suggests an issue with the transaction process rather than a specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I was left standing there, unsure of what to do next. Could you shed some light on this situation? (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A02",
    "confidence": 0.85,
    "reasoning": "The description indicates that there was confusion at the checkout, which suggests that there may have been an issue with the authorization of the transaction. The cashier's puzzled reaction implies that the transaction may not have been validly authorized, leading to uncertainty about how to proceed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A02",
  "confidence": 0.85,
  "reasoning": "The description indicates that there was confusion at the checkout, which suggests that there may have been an issue with the authorization of the transaction. The cashier's puzzled reaction implies that the transaction may not have been validly authorized, leading to uncertainty about how to proceed."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(60)">
                <td>gen_amex_P04_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">P08</span> <small>(exp: P04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-60" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: P08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "P08",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)

[System hint: Based on keywords '['charged twice']', consider code P08 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the user was charged twice, which directly corresponds to the P08 code for duplicate charges. The description indicates a specific issue of the same transaction being processed multiple times, making this the exact match."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the user was charged twice, which directly corresponds to the P08 code for duplicate charges. The description indicates a specific issue of the same transaction being processed multiple times, making this the exact match."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(61)">
                <td>gen_amex_P04_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-61" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. Imagine my surprise when I checked my statement and noticed something odd. It seems like the amount I paid was processed differently than expected. I was under the impression it would be handled one way, but it appears to have been done another. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. Imagine my surprise when I checked my statement and noticed something odd. It seems like the amount I paid was processed differently than expected. I was under the impression it would be handled one way, but it appears to have been done another. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing confusion about the amount charged and indicates it was processed differently than expected, which suggests an authorization or processing error rather than fraud or any other specific issue."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing confusion about the amount charged and indicates it was processed differently than expected, which suggests an authorization or processing error rather than fraud or any other specific issue."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. Imagine my surprise when I checked my statement and noticed something odd. It seems like the amount I paid was processed differently than expected. I was under the impression it would be handled one way, but it appears to have been done another. Could you please help me understand what happened? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The cardholder indicates that the amount processed was different than expected, suggesting that the charge amount exceeds what they authorized for the dinner. This aligns directly with reason code A01, which addresses situations where the charge amount exceeds the authorization amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The cardholder indicates that the amount processed was different than expected, suggesting that the charge amount exceeds what they authorized for the dinner. This aligns directly with reason code A01, which addresses situations where the charge amount exceeds the authorization amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(62)">
                <td>gen_amex_P04_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: P04)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-62" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement after my recent purchase. It seems like the transaction didn't align with what I anticipated. Could you look into this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P04</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement after my recent purchase. It seems like the transaction didn't align with what I anticipated. Could you look into this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something unusual on their statement and is seeking clarification about a transaction they do not recognize, but they have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something unusual on their statement and is seeking clarification about a transaction they do not recognize, but they have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement after my recent purchase. It seems like the transaction didn't align with what I anticipated. Could you look into this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder's statement indicates they noticed something unusual and that the transaction did not align with their expectations, suggesting they did not authorize the transaction. This aligns with the F24 code, which is used when the cardholder denies the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder's statement indicates they noticed something unusual and that the transaction did not align with their expectations, suggesting they did not authorize the transaction. This aligns with the F24 code, which is used when the cardholder denies the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(63)">
                <td>gen_amex_P07_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">P07</span> <small>(exp: P07)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-63" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my payment LATE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P07</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: P07</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my payment LATE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about a late payment, which suggests an issue with processing or authorization rather than a specific dispute about fraud, product receipt, or other defined categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about a late payment, which suggests an issue with processing or authorization rather than a specific dispute about fraud, product receipt, or other defined categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my payment LATE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P07",
    "confidence": 0.95,
    "reasoning": "The dispute description expresses frustration about a late payment, which aligns directly with the reason code P07 for 'Late Submission'. This indicates that the charge was submitted after the expected timeframe, making it the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P07",
  "confidence": 0.95,
  "reasoning": "The dispute description expresses frustration about a late payment, which aligns directly with the reason code P07 for 'Late Submission'. This indicates that the charge was submitted after the expected timeframe, making it the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(64)">
                <td>gen_amex_P07_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">P07</span> <small>(exp: P07)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-64" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems there was a delay in processing my payment, which is quite unusual. I always make sure to pay on time, so this has left me a bit puzzled. Could you please look into this matter for me? Thank you so much for your assistance! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P07</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: P07</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems there was a delay in processing my payment, which is quite unusual. I always make sure to pay on time, so this has left me a bit puzzled. Could you please look into this matter for me? Thank you so much for your assistance! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing confusion about a delay in processing their payment, which suggests an issue with transaction processing rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing confusion about a delay in processing their payment, which suggests an issue with transaction processing rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems there was a delay in processing my payment, which is quite unusual. I always make sure to pay on time, so this has left me a bit puzzled. Could you please look into this matter for me? Thank you so much for your assistance! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P07",
    "confidence": 0.85,
    "reasoning": "The dispute mentions a delay in processing the payment, which suggests that the transaction was not submitted in a timely manner. This aligns with the reason code P07, which pertains to late submission of a charge. While the description does not explicitly state that the charge was late, the context implies a concern about the timing of the payment processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P07",
  "confidence": 0.85,
  "reasoning": "The dispute mentions a delay in processing the payment, which suggests that the transaction was not submitted in a timely manner. This aligns with the reason code P07, which pertains to late submission of a charge. While the description does not explicitly state that the charge was late, the context implies a concern about the timing of the payment processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(65)">
                <td>gen_amex_P07_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: P07)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-65" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something off with my recent statement. It seems like things didn't align as they usually do, and I'm not sure why. Could you help clarify this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P07</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something off with my recent statement. It seems like things didn't align as they usually do, and I'm not sure why. Could you help clarify this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, which indicates they do not recognize the transaction but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, which indicates they do not recognize the transaction but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something off with my recent statement. It seems like things didn't align as they usually do, and I'm not sure why. Could you help clarify this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.85,
    "reasoning": "The description indicates uncertainty about the charges on the statement, suggesting that the cardholder may not recognize the transaction. This aligns with the 'No Cardholder Authorization' code (F24), as it implies a lack of recognition or authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.85,
  "reasoning": "The description indicates uncertainty about the charges on the statement, suggesting that the cardholder may not recognize the transaction. This aligns with the 'No Cardholder Authorization' code (F24), as it implies a lack of recognition or authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(66)">
                <td>gen_amex_P03_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">P08</span> <small>(exp: P03)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-66" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY WAS I CHARGED TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: P08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "P08",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY WAS I CHARGED TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY WAS I CHARGED TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Amex)

[System hint: Based on keywords '['charged twice']', consider code P08 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P08",
    "confidence": 0.95,
    "reasoning": "The description clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P08",
  "confidence": 0.95,
  "reasoning": "The description clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(67)">
                <td>gen_amex_P03_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">P03</span> <small>(exp: P03)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-67" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently had a bit of a mix-up with my credit card. You see, I was out shopping for some groceries, and when I got home, I noticed that a transaction I thought was a refund was actually processed as a charge. It's quite puzzling because I distinctly remember the cashier saying it was all sorted. Could you please help me understand what happened? Thank you so much for your assistance! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: P03</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently had a bit of a mix-up with my credit card. You see, I was out shopping for some groceries, and when I got home, I noticed that a transaction I thought was a refund was actually processed as a charge. It's quite puzzling because I distinctly remember the cashier saying it was all sorted. Could you please help me understand what happened? Thank you so much for your assistance! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is confused about a charge they thought was a refund and is seeking clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is confused about a charge they thought was a refund and is seeking clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently had a bit of a mix-up with my credit card. You see, I was out shopping for some groceries, and when I got home, I noticed that a transaction I thought was a refund was actually processed as a charge. It's quite puzzling because I distinctly remember the cashier saying it was all sorted. Could you please help me understand what happened? Thank you so much for your assistance! (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P03",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder believed a transaction was a refund but it was processed as a charge instead. This aligns perfectly with the reason code P03, which specifically addresses situations where a credit was processed as a charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P03",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder believed a transaction was a refund but it was processed as a charge instead. This aligns perfectly with the reason code P03, which specifically addresses situations where a credit was processed as a charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(68)">
                <td>gen_amex_P03_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">P05</span> <small>(exp: P03)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-68" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was expecting a different outcome after my last visit to the store. The numbers on my statement don't match what I anticipated. Can we look into this? Thanks. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: P05</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was expecting a different outcome after my last visit to the store. The numbers on my statement don't match what I anticipated. Can we look into this? Thanks. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing confusion about the charges on their statement and is seeking clarification, which indicates a potential authorization issue or processing error rather than a clear case of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing confusion about the charges on their statement and is seeking clarification, which indicates a potential authorization issue or processing error rather than a clear case of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was expecting a different outcome after my last visit to the store. The numbers on my statement don't match what I anticipated. Can we look into this? Thanks. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P05",
    "confidence": 0.95,
    "reasoning": "The dispute indicates that the cardholder's statement does not match their expectations, suggesting that the charge amount is incorrect. This aligns directly with the reason code P05, which is for 'Incorrect Charge Amount'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P05",
  "confidence": 0.95,
  "reasoning": "The dispute indicates that the cardholder's statement does not match their expectations, suggesting that the charge amount is incorrect. This aligns directly with the reason code P05, which is for 'Incorrect Charge Amount'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(69)">
                <td>gen_amex_P05_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-69" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the high bill and claims they didn't spend that much, which suggests a potential issue with the amount charged rather than a clear case of fraud or unauthorized transactions."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the high bill and claims they didn't spend that much, which suggests a potential issue with the amount charged rather than a clear case of fraud or unauthorized transactions."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL SO HIGH?! FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute indicates that the cardholder is questioning the high bill and claims they did not spend that much, which suggests that the charge amount exceeds what they authorized. This aligns perfectly with reason code A01, which specifically addresses situations where the charge amount exceeds the authorization amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute indicates that the cardholder is questioning the high bill and claims they did not spend that much, which suggests that the charge amount exceeds what they authorized. This aligns perfectly with reason code A01, which specifically addresses situations where the charge amount exceeds the authorization amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(70)">
                <td>gen_amex_P05_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-70" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was reviewing my recent credit card statement over my morning coffee, and I noticed something odd. I remember purchasing a lovely set of kitchenware last week, but the amount charged seems higher than what I recall. I distinctly remember the cashier mentioning a discount, which doesn't seem to have been applied. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A01",
  "explanation": "Amount charged differs from what was authorized",
  "matched_keywords": [
    "higher than"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was reviewing my recent credit card statement over my morning coffee, and I noticed something odd. I remember purchasing a lovely set of kitchenware last week, but the amount charged seems higher than what I recall. I distinctly remember the cashier mentioning a discount, which doesn't seem to have been applied. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is disputing the amount charged, claiming it is higher than expected due to a discount that was not applied. This indicates a processing error or authorization issue rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is disputing the amount charged, claiming it is higher than expected due to a discount that was not applied. This indicates a processing error or authorization issue rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was reviewing my recent credit card statement over my morning coffee, and I noticed something odd. I remember purchasing a lovely set of kitchenware last week, but the amount charged seems higher than what I recall. I distinctly remember the cashier mentioning a discount, which doesn't seem to have been applied. Could you please look into this for me? Thank you so much for your assistance. (Network: Amex)

[System hint: Based on keywords '['higher than']', consider code A01 - Amount charged differs from what was authorized]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the amount charged is higher than what the cardholder recalls, which directly aligns with the reason code A01 - Charge Amount Exceeds Authorization Amount. The mention of a discount that was not applied further supports this selection."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the amount charged is higher than what the cardholder recalls, which directly aligns with the reason code A01 - Charge Amount Exceeds Authorization Amount. The mention of a discount that was not applied further supports this selection."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(71)">
                <td>gen_amex_P05_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-71" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was going through my statement and something doesn't quite add up. I remember a different figure when I made the purchase. Could you help clarify this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was going through my statement and something doesn't quite add up. I remember a different figure when I made the purchase. Could you help clarify this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and does not recognize the amount, but has not explicitly claimed fraud or unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and does not recognize the amount, but has not explicitly claimed fraud or unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was going through my statement and something doesn't quite add up. I remember a different figure when I made the purchase. Could you help clarify this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder believes the charge amount does not match their expectation at the time of purchase, suggesting that the charge amount exceeds what they authorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder believes the charge amount does not match their expectation at the time of purchase, suggesting that the charge amount exceeds what they authorized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(72)">
                <td>gen_amex_P08_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">P08</span> <small>(exp: P08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-72" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY AM I CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: P08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: P08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "P08",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY AM I CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY AM I CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Amex)

[System hint: Based on keywords '['charged twice']', consider code P08 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges processed multiple times."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly indicates a duplicate charge situation. This aligns perfectly with reason code P08, which is specifically for duplicate charges processed multiple times."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(73)">
                <td>gen_amex_P08_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">P08</span> <small>(exp: P08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-73" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last weekend, I went out for brunch with some friends at this lovely little café downtown. We had a great time, and I remember paying for my meal with my Amex card. However, when I checked my statement later, I saw the same charge listed twice. I'm a bit puzzled about this and would appreciate any help you can provide in resolving it. Thank you so much for your assistance! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: P08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: P08</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last weekend, I went out for brunch with some friends at this lovely little café downtown. We had a great time, and I remember paying for my meal with my Amex card. However, when I checked my statement later, I saw the same charge listed twice. I'm a bit puzzled about this and would appreciate any help you can provide in resolving it. Thank you so much for your assistance! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is reporting that they were charged twice for the same transaction, which is explicitly indicated in their description."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is reporting that they were charged twice for the same transaction, which is explicitly indicated in their description."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last weekend, I went out for brunch with some friends at this lovely little café downtown. We had a great time, and I remember paying for my meal with my Amex card. However, when I checked my statement later, I saw the same charge listed twice. I'm a bit puzzled about this and would appreciate any help you can provide in resolving it. Thank you so much for your assistance! (Network: Amex)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **C14**: Paid by Other Means

- **P08**: Duplicate Charge


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "P08",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder was charged twice for the same transaction, which directly aligns with the definition of a duplicate charge. The description explicitly mentions seeing the same charge listed twice on the statement, making P08 the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "P08",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder was charged twice for the same transaction, which directly aligns with the definition of a duplicate charge. The description explicitly mentions seeing the same charge listed twice on the statement, making P08 the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(74)">
                <td>gen_amex_P08_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: P08)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-74" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too generous with a particular café visit. Could you help clarify this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: duplicate</div>
                            <div>Code: P08</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too generous with a particular café visit. Could you help clarify this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a transaction they do not recognize, asking for clarification without explicitly claiming fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a transaction they do not recognize, asking for clarification without explicitly claiming fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too generous with a particular café visit. Could you help clarify this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder is questioning a transaction they do not recognize, which aligns with the code for 'No Cardholder Authorization' (F24). The phrase 'my account has been a bit too generous' suggests that the cardholder did not authorize this transaction, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder is questioning a transaction they do not recognize, which aligns with the code for 'No Cardholder Authorization' (F24). The phrase 'my account has been a bit too generous' suggests that the cardholder did not authorize this transaction, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(75)">
                <td>gen_amex_P22_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A02</span> <small>(exp: P22)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-75" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT TODAY! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P22</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT TODAY! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card not working, which indicates an authorization issue rather than a claim of fraud or any specific transaction dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card not working, which indicates an authorization issue rather than a claim of fraud or any specific transaction dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING? FIX THIS NOW! I NEED IT TODAY! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card is not working, which suggests that there is no valid authorization for the transaction. This aligns perfectly with reason code A02, which is specifically for cases where there is no valid authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card is not working, which suggests that there is no valid authorization for the transaction. This aligns perfectly with reason code A02, which is specifically for cases where there is no valid authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(76)">
                <td>gen_amex_P22_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A02</span> <small>(exp: P22)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-76" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just trying to buy some groceries when I noticed something odd. My card, which I've been using for years without any issues, suddenly didn't work. I double-checked the number, and it seems correct. I even tried it at another store, but the same thing happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P22</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just trying to buy some groceries when I noticed something odd. My card, which I've been using for years without any issues, suddenly didn't work. I double-checked the number, and it seems correct. I even tried it at another store, but the same thing happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is experiencing an issue with their card being declined during a transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is experiencing an issue with their card being declined during a transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just trying to buy some groceries when I noticed something odd. My card, which I've been using for years without any issues, suddenly didn't work. I double-checked the number, and it seems correct. I even tried it at another store, but the same thing happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A02",
    "confidence": 0.95,
    "reasoning": "The cardholder experienced issues with their card being declined at multiple stores, indicating that there was no valid authorization for the transaction attempts. This aligns directly with the A02 reason code, which pertains to situations where a transaction could not be authorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A02",
  "confidence": 0.95,
  "reasoning": "The cardholder experienced issues with their card being declined at multiple stores, indicating that there was no valid authorization for the transaction attempts. This aligns directly with the A02 reason code, which pertains to situations where a transaction could not be authorized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(77)">
                <td>gen_amex_P22_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: P22)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-77" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I felt a bit embarrassed. It seemed like there was a mismatch somewhere. Could you look into this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P22</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I felt a bit embarrassed. It seemed like there was a mismatch somewhere. Could you look into this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about a transaction at checkout, indicating they do not recognize the situation but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about a transaction at checkout, indicating they do not recognize the situation but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I felt a bit embarrassed. It seemed like there was a mismatch somewhere. Could you look into this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.85,
    "reasoning": "The description indicates a situation where the cardholder felt there was a mismatch at checkout, which suggests a lack of authorization for the transaction. The cashier's puzzled reaction implies that the transaction may not have been properly authorized, aligning with the 'No Cardholder Authorization' code (F24). However, the description lacks explicit denial of the transaction, which introduces some ambiguity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.85,
  "reasoning": "The description indicates a situation where the cardholder felt there was a mismatch at checkout, which suggests a lack of authorization for the transaction. The cashier's puzzled reaction implies that the transaction may not have been properly authorized, aligning with the 'No Cardholder Authorization' code (F24). However, the description lacks explicit denial of the transaction, which introduces some ambiguity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(78)">
                <td>gen_amex_R03_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">C02</span> <small>(exp: R03)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-78" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS THIS STILL NOT FIXED?! I NEED MY MONEY BACK NOW! THIS IS UNACCEPTABLE! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: C02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS THIS STILL NOT FIXED?! I NEED MY MONEY BACK NOW! THIS IS UNACCEPTABLE! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder expresses frustration about not receiving a refund and demands their money back, but does not provide explicit details indicating fraud or any specific issue with the transaction itself."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder expresses frustration about not receiving a refund and demands their money back, but does not provide explicit details indicating fraud or any specific issue with the transaction itself."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS THIS STILL NOT FIXED?! I NEED MY MONEY BACK NOW! THIS IS UNACCEPTABLE! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "C02",
    "confidence": 0.95,
    "reasoning": "The dispute description expresses frustration over not receiving a refund, indicating that a credit was promised but not processed. This aligns perfectly with the reason code for 'never got CREDIT promised'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "C02",
  "confidence": 0.95,
  "reasoning": "The dispute description expresses frustration over not receiving a refund, indicating that a credit was promised but not processed. This aligns perfectly with the reason code for 'never got CREDIT promised'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(79)">
                <td>gen_amex_R03_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">R03</span> <small>(exp: R03)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-79" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I had previously raised a concern about. I was under the impression that this matter was being handled, but it seems there hasn't been any resolution yet. Could you kindly look into this for me? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: R03</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I had previously raised a concern about. I was under the impression that this matter was being handled, but it seems there hasn't been any resolution yet. Could you kindly look into this for me? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing concern about a charge they believed was being handled, indicating a lack of resolution rather than claiming fraud or a specific issue with the transaction itself."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing concern about a charge they believed was being handled, indicating a lack of resolution rather than claiming fraud or a specific issue with the transaction itself."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I had previously raised a concern about. I was under the impression that this matter was being handled, but it seems there hasn't been any resolution yet. Could you kindly look into this for me? Thank you so much for your assistance. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "R03",
    "confidence": 0.85,
    "reasoning": "The user indicates that they had previously raised a concern about a charge and believed it was being handled, but there has been no resolution yet. This suggests that the merchant or service provider did not adequately respond to the user's inquiry, which aligns with the 'Insufficient Reply' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "R03",
  "confidence": 0.85,
  "reasoning": "The user indicates that they had previously raised a concern about a charge and believed it was being handled, but there has been no resolution yet. This suggests that the merchant or service provider did not adequately respond to the user's inquiry, which aligns with the 'Insufficient Reply' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(80)">
                <td>gen_amex_R03_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">R03</span> <small>(exp: R03)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-80" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we had sorted out that thing from last month, but it seems like there's still something hanging. Could you check on that for me? Thanks. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R03</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: R03</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we had sorted out that thing from last month, but it seems like there's still something hanging. Could you check on that for me? Thanks. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is inquiring about a previous issue without explicitly stating a problem related to fraud, product not received, or any specific chargeback category. The language suggests a general concern about a transaction rather than a clear dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is inquiring about a previous issue without explicitly stating a problem related to fraud, product not received, or any specific chargeback category. The language suggests a general concern about a transaction rather than a clear dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we had sorted out that thing from last month, but it seems like there's still something hanging. Could you check on that for me? Thanks. (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "R03",
    "confidence": 0.85,
    "reasoning": "The dispute description suggests that there is an unresolved issue from a previous transaction, indicating a lack of sufficient response or resolution from the merchant. This aligns with the 'Insufficient Reply' code (R03), as the cardholder is seeking clarification on a matter that seems to have not been adequately addressed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "R03",
  "confidence": 0.85,
  "reasoning": "The dispute description suggests that there is an unresolved issue from a previous transaction, indicating a lack of sufficient response or resolution from the merchant. This aligns with the 'Insufficient Reply' code (R03), as the cardholder is seeking clarification on a matter that seems to have not been adequately addressed."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(81)">
                <td>gen_amex_P23_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P23)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-81" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL SO HIGH? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P23</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL SO HIGH? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the high bill and claims they didn't spend that much, which indicates a potential issue with the amount charged rather than a clear case of fraud or any other specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the high bill and claims they didn't spend that much, which indicates a potential issue with the amount charged rather than a clear case of fraud or any other specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL SO HIGH? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute indicates that the cardholder is questioning the high bill and claims they didn't spend that much, which suggests that the charge amount exceeds what they authorized. This aligns perfectly with reason code A01, which specifically addresses situations where the charge amount exceeds the authorization amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute indicates that the cardholder is questioning the high bill and claims they didn't spend that much, which suggests that the charge amount exceeds what they authorized. This aligns perfectly with reason code A01, which specifically addresses situations where the charge amount exceeds the authorization amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(82)">
                <td>gen_amex_P23_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P23)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-82" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently returned from a lovely trip to Europe, where I enjoyed some delightful meals and sightseeing. However, upon reviewing my credit card statement, I noticed something peculiar. The amounts charged seem higher than what I recall spending. I remember paying for a dinner that was supposed to be 50 euros, but it appears as a much larger amount in dollars. Could you please help me understand this discrepancy? Thank you so much for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P23</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "A01",
  "explanation": "Amount charged differs from what was authorized",
  "matched_keywords": [
    "higher than"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently returned from a lovely trip to Europe, where I enjoyed some delightful meals and sightseeing. However, upon reviewing my credit card statement, I noticed something peculiar. The amounts charged seem higher than what I recall spending. I remember paying for a dinner that was supposed to be 50 euros, but it appears as a much larger amount in dollars. Could you please help me understand this discrepancy? Thank you so much for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning a discrepancy in the charged amount compared to what they recall spending, which indicates a potential processing error or authorization issue rather than fraud or any other specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning a discrepancy in the charged amount compared to what they recall spending, which indicates a potential processing error or authorization issue rather than fraud or any other specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently returned from a lovely trip to Europe, where I enjoyed some delightful meals and sightseeing. However, upon reviewing my credit card statement, I noticed something peculiar. The amounts charged seem higher than what I recall spending. I remember paying for a dinner that was supposed to be 50 euros, but it appears as a much larger amount in dollars. Could you please help me understand this discrepancy? Thank you so much for your assistance. (Network: Amex)

[System hint: Based on keywords '['higher than']', consider code A01 - Amount charged differs from what was authorized]
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder noticed charges that were higher than what they recalled spending, specifically mentioning a dinner that was supposed to be 50 euros but appeared as a larger amount in dollars. This directly aligns with the reason code A01, which is for situations where the charge amount exceeds the authorization amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder noticed charges that were higher than what they recalled spending, specifically mentioning a dinner that was supposed to be 50 euros but appeared as a larger amount in dollars. This directly aligns with the reason code A01, which is for situations where the charge amount exceeds the authorization amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(83)">
                <td>gen_amex_P23_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">A01</span> <small>(exp: P23)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-83" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something odd. The numbers don't quite match up with what I expected. It's like the amounts have changed since I last checked. Could you look into this for me? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: P23</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: A01</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something odd. The numbers don't quite match up with what I expected. It's like the amounts have changed since I last checked. Could you look into this for me? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning the transaction amounts and expressing confusion, but they have not explicitly claimed fraud or that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning the transaction amounts and expressing confusion, but they have not explicitly claimed fraud or that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something odd. The numbers don't quite match up with what I expected. It's like the amounts have changed since I last checked. Could you look into this for me? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "A01",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder noticed discrepancies in the transaction amounts, suggesting that the charge amount exceeds what they expected or authorized. This aligns directly with reason code A01, which addresses situations where the charge amount exceeds the authorization amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "A01",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder noticed discrepancies in the transaction amounts, suggesting that the charge amount exceeds what they expected or authorized. This aligns directly with reason code A01, which addresses situations where the charge amount exceeds the authorization amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(84)">
                <td>gen_amex_R13_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">R13</span> <small>(exp: R13)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-84" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY NO RESPONSE? FIX THIS NOW! I NEED MY MONEY BACK! (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R13</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="">Category: general</div>
                            <div class="">Code: R13</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY NO RESPONSE? FIX THIS NOW! I NEED MY MONEY BACK! (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about a lack of response regarding their request for a refund, but does not provide explicit details about the nature of the transaction or any claims of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about a lack of response regarding their request for a refund, but does not provide explicit details about the nature of the transaction or any claims of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY NO RESPONSE? FIX THIS NOW! I NEED MY MONEY BACK! (Network: Amex)
"""

Target Category: general

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C18**: Request for Copy Unfulfilled

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "R13",
    "confidence": 0.95,
    "reasoning": "The dispute description expresses frustration over a lack of response regarding a refund request, which aligns perfectly with the reason code R13 (No Reply). The customer is seeking resolution and their money back, indicating that they have not received any communication or acknowledgment from the merchant."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "R13",
  "confidence": 0.95,
  "reasoning": "The dispute description expresses frustration over a lack of response regarding a refund request, which aligns perfectly with the reason code R13 (No Reply). The customer is seeking resolution and their money back, indicating that they have not received any communication or acknowledgment from the merchant."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(85)">
                <td>gen_amex_R13_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="mismatch">F24</span> <small>(exp: R13)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-85" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I don't recall authorizing. I tried reaching out to the merchant, but it seems like my emails are going into a void. It's quite puzzling, and I would appreciate any guidance you can provide on how to resolve this matter. Thank you for your assistance. (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R13</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: F24</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I don't recall authorizing. I tried reaching out to the merchant, but it seems like my emails are going into a void. It's quite puzzling, and I would appreciate any guidance you can provide on how to resolve this matter. Thank you for your assistance. (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recall authorizing the charge and is seeking assistance to identify it, but has not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recall authorizing the charge and is seeking assistance to identify it, but has not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, juggling work and family commitments, and amidst all that, I noticed a charge on my Amex card that I don't recall authorizing. I tried reaching out to the merchant, but it seems like my emails are going into a void. It's quite puzzling, and I would appreciate any guidance you can provide on how to resolve this matter. Thank you for your assistance. (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "F24",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the fraud code F24, which is used when the cardholder denies the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "F24",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they do not recall authorizing the charge, indicating a denial of the transaction. This aligns perfectly with the fraud code F24, which is used when the cardholder denies the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(86)">
                <td>gen_amex_R13_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">amex</span> <small>(exp: amex)</small></td>
                <td><span class="">R13</span> <small>(exp: R13)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-86" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I reached out a while back about something on my statement. It's been quiet on the other end, and I'm left wondering if there's a way to move forward. Any insights? (Network: Amex)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: amex</div>
                            <div>Category: general</div>
                            <div>Code: R13</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: amex</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: R13</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>amex</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I reached out a while back about something on my statement. It's been quiet on the other end, and I'm left wondering if there's a way to move forward. Any insights? (Network: Amex)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is inquiring about a charge on their statement and expresses uncertainty about it, but does not explicitly claim fraud or indicate that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is inquiring about a charge on their statement and expresses uncertainty about it, but does not explicitly claim fraud or indicate that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Amex chargeback reason codes.

Your task is to select the specific Amex reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I reached out a while back about something on my statement. It's been quiet on the other end, and I'm left wondering if there's a way to move forward. Any insights? (Network: Amex)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **A01**: Charge Amount Exceeds Authorization Amount

- **A02**: No Valid Authorization

- **A08**: Authorization Approval Expired

- **C02**: Credit Not Processed

- **C04**: Goods/Services Returned or Refused

- **C05**: Goods/Services Cancelled

- **C08**: Goods/Services Not Received or Only Partially Received

- **C14**: Paid by Other Means

- **C18**: Request for Copy Unfulfilled

- **C28**: Cancelled Recurring Billing

- **C31**: Goods/Services Not as Described

- **C32**: Goods/Services Damaged or Defective

- **F10**: Missing Imprint

- **F14**: Missing Signature

- **F24**: No Cardholder Authorization

- **F29**: Card Not Present

- **F30**: EMV Counterfeit

- **F31**: EMV Lost/Stolen/Non-Received

- **M01**: Chargeback Authorization

- **P01**: Unassigned Card Number

- **P03**: Credit Processed as Charge

- **P04**: Charge Processed as Credit

- **P05**: Incorrect Charge Amount

- **P07**: Late Submission

- **P08**: Duplicate Charge

- **P22**: Non-Matching Card Number

- **P23**: Currency Discrepancy

- **R03**: Insufficient Reply

- **R13**: No Reply


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Amex):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "R13",
    "confidence": 0.85,
    "reasoning": "The dispute description indicates that the cardholder reached out previously but did not receive a response, leading to uncertainty about the status of their inquiry. This aligns with the 'No Reply' reason code (R13), as it reflects a lack of communication from the merchant regarding the cardholder's concerns."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "R13",
  "confidence": 0.85,
  "reasoning": "The dispute description indicates that the cardholder reached out previously but did not receive a response, leading to uncertainty about the status of their inquiry. This aligns with the 'No Reply' reason code (R13), as it reflects a lack of communication from the merchant regarding the cardholder's concerns."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(87)">
                <td>gen_discover_AA_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AA</span> <small>(exp: AA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-87" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT IS THIS CHARGE?? I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: unrecognized</div>
                            <div>Code: AA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: unrecognized</div>
                            <div class="">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT IS THIS CHARGE?? I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning the charge and does not recognize it, but has not explicitly claimed that it was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning the charge and does not recognize it, but has not explicitly claimed that it was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT IS THIS CHARGE?? I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder does not recognize the charge and claims they did not make any purchase. This aligns perfectly with the 'Does Not Recognize' reason code, as the cardholder is expressing confusion and denial regarding the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder does not recognize the charge and claims they did not make any purchase. This aligns perfectly with the 'Does Not Recognize' reason code, as the cardholder is expressing confusion and denial regarding the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(88)">
                <td>gen_discover_AA_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AA</span> <small>(exp: AA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-88" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's been a busy week with work and family commitments, so I might have overlooked something, but I genuinely don't remember this transaction. Could you please help me understand what this is about? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: unrecognized</div>
                            <div>Code: AA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: unrecognized</div>
                            <div class="">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's been a busy week with work and family commitments, so I might have overlooked something, but I genuinely don't remember this transaction. Could you please help me understand what this is about? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recall making the transaction and is seeking clarification, but has not explicitly claimed that the charge is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recall making the transaction and is seeking clarification, but has not explicitly claimed that the charge is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's been a busy week with work and family commitments, so I might have overlooked something, but I genuinely don't remember this transaction. Could you please help me understand what this is about? Thank you so much for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the transaction and is unsure about its legitimacy, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of memory regarding the charge, confirming that this is an unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the transaction and is unsure about its legitimacy, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of memory regarding the charge, confirming that this is an unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(89)">
                <td>gen_discover_AA_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AA</span> <small>(exp: AA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-89" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent activities and noticed something that doesn't quite fit with my usual pattern. It's like finding a puzzle piece that doesn't belong to the picture. Could you help me sort this out? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: unrecognized</div>
                            <div>Code: AA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: unrecognized</div>
                            <div class="">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent activities and noticed something that doesn't quite fit with my usual pattern. It's like finding a puzzle piece that doesn't belong to the picture. Could you help me sort this out? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing uncertainty about a transaction that doesn't fit their usual pattern, indicating they don't recognize it, but they haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing uncertainty about a transaction that doesn't fit their usual pattern, indicating they don't recognize it, but they haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent activities and noticed something that doesn't quite fit with my usual pattern. It's like finding a puzzle piece that doesn't belong to the picture. Could you help me sort this out? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user does not recognize a transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'doesn't quite fit with my usual pattern' suggests a lack of familiarity with the charge, confirming that this is an unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user does not recognize a transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'doesn't quite fit with my usual pattern' suggests a lack of familiarity with the charge, confirming that this is an unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(90)">
                <td>gen_discover_AP_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AP</span> <small>(exp: AP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-90" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I CANCELED THIS MONTHS AGO! WHY AM I STILL CHARGED? FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: AP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: AP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I CANCELED THIS MONTHS AGO! WHY AM I STILL CHARGED? FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder explicitly states they canceled the subscription months ago but are still being charged, indicating a recurring charge after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder explicitly states they canceled the subscription months ago but are still being charged, indicating a recurring charge after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I CANCELED THIS MONTHS AGO! WHY AM I STILL CHARGED? FIX THIS NOW! (Network: Discover)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **AP**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AP",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the user canceled the subscription months ago and is questioning why they are still being charged. This directly aligns with the reason code 'AP' for Cancelled Recurring Transaction, as it indicates that the user believes they should not have been charged due to a prior cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AP",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the user canceled the subscription months ago and is questioning why they are still being charged. This directly aligns with the reason code 'AP' for Cancelled Recurring Transaction, as it indicates that the user believes they should not have been charged due to a prior cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(91)">
                <td>gen_discover_AP_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AP</span> <small>(exp: AP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-91" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I recently noticed a charge on my Discover card that I thought was resolved. I remember canceling this service a while back, but it seems like the charge still went through. I was just enjoying my morning coffee when I saw the notification, and it really caught me off guard. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: AP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: AP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently noticed a charge on my Discover card that I thought was resolved. I remember canceling this service a while back, but it seems like the charge still went through. I was just enjoying my morning coffee when I saw the notification, and it really caught me off guard. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder mentions canceling a service but still sees a charge, indicating they were charged after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder mentions canceling a service but still sees a charge, indicating they were charged after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I recently noticed a charge on my Discover card that I thought was resolved. I remember canceling this service a while back, but it seems like the charge still went through. I was just enjoying my morning coffee when I saw the notification, and it really caught me off guard. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **AP**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AP",
    "confidence": 0.95,
    "reasoning": "The cardholder mentioned canceling a service but still noticed a charge, indicating that the recurring transaction should have been stopped. This aligns perfectly with the reason code 'AP' for Cancelled Recurring Transaction, as it directly addresses the situation of a charge occurring after a cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AP",
  "confidence": 0.95,
  "reasoning": "The cardholder mentioned canceling a service but still noticed a charge, indicating that the recurring transaction should have been stopped. This aligns perfectly with the reason code 'AP' for Cancelled Recurring Transaction, as it directly addresses the situation of a charge occurring after a cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(92)">
                <td>gen_discover_AP_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">NC</span> <small>(exp: AP)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-92" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we were done with this, but it seems like something slipped through the cracks. Can we revisit our previous conversation? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: AP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: NC</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we were done with this, but it seems like something slipped through the cracks. Can we revisit our previous conversation? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates a need to revisit a previous conversation, suggesting there may be an issue with the transaction or communication, but it does not explicitly claim fraud or any specific problem related to the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates a need to revisit a previous conversation, suggesting there may be an issue with the transaction or communication, but it does not explicitly claim fraud or any specific problem related to the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we were done with this, but it seems like something slipped through the cracks. Can we revisit our previous conversation? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "NC",
    "confidence": 0.85,
    "reasoning": "The description indicates a need to revisit a previous conversation, suggesting a lack of clarity or resolution rather than a specific issue with authorization or transaction details. The 'Not Classified' code fits as the situation does not clearly align with any of the other specific reason codes provided."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "NC",
  "confidence": 0.85,
  "reasoning": "The description indicates a need to revisit a previous conversation, suggesting a lack of clarity or resolution rather than a specific issue with authorization or transaction details. The 'Not Classified' code fits as the situation does not clearly align with any of the other specific reason codes provided."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(93)">
                <td>gen_discover_AT_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">UA02</span> <small>(exp: AT)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-93" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my card charged without my OK? FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AT</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my card charged without my OK? FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states that their card was charged without their permission, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states that their card was charged without their permission, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my card charged without my OK? FIX THIS NOW! (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card was charged without the cardholder's authorization, which aligns with the definition of a fraudulent transaction where the card was not present. The phrase 'charged without my OK' strongly suggests that the cardholder did not authorize the transaction, making UA02 the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card was charged without the cardholder's authorization, which aligns with the definition of a fraudulent transaction where the card was not present. The phrase 'charged without my OK' strongly suggests that the cardholder did not authorize the transaction, making UA02 the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(94)">
                <td>gen_discover_AT_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: AT)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-94" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AT</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand what happened here? Thank you so much for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they noticed a charge they do not recall authorizing, which aligns perfectly with the 'Does Not Recognize' reason code. This indicates a clear case of unrecognized transaction, fitting the description without ambiguity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they noticed a charge they do not recall authorizing, which aligns perfectly with the 'Does Not Recognize' reason code. This indicates a clear case of unrecognized transaction, fitting the description without ambiguity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(95)">
                <td>gen_discover_AT_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: AT)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-95" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it and clarify what might have gone wrong? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AT</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it and clarify what might have gone wrong? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they have not explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it and clarify what might have gone wrong? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. The request for clarification suggests a lack of awareness or understanding of the charge, confirming that this is an unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. The request for clarification suggests a lack of awareness or understanding of the charge, confirming that this is an unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(96)">
                <td>gen_discover_AW_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AW</span> <small>(exp: AW)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-96" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL WRONG? FIX IT NOW! I DIDN'T SPEND THAT MUCH! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AW</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: AW</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX IT NOW! I DIDN'T SPEND THAT MUCH! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the accuracy of their bill and claims they did not spend that much, which indicates a potential issue with the transaction amount rather than a clear case of fraud or any other specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the accuracy of their bill and claims they did not spend that much, which indicates a potential issue with the transaction amount rather than a clear case of fraud or any other specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX IT NOW! I DIDN'T SPEND THAT MUCH! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AW",
    "confidence": 0.95,
    "reasoning": "The dispute indicates that the cardholder believes the billed amount is incorrect and that they did not spend that much, which aligns with the 'Altered Amount' reason code. This suggests that the amount charged does not match the expected or authorized amount."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AW",
  "confidence": 0.95,
  "reasoning": "The dispute indicates that the cardholder believes the billed amount is incorrect and that they did not spend that much, which aligns with the 'Altered Amount' reason code. This suggests that the amount charged does not match the expected or authorized amount."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(97)">
                <td>gen_discover_AW_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">AW</span> <small>(exp: AW)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-97" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hi there, I hope you're having a good day. I was just reviewing my recent credit card statement over my morning coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local bookstore is higher than what I remember agreeing to. I distinctly recall the cashier telling me the total was $25, but my statement shows $35. Could you please look into this for me? Thank you so much for your help! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AW</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: AW</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "AW",
  "explanation": "Amount charged differs from what was authorized",
  "matched_keywords": [
    "higher than"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was just reviewing my recent credit card statement over my morning coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local bookstore is higher than what I remember agreeing to. I distinctly recall the cashier telling me the total was $25, but my statement shows $35. Could you please look into this for me? Thank you so much for your help! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is disputing the amount charged, stating it is higher than what they agreed to at the time of purchase. This indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is disputing the amount charged, stating it is higher than what they agreed to at the time of purchase. This indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was just reviewing my recent credit card statement over my morning coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local bookstore is higher than what I remember agreeing to. I distinctly recall the cashier telling me the total was $25, but my statement shows $35. Could you please look into this for me? Thank you so much for your help! (Network: Discover)

[System hint: Based on keywords '['higher than']', consider code AW - Amount charged differs from what was authorized]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AW",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the amount charged ($35) is higher than what the cardholder remembers agreeing to ($25). This directly aligns with the reason code AW - Altered Amount, which applies when the amount charged differs from what was authorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AW",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the amount charged ($35) is higher than what the cardholder remembers agreeing to ($25). This directly aligns with the reason code AW - Altered Amount, which applies when the amount charged differs from what was authorized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(98)">
                <td>gen_discover_AW_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: AW)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-98" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was going through my recent transactions and something doesn't quite add up. The numbers seem a bit off from what I recall. Could you help clarify this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: AW</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was going through my recent transactions and something doesn't quite add up. The numbers seem a bit off from what I recall. Could you help clarify this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a transaction they don't recall, but they haven't explicitly claimed fraud or unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a transaction they don't recall, but they haven't explicitly claimed fraud or unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was going through my recent transactions and something doesn't quite add up. The numbers seem a bit off from what I recall. Could you help clarify this for me? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user does not recognize the transaction, which aligns perfectly with the reason code 'AA: Does Not Recognize'. The phrase 'something doesn't quite add up' suggests confusion about the transaction, confirming that this is an unrecognized charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user does not recognize the transaction, which aligns perfectly with the reason code 'AA: Does Not Recognize'. The phrase 'something doesn't quite add up' suggests confusion about the transaction, confirming that this is an unrecognized charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(99)">
                <td>gen_discover_CD_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DP</span> <small>(exp: CD)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-99" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY ACCOUNT CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: CD</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: DP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DP",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY ACCOUNT CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is questioning why they were charged twice, indicating they believe the same transaction was processed multiple times."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is questioning why they were charged twice, indicating they believe the same transaction was processed multiple times."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY ACCOUNT CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)

[System hint: Based on keywords '['charged twice']', consider code DP - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DP",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with the reason code DP - Duplicate Processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DP",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with the reason code DP - Duplicate Processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(100)">
                <td>gen_discover_CD_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: CD)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-100" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There seems to be a discrepancy with a charge that doesn't match what I remember spending. I believe it might have been posted incorrectly. Could you please look into this for me? I appreciate your help in resolving this matter.

Thank you and have a great day! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: CD</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There seems to be a discrepancy with a charge that doesn't match what I remember spending. I believe it might have been posted incorrectly. Could you please look into this for me? I appreciate your help in resolving this matter.

Thank you and have a great day! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a discrepancy with a charge that doesn't match their memory of spending, indicating they don't recognize the transaction, but they haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a discrepancy with a charge that doesn't match their memory of spending, indicating they don't recognize the transaction, but they haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There seems to be a discrepancy with a charge that doesn't match what I remember spending. I believe it might have been posted incorrectly. Could you please look into this for me? I appreciate your help in resolving this matter.

Thank you and have a great day! (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses confusion over a charge that they do not recognize, indicating that it may have been posted incorrectly. This aligns perfectly with the 'Does Not Recognize' reason code, as the user is disputing a charge they do not recall making."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses confusion over a charge that they do not recognize, indicating that it may have been posted incorrectly. This aligns perfectly with the 'Does Not Recognize' reason code, as the user is disputing a charge they do not recall making."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(101)">
                <td>gen_discover_CD_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: CD)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-101" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. Could you help me understand what's going on? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: CD</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. Could you help me understand what's going on? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like a puzzle piece that doesn't fit. Could you help me understand what's going on? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates confusion about a transaction that the cardholder does not recognize, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'doesn't quite add up' suggests a lack of clarity regarding the transaction, confirming that this is an unrecognized charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates confusion about a transaction that the cardholder does not recognize, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'doesn't quite add up' suggests a lack of clarity regarding the transaction, confirming that this is an unrecognized charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(102)">
                <td>gen_discover_CR_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">RN2</span> <small>(exp: CR)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-102" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY MONEY STILL NOT BACK? I CANCELLED! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: CR</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: RN2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY MONEY STILL NOT BACK? I CANCELLED! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder indicates they canceled a transaction and are inquiring about the status of their refund, suggesting they expect a credit that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder indicates they canceled a transaction and are inquiring about the status of their refund, suggesting they expect a credit that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY MONEY STILL NOT BACK? I CANCELLED! FIX THIS NOW! (Network: Discover)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **CR**: Cancelled Reservation

- **RN2**: Credit Not Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RN2",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the user is inquiring about a refund for a cancelled transaction, specifically stating 'WHY IS MY MONEY STILL NOT BACK?' This aligns directly with the reason code RN2, which pertains to a credit not received after a cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RN2",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the user is inquiring about a refund for a cancelled transaction, specifically stating 'WHY IS MY MONEY STILL NOT BACK?' This aligns directly with the reason code RN2, which pertains to a credit not received after a cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(103)">
                <td>gen_discover_CR_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">RN2</span> <small>(exp: CR)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-103" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently had to cancel a hotel reservation because my plans changed last minute. I was assured by the hotel that the cancellation was processed and that I wouldn't be charged. However, I noticed that the charge is still on my credit card statement. I understand these things can take time, but it's been over a week now. Could you please look into this for me? Thank you so much for your help! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: CR</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: RN2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently had to cancel a hotel reservation because my plans changed last minute. I was assured by the hotel that the cancellation was processed and that I wouldn't be charged. However, I noticed that the charge is still on my credit card statement. I understand these things can take time, but it's been over a week now. Could you please look into this for me? Thank you so much for your help! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder canceled a hotel reservation and was assured that the cancellation was processed without charge, but they were still charged on their credit card. This indicates that they expected a credit to be issued but did not receive it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder canceled a hotel reservation and was assured that the cancellation was processed without charge, but they were still charged on their credit card. This indicates that they expected a credit to be issued but did not receive it."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently had to cancel a hotel reservation because my plans changed last minute. I was assured by the hotel that the cancellation was processed and that I wouldn't be charged. However, I noticed that the charge is still on my credit card statement. I understand these things can take time, but it's been over a week now. Could you please look into this for me? Thank you so much for your help! (Network: Discover)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **CR**: Cancelled Reservation

- **RN2**: Credit Not Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RN2",
    "confidence": 0.95,
    "reasoning": "The cardholder canceled their hotel reservation and was assured that the cancellation was processed, yet they are still seeing a charge on their statement. This situation directly aligns with the 'Credit Not Received' reason code, as the cardholder expected a credit to be processed following the cancellation, which has not occurred."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RN2",
  "confidence": 0.95,
  "reasoning": "The cardholder canceled their hotel reservation and was assured that the cancellation was processed, yet they are still seeing a charge on their statement. This situation directly aligns with the 'Credit Not Received' reason code, as the cardholder expected a credit to be processed following the cancellation, which has not occurred."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(104)">
                <td>gen_discover_CR_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: CR)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-104" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought everything was sorted out with the hotel, but my account still shows something unexpected. Can you check what's going on? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: CR</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought everything was sorted out with the hotel, but my account still shows something unexpected. Can you check what's going on? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a charge related to the hotel and is seeking clarification, which indicates they do not recognize the transaction but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a charge related to the hotel and is seeking clarification, which indicates they do not recognize the transaction but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought everything was sorted out with the hotel, but my account still shows something unexpected. Can you check what's going on? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses confusion about a charge related to a hotel, indicating they do not recognize the transaction on their account. This aligns perfectly with the 'Does Not Recognize' reason code, as the description suggests a lack of awareness or acknowledgment of the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses confusion about a charge related to a hotel, indicating they do not recognize the transaction on their account. This aligns perfectly with the 'Does Not Recognize' reason code, as the description suggests a lack of awareness or acknowledgment of the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(105)">
                <td>gen_discover_DA_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DA</span> <small>(exp: DA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-105" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: DA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DA",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being declined, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being declined, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Discover)

[System hint: Based on keywords '['declined']', consider code DA - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description explicitly mentions that the card was 'declined', which directly corresponds to the reason code DA - Declined Authorization. This indicates an authorization issue at the point of sale, aligning perfectly with the keywords provided."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description explicitly mentions that the card was 'declined', which directly corresponds to the reason code DA - Declined Authorization. This indicates an authorization issue at the point of sale, aligning perfectly with the keywords provided."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(106)">
                <td>gen_discover_DA_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DA</span> <small>(exp: DA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-106" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was having a rather pleasant day, enjoying a nice cup of coffee at my favorite café, when I decided to make a purchase online. To my surprise, my card was declined, which was quite embarrassing. I double-checked my account, and everything seemed in order. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: DA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DA",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was having a rather pleasant day, enjoying a nice cup of coffee at my favorite café, when I decided to make a purchase online. To my surprise, my card was declined, which was quite embarrassing. I double-checked my account, and everything seemed in order. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was having a rather pleasant day, enjoying a nice cup of coffee at my favorite café, when I decided to make a purchase online. To my surprise, my card was declined, which was quite embarrassing. I double-checked my account, and everything seemed in order. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Discover)

[System hint: Based on keywords '['declined']', consider code DA - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly indicates that the card was declined during an online purchase, which directly corresponds to the reason code DA - Declined Authorization. The keywords 'declined' and 'authorization issue' align perfectly with this code, confirming that the transaction was not completed due to authorization failure."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly indicates that the card was declined during an online purchase, which directly corresponds to the reason code DA - Declined Authorization. The keywords 'declined' and 'authorization issue' align perfectly with this code, confirming that the transaction was not completed due to authorization failure."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(107)">
                <td>gen_discover_DA_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DA</span> <small>(exp: DA)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-107" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was trying to complete a transaction, but something unexpected happened. It seems like there was a hiccup, and I couldn't proceed. Could you look into this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: DA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was trying to complete a transaction, but something unexpected happened. It seems like there was a hiccup, and I couldn't proceed. Could you look into this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates an issue with completing a transaction due to an unexpected hiccup, which suggests a processing error or authorization issue rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates an issue with completing a transaction due to an unexpected hiccup, which suggests a processing error or authorization issue rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was trying to complete a transaction, but something unexpected happened. It seems like there was a hiccup, and I couldn't proceed. Could you look into this for me? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.85,
    "reasoning": "The description indicates that the transaction could not proceed due to an unexpected issue, which aligns with a declined authorization. The phrase 'something unexpected happened' suggests that the transaction was not completed, likely due to a lack of authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.85,
  "reasoning": "The description indicates that the transaction could not proceed due to an unexpected issue, which aligns with a declined authorization. The phrase 'something unexpected happened' suggests that the transaction was not completed, likely due to a lack of authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(108)">
                <td>gen_discover_EX_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: EX)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-108" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my card DECLINED? FIX THIS NOW! I NEED IT! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: EX</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DA",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my card DECLINED? FIX THIS NOW! I NEED IT! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is inquiring about a declined transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is inquiring about a declined transaction, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my card DECLINED? FIX THIS NOW! I NEED IT! (Network: Discover)

[System hint: Based on keywords '['declined']', consider code DA - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description explicitly mentions that the card was 'DECLINED', which directly corresponds to the reason code DA - Declined Authorization. This indicates an authorization issue at the point of sale, aligning perfectly with the keywords provided."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description explicitly mentions that the card was 'DECLINED', which directly corresponds to the reason code DA - Declined Authorization. This indicates an authorization issue at the point of sale, aligning perfectly with the keywords provided."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(109)">
                <td>gen_discover_EX_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: EX)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-109" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was having a lovely day, enjoying my morning coffee, when I decided to make a purchase online. To my surprise, my card was declined. I checked my account, and everything seemed fine. I don't understand why this happened, and it's quite inconvenient. Could you please look into this for me? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: EX</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DA",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was having a lovely day, enjoying my morning coffee, when I decided to make a purchase online. To my surprise, my card was declined. I checked my account, and everything seemed fine. I don't understand why this happened, and it's quite inconvenient. Could you please look into this for me? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was having a lovely day, enjoying my morning coffee, when I decided to make a purchase online. To my surprise, my card was declined. I checked my account, and everything seemed fine. I don't understand why this happened, and it's quite inconvenient. Could you please look into this for me? Thank you so much for your assistance. (Network: Discover)

[System hint: Based on keywords '['declined']', consider code DA - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly states that the card was declined during an online purchase, which directly corresponds to the reason code DA - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly states that the card was declined during an online purchase, which directly corresponds to the reason code DA - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(110)">
                <td>gen_discover_EX_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: EX)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-110" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I tried using my card today, but it seems like it's not cooperating. I thought everything was in order, but it looks like something's off. Could you help me figure out what's going on? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: EX</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I tried using my card today, but it seems like it's not cooperating. I thought everything was in order, but it looks like something's off. Could you help me figure out what's going on? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is experiencing issues with their card not working, which suggests an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is experiencing issues with their card not working, which suggests an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I tried using my card today, but it seems like it's not cooperating. I thought everything was in order, but it looks like something's off. Could you help me figure out what's going on? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the card was not cooperating and suggests that the transaction was declined. The specific mention of trying to use the card but encountering issues aligns directly with the 'Declined Authorization' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the card was not cooperating and suggests that the transaction was declined. The specific mention of trying to use the card but encountering issues aligns directly with the 'Declined Authorization' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(111)">
                <td>gen_discover_DP_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DP</span> <small>(exp: DP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-111" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: DP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: DP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DP",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)

[System hint: Based on keywords '['charged twice']', consider code DP - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DP",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with the reason code DP - Duplicate Processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DP",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with the reason code DP - Duplicate Processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(112)">
                <td>gen_discover_DP_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DP</span> <small>(exp: DP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-112" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. It seems that a transaction from my favorite bookstore, where I bought a couple of novels, appeared twice on my statement. I'm quite puzzled as I only made one purchase. Could you please look into this for me? Thank you so much for your assistance.

Warm regards,
[Your Name] (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: DP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: DP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. It seems that a transaction from my favorite bookstore, where I bought a couple of novels, appeared twice on my statement. I'm quite puzzled as I only made one purchase. Could you please look into this for me? Thank you so much for your assistance.

Warm regards,
[Your Name] (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder noticed that a transaction from their favorite bookstore appeared twice on their statement, indicating they were charged multiple times for the same purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder noticed that a transaction from their favorite bookstore appeared twice on their statement, indicating they were charged multiple times for the same purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello Discover Team,

I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. It seems that a transaction from my favorite bookstore, where I bought a couple of novels, appeared twice on my statement. I'm quite puzzled as I only made one purchase. Could you please look into this for me? Thank you so much for your assistance.

Warm regards,
[Your Name] (Network: Discover)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DP",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder noticed a transaction appearing twice on their statement for a single purchase made at a bookstore. This directly aligns with the definition of 'Duplicate Processing', making it the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DP",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder noticed a transaction appearing twice on their statement for a single purchase made at a bookstore. This directly aligns with the definition of 'Duplicate Processing', making it the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(113)">
                <td>gen_discover_DP_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">DP</span> <small>(exp: DP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-113" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something peculiar on my statement. It seems like a familiar amount appeared more than once. Could you help clarify this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: DP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: DP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something peculiar on my statement. It seems like a familiar amount appeared more than once. Could you help clarify this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is inquiring about a familiar amount appearing more than once on their statement, which suggests they were charged multiple times for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is inquiring about a familiar amount appearing more than once on their statement, which suggests they were charged multiple times for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something peculiar on my statement. It seems like a familiar amount appeared more than once. Could you help clarify this for me? (Network: Discover)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DP",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder noticed a familiar amount appearing more than once on their statement, which directly suggests a duplicate processing issue. The specific mention of a duplicate charge aligns perfectly with the 'Duplicate Processing' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DP",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder noticed a familiar amount appearing more than once on their statement, which directly suggests a duplicate processing issue. The specific mention of a duplicate charge aligns perfectly with the 'Duplicate Processing' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(114)">
                <td>gen_discover_IN_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: IN)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-114" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY CARD NOT WORKING?! FIX THIS NOW! I NEED IT ASAP! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IN</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING?! FIX THIS NOW! I NEED IT ASAP! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY CARD NOT WORKING?! FIX THIS NOW! I NEED IT ASAP! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card is not working, which suggests that an authorization was declined. The phrase 'Card NOT WORKING' aligns directly with the 'Declined Authorization' reason code, as it implies that the transaction could not be completed due to a lack of authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card is not working, which suggests that an authorization was declined. The phrase 'Card NOT WORKING' aligns directly with the 'Declined Authorization' reason code, as it implies that the transaction could not be completed due to a lack of authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(115)">
                <td>gen_discover_IN_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: IN)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-115" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hi there, I hope you're having a good day. I was trying to buy some groceries yesterday, and to my surprise, my card was declined. I double-checked the number, and it seemed correct. I even tried it again today at a different store, but the same thing happened. I'm not sure what's going on, but it's quite inconvenient. Could you please help me figure this out? Thank you so much! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IN</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "DA",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was trying to buy some groceries yesterday, and to my surprise, my card was declined. I double-checked the number, and it seemed correct. I even tried it again today at a different store, but the same thing happened. I'm not sure what's going on, but it's quite inconvenient. Could you please help me figure this out? Thank you so much! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is experiencing issues with their card being declined during transactions, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is experiencing issues with their card being declined during transactions, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hi there, I hope you're having a good day. I was trying to buy some groceries yesterday, and to my surprise, my card was declined. I double-checked the number, and it seemed correct. I even tried it again today at a different store, but the same thing happened. I'm not sure what's going on, but it's quite inconvenient. Could you please help me figure this out? Thank you so much! (Network: Discover)

[System hint: Based on keywords '['declined']', consider code DA - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly indicates that the card was declined during attempts to make purchases, which directly aligns with the reason code DA - Declined Authorization. The user mentions trying to make a purchase and receiving a decline, confirming that this is an authorization issue rather than fraud or any other type of dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly indicates that the card was declined during attempts to make purchases, which directly aligns with the reason code DA - Declined Authorization. The user mentions trying to make a purchase and receiving a decline, confirming that this is an authorization issue rather than fraud or any other type of dispute."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(116)">
                <td>gen_discover_IN_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: IN)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-116" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I had to leave without my items. Can you help clarify this situation? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IN</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I had to leave without my items. Can you help clarify this situation? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder describes an unexpected situation at checkout where they had to leave without their items, indicating a possible processing error or authorization issue, but does not explicitly claim fraud or any specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder describes an unexpected situation at checkout where they had to leave without their items, indicating a possible processing error or authorization issue, but does not explicitly claim fraud or any specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the checkout, and something unexpected happened. The cashier looked puzzled, and I had to leave without my items. Can you help clarify this situation? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.85,
    "reasoning": "The description indicates that the transaction could not be completed due to an unexpected issue at checkout, which suggests that the authorization was declined. The cashier's puzzled reaction implies that there was a problem with processing the payment, aligning with the 'Declined Authorization' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.85,
  "reasoning": "The description indicates that the transaction could not be completed due to an unexpected issue at checkout, which suggests that the authorization was declined. The cashier's puzzled reaction implies that there was a problem with processing the payment, aligning with the 'Declined Authorization' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(117)">
                <td>gen_discover_IC_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">IC</span> <small>(exp: IC)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-117" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">FIX THIS NOW! My card number is unreadable, and I can't use it! UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: IC</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
FIX THIS NOW! My card number is unreadable, and I can't use it! UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being unreadable, which indicates an issue with the card itself rather than a transaction dispute. This falls under authorization issues or processing errors."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being unreadable, which indicates an issue with the card itself rather than a transaction dispute. This falls under authorization issues or processing errors."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
FIX THIS NOW! My card number is unreadable, and I can't use it! UNACCEPTABLE! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "IC",
    "confidence": 0.95,
    "reasoning": "The dispute description explicitly states that the card number is unreadable, which directly corresponds to the reason code 'IC' for Illegible Card Number. This is a clear and exact match with no ambiguity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "IC",
  "confidence": 0.95,
  "reasoning": "The dispute description explicitly states that the card number is unreadable, which directly corresponds to the reason code 'IC' for Illegible Card Number. This is a clear and exact match with no ambiguity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(118)">
                <td>gen_discover_IC_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">IC</span> <small>(exp: IC)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-118" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello Discover, I hope this message finds you well. I had quite a day today, starting with a lovely breakfast at my favorite café. However, when I tried to use my card, the cashier couldn't read the numbers on it. It was quite embarrassing, and I had to use another payment method. I'm not sure what happened, but I would appreciate your help in resolving this issue. Thank you for your assistance! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: IC</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello Discover, I hope this message finds you well. I had quite a day today, starting with a lovely breakfast at my favorite café. However, when I tried to use my card, the cashier couldn't read the numbers on it. It was quite embarrassing, and I had to use another payment method. I'm not sure what happened, but I would appreciate your help in resolving this issue. Thank you for your assistance! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced an issue with their card being unreadable at the point of sale, which is an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced an issue with their card being unreadable at the point of sale, which is an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello Discover, I hope this message finds you well. I had quite a day today, starting with a lovely breakfast at my favorite café. However, when I tried to use my card, the cashier couldn't read the numbers on it. It was quite embarrassing, and I had to use another payment method. I'm not sure what happened, but I would appreciate your help in resolving this issue. Thank you for your assistance! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "IC",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cashier couldn't read the numbers on the card, which directly relates to the card being illegible. This matches the 'Illegible Card Number' reason code perfectly."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "IC",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cashier couldn't read the numbers on the card, which directly relates to the card being illegible. This matches the 'Illegible Card Number' reason code perfectly."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(119)">
                <td>gen_discover_IC_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AT</span> <small>(exp: IC)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-119" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the store today, and something unexpected happened with my card. It seems like the details weren't clear enough for the transaction. Could you look into this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: IC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: AT</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the store today, and something unexpected happened with my card. It seems like the details weren't clear enough for the transaction. Could you look into this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder mentions that the transaction details were unclear and requests an investigation, which suggests an issue with the transaction processing rather than a claim of fraud or any specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder mentions that the transaction details were unclear and requests an investigation, which suggests an issue with the transaction processing rather than a claim of fraud or any specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the store today, and something unexpected happened with my card. It seems like the details weren't clear enough for the transaction. Could you look into this for me? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AT",
    "confidence": 0.85,
    "reasoning": "The description indicates that there was an unexpected issue with the card during the transaction, suggesting a potential problem with authorization compliance. The phrase 'details weren't clear enough for the transaction' implies that there may have been a misunderstanding or issue with how the transaction was authorized, which aligns with the Authorization Noncompliance code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AT",
  "confidence": 0.85,
  "reasoning": "The description indicates that there was an unexpected issue with the card during the transaction, suggesting a potential problem with authorization compliance. The phrase 'details weren't clear enough for the transaction' implies that there may have been a misunderstanding or issue with how the transaction was authorized, which aligns with the Authorization Noncompliance code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(120)">
                <td>gen_discover_LP_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">LP</span> <small>(exp: LP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-120" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged so late? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: LP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: general</div>
                            <div class="">Code: LP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged so late? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about the timing of the charge, which suggests an issue with the processing of the transaction rather than a claim of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about the timing of the charge, which suggests an issue with the processing of the transaction rather than a claim of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged so late? FIX THIS NOW! UNACCEPTABLE! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "LP",
    "confidence": 0.95,
    "reasoning": "The dispute description expresses frustration about being charged late, which directly aligns with the Late Presentment reason code (LP). This code is applicable when a transaction is processed after the expected timeframe, leading to the cardholder's dissatisfaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "LP",
  "confidence": 0.95,
  "reasoning": "The dispute description expresses frustration about being charged late, which directly aligns with the Late Presentment reason code (LP). This code is applicable when a transaction is processed after the expected timeframe, leading to the cardholder's dissatisfaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(121)">
                <td>gen_discover_LP_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: LP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-121" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that seemed to have been processed much later than expected. It was quite a surprise, especially since I had a busy day running errands and didn't have time to check my statements until now. I would appreciate it if you could look into this matter for me. Thank you for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: LP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that seemed to have been processed much later than expected. It was quite a surprise, especially since I had a busy day running errands and didn't have time to check my statements until now. I would appreciate it if you could look into this matter for me. Thank you for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a charge that they did not expect and is seeking clarification about it, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a charge that they did not expect and is seeking clarification about it, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that seemed to have been processed much later than expected. It was quite a surprise, especially since I had a busy day running errands and didn't have time to check my statements until now. I would appreciate it if you could look into this matter for me. Thank you for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses surprise at a charge that was processed later than expected, indicating they do not recognize the transaction. This aligns perfectly with the 'Does Not Recognize' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses surprise at a charge that was processed later than expected, indicating they do not recognize the transaction. This aligns perfectly with the 'Does Not Recognize' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(122)">
                <td>gen_discover_LP_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: LP)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-122" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like things aren't lining up with when I expected them to. Could you help clarify this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: LP</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like things aren't lining up with when I expected them to. Could you help clarify this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like things aren't lining up with when I expected them to. Could you help clarify this for me? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 'AA: Does Not Recognize'. The phrase 'things aren't lining up with when I expected them to' suggests confusion about a charge, confirming that this is an unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 'AA: Does Not Recognize'. The phrase 'things aren't lining up with when I expected them to' suggests confusion about a charge, confirming that this is an unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(123)">
                <td>gen_discover_NA_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">UA02</span> <small>(exp: NA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-123" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged? I NEVER approved this! FIX IT NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged? I NEVER approved this! FIX IT NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never approved the charge, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never approved the charge, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged? I NEVER approved this! FIX IT NOW! (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder did not approve the transaction, which aligns with the definition of a fraudulent charge for a card not present transaction. The phrase 'I NEVER approved this!' clearly indicates a denial of the transaction, making UA02 the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder did not approve the transaction, which aligns with the definition of a fraudulent charge for a card not present transaction. The phrase 'I NEVER approved this!' clearly indicates a denial of the transaction, making UA02 the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(124)">
                <td>gen_discover_NA_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: NA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-124" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of tasks, including picking up groceries and attending a meeting. I might have missed something, but I don't remember agreeing to this transaction. Could you please help me understand what happened? Thank you for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of tasks, including picking up groceries and attending a meeting. I might have missed something, but I don't remember agreeing to this transaction. Could you please help me understand what happened? Thank you for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recall authorizing the transaction and is seeking clarification, but has not explicitly claimed fraud or indicated that someone else used their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recall authorizing the transaction and is seeking clarification, but has not explicitly claimed fraud or indicated that someone else used their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of tasks, including picking up groceries and attending a meeting. I might have missed something, but I don't remember agreeing to this transaction. Could you please help me understand what happened? Thank you for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recall authorizing the transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of recognition of the charge, making this the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recall authorizing the transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of recognition of the charge, making this the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(125)">
                <td>gen_discover_NA_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: NA)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-125" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NA</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a transaction on their statement but has not explicitly claimed fraud or unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a transaction on their statement but has not explicitly claimed fraud or unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up or misunderstanding with a recent transaction. Could you look into it for me? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. There are no indications of fraud or other issues, making this the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. There are no indications of fraud or other issues, making this the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(126)">
                <td>gen_discover_NF_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">NA</span> <small>(exp: NF)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-126" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY MONEY?! ATM TOOK IT, NO CASH! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: NF</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: NA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY MONEY?! ATM TOOK IT, NO CASH! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about an ATM transaction where no cash was dispensed, indicating a processing error or authorization issue rather than a claim of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about an ATM transaction where no cash was dispensed, indicating a processing error or authorization issue rather than a claim of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY MONEY?! ATM TOOK IT, NO CASH! FIX THIS NOW! (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "NA",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the ATM took the money but did not dispense cash, which suggests that there was no authorization for the transaction to complete successfully. The 'No Authorization' code (NA) fits best as it directly relates to the situation where the cardholder did not receive the cash they expected from the ATM."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "NA",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the ATM took the money but did not dispense cash, which suggests that there was no authorization for the transaction to complete successfully. The 'No Authorization' code (NA) fits best as it directly relates to the situation where the cardholder did not receive the cash they expected from the ATM."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(127)">
                <td>gen_discover_NF_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">CD</span> <small>(exp: NF)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-127" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite an eventful day yesterday. After a lovely brunch with my friend, I decided to withdraw some cash from the ATM near the cafe. However, to my surprise, the machine didn't dispense any money, even though my account was debited. I was quite puzzled and a bit worried. Could you please look into this matter for me? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: NF</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: CD</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite an eventful day yesterday. After a lovely brunch with my friend, I decided to withdraw some cash from the ATM near the cafe. However, to my surprise, the machine didn't dispense any money, even though my account was debited. I was quite puzzled and a bit worried. Could you please look into this matter for me? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced an issue where the ATM debited their account but did not dispense cash, indicating a processing error rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced an issue where the ATM debited their account but did not dispense cash, indicating a processing error rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite an eventful day yesterday. After a lovely brunch with my friend, I decided to withdraw some cash from the ATM near the cafe. However, to my surprise, the machine didn't dispense any money, even though my account was debited. I was quite puzzled and a bit worried. Could you please look into this matter for me? Thank you so much for your assistance. (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "CD",
    "confidence": 0.95,
    "reasoning": "The dispute involves a situation where the ATM debited the account but did not dispense cash, indicating that the credit/debit was posted incorrectly. This aligns perfectly with the reason code 'CD' for Credit/Debit Posted Incorrectly."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "CD",
  "confidence": 0.95,
  "reasoning": "The dispute involves a situation where the ATM debited the account but did not dispense cash, indicating that the credit/debit was posted incorrectly. This aligns perfectly with the reason code 'CD' for Credit/Debit Posted Incorrectly."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(128)">
                <td>gen_discover_NF_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DA</span> <small>(exp: NF)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-128" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the machine, and something unexpected happened. It seemed like everything was going smoothly, but then there was a hiccup. I left without what I came for, and now I'm left wondering about the next steps. Can you help clarify this situation? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: NF</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: DA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the machine, and something unexpected happened. It seemed like everything was going smoothly, but then there was a hiccup. I left without what I came for, and now I'm left wondering about the next steps. Can you help clarify this situation? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates an unexpected issue at a machine, leading to confusion about the transaction, but does not explicitly claim fraud or any specific problem that fits the other categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates an unexpected issue at a machine, leading to confusion about the transaction, but does not explicitly claim fraud or any specific problem that fits the other categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the machine, and something unexpected happened. It seemed like everything was going smoothly, but then there was a hiccup. I left without what I came for, and now I'm left wondering about the next steps. Can you help clarify this situation? (Network: Discover)
"""

Target Category: general

### Candidate Reason Codes:


- **AT**: Authorization Noncompliance

- **AW**: Altered Amount

- **CD**: Credit/Debit Posted Incorrectly

- **DA**: Declined Authorization

- **EX**: Expired Card

- **IC**: Illegible Card Number

- **IN**: Invalid Card Number

- **LP**: Late Presentment

- **NA**: No Authorization

- **NC**: Not Classified


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DA",
    "confidence": 0.85,
    "reasoning": "The description indicates that there was an unexpected issue at the machine, which suggests that the transaction may have been declined. The phrase 'I left without what I came for' implies that the cardholder did not receive the expected outcome, which aligns with a declined authorization situation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DA",
  "confidence": 0.85,
  "reasoning": "The description indicates that there was an unexpected issue at the machine, which suggests that the transaction may have been declined. The phrase 'I left without what I came for' implies that the cardholder did not receive the expected outcome, which aligns with a declined authorization situation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(129)">
                <td>gen_discover_PM_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">PM</span> <small>(exp: PM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-129" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I ALREADY PAID! FIX THIS NOW! WHY CHARGE ME AGAIN? UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: PM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: PM</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "PM",
  "explanation": "Transaction was paid through alternate method",
  "matched_keywords": [
    "already paid"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I ALREADY PAID! FIX THIS NOW! WHY CHARGE ME AGAIN? UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is expressing frustration about being charged again after already paying, indicating they believe they were charged multiple times for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is expressing frustration about being charged again after already paying, indicating they believe they were charged multiple times for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I ALREADY PAID! FIX THIS NOW! WHY CHARGE ME AGAIN? UNACCEPTABLE! (Network: Discover)

[System hint: Based on keywords '['already paid']', consider code PM - Transaction was paid through alternate method]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "PM",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder believes they have already paid for the transaction through an alternate method, which aligns perfectly with the reason code PM - Paid by Other Means. The phrase 'I ALREADY PAID' strongly suggests that the cardholder is asserting that the payment was made through a different method, rather than claiming a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "PM",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder believes they have already paid for the transaction through an alternate method, which aligns perfectly with the reason code PM - Paid by Other Means. The phrase 'I ALREADY PAID' strongly suggests that the cardholder is asserting that the payment was made through a different method, rather than claiming a duplicate charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(130)">
                <td>gen_discover_PM_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">PM</span> <small>(exp: PM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-130" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I believe was a mistake. You see, I had a lovely day out with my family last weekend, and I distinctly remember paying for our lunch with cash. It was a quaint little café, and I even chatted with the owner about their delicious pastries. Imagine my surprise when I saw the same amount charged to my card! I'm sure it's just a mix-up, but I would appreciate your help in resolving this. Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: PM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: PM</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I believe was a mistake. You see, I had a lovely day out with my family last weekend, and I distinctly remember paying for our lunch with cash. It was a quaint little café, and I even chatted with the owner about their delicious pastries. Imagine my surprise when I saw the same amount charged to my card! I'm sure it's just a mix-up, but I would appreciate your help in resolving this. Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder believes they were charged on their card for a transaction they paid for in cash, indicating a potential duplicate charge for the same purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder believes they were charged on their card for a transaction they paid for in cash, indicating a potential duplicate charge for the same purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I believe was a mistake. You see, I had a lovely day out with my family last weekend, and I distinctly remember paying for our lunch with cash. It was a quaint little café, and I even chatted with the owner about their delicious pastries. Imagine my surprise when I saw the same amount charged to my card! I'm sure it's just a mix-up, but I would appreciate your help in resolving this. Thank you so much for your assistance. (Network: Discover)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "PM",
    "confidence": 0.95,
    "reasoning": "The cardholder states they paid for their lunch with cash and then noticed a charge on their Discover card for the same amount. This clearly indicates a situation where the cardholder believes they were charged for a transaction they already paid for by other means (cash), making 'Paid by Other Means' the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "PM",
  "confidence": 0.95,
  "reasoning": "The cardholder states they paid for their lunch with cash and then noticed a charge on their Discover card for the same amount. This clearly indicates a situation where the cardholder believes they were charged for a transaction they already paid for by other means (cash), making 'Paid by Other Means' the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(131)">
                <td>gen_discover_PM_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">DP</span> <small>(exp: PM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-131" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you look into it? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: duplicate</div>
                            <div>Code: PM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: duplicate</div>
                            <div class="mismatch">Code: DP</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you look into it? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder mentions noticing something odd on their statement and refers to a repeat of something they handled differently, which suggests they were charged multiple times for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder mentions noticing something odd on their statement and refers to a repeat of something they handled differently, which suggests they were charged multiple times for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you look into it? (Network: Discover)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **DP**: Duplicate Processing

- **PM**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "DP",
    "confidence": 0.95,
    "reasoning": "The description indicates a concern about a repeat transaction, which aligns directly with the Duplicate Processing reason code (DP). The phrase 'repeat of something I handled differently' suggests that the cardholder believes they were charged more than once for the same transaction, making DP the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "DP",
  "confidence": 0.95,
  "reasoning": "The description indicates a concern about a repeat transaction, which aligns directly with the Duplicate Processing reason code (DP). The phrase 'repeat of something I handled differently' suggests that the cardholder believes they were charged more than once for the same transaction, making DP the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(132)">
                <td>gen_discover_RG_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RG</span> <small>(exp: RG)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-132" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: RG</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: RG</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **NF**: Non-Receipt of Cash from ATM

- **RG**: Non-Receipt of Goods or Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RG",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'I PAID AND GOT NOTHING!', indicating that the customer did not receive the goods or services they paid for. This directly aligns with the reason code RG (Non-Receipt of Goods or Services), making it the best fit for this situation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RG",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'I PAID AND GOT NOTHING!', indicating that the customer did not receive the goods or services they paid for. This directly aligns with the reason code RG (Non-Receipt of Goods or Services), making it the best fit for this situation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(133)">
                <td>gen_discover_RG_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RG</span> <small>(exp: RG)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-133" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently ordered a lovely set of kitchenware from a store online. I was so excited because I had planned a dinner party for my friends. However, the package never arrived, and I was left scrambling to borrow dishes from my neighbor. I checked my emails and even my spam folder, but there was no update. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: RG</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: RG</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "RG",
  "explanation": "Goods or services were never received",
  "matched_keywords": [
    "never arrived"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a lovely set of kitchenware from a store online. I was so excited because I had planned a dinner party for my friends. However, the package never arrived, and I was left scrambling to borrow dishes from my neighbor. I checked my emails and even my spam folder, but there was no update. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder paid for kitchenware but never received the package, indicating that the goods were not delivered."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder paid for kitchenware but never received the package, indicating that the goods were not delivered."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently ordered a lovely set of kitchenware from a store online. I was so excited because I had planned a dinner party for my friends. However, the package never arrived, and I was left scrambling to borrow dishes from my neighbor. I checked my emails and even my spam folder, but there was no update. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Discover)

[System hint: Based on keywords '['never arrived']', consider code RG - Goods or services were never received]
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **NF**: Non-Receipt of Cash from ATM

- **RG**: Non-Receipt of Goods or Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RG",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the package never arrived, which directly aligns with the reason code RG - Non-Receipt of Goods or Services. The keywords 'never arrived' indicate that the goods were not received, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RG",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the package never arrived, which directly aligns with the reason code RG - Non-Receipt of Goods or Services. The keywords 'never arrived' indicate that the goods were not received, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(134)">
                <td>gen_discover_RG_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RG</span> <small>(exp: RG)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-134" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was eagerly waiting for something special, but it seems like the excitement was short-lived. I checked everywhere, even asked around, but it seems like it just vanished into thin air. Any insights on this would be appreciated. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_not_received</div>
                            <div>Code: RG</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: RG</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the excitement was short-lived. I checked everywhere, even asked around, but it seems like it just vanished into thin air. Any insights on this would be appreciated. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder expresses disappointment about not receiving something they were eagerly waiting for, indicating that they paid for a product or service that was never delivered."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder expresses disappointment about not receiving something they were eagerly waiting for, indicating that they paid for a product or service that was never delivered."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the excitement was short-lived. I checked everywhere, even asked around, but it seems like it just vanished into thin air. Any insights on this would be appreciated. (Network: Discover)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **NF**: Non-Receipt of Cash from ATM

- **RG**: Non-Receipt of Goods or Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RG",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user was eagerly waiting for something special that never arrived, which aligns perfectly with the reason code for Non-Receipt of Goods or Services (RG). The phrase 'it seems like it just vanished into thin air' strongly suggests that the product was not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RG",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user was eagerly waiting for something special that never arrived, which aligns perfectly with the reason code for Non-Receipt of Goods or Services (RG). The phrase 'it seems like it just vanished into thin air' strongly suggests that the product was not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(135)">
                <td>gen_discover_RM_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RM</span> <small>(exp: RM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-135" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS PRODUCT IS TRASH! I WANT MY MONEY BACK NOW! UNACCEPTABLE! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: RM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: RM</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS PRODUCT IS TRASH! I WANT MY MONEY BACK NOW! UNACCEPTABLE! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder expresses strong dissatisfaction with the product, indicating it is 'trash' and demands a refund, which suggests the product was defective or not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder expresses strong dissatisfaction with the product, indicating it is 'trash' and demands a refund, which suggests the product was defective or not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS PRODUCT IS TRASH! I WANT MY MONEY BACK NOW! UNACCEPTABLE! (Network: Discover)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **RM**: Quality Discrepancy


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RM",
    "confidence": 0.95,
    "reasoning": "The description indicates dissatisfaction with the product quality, stating 'THIS PRODUCT IS TRASH!' which aligns directly with the reason code for Quality Discrepancy (RM). The strong emotional language used clearly indicates that the product did not meet the customer's expectations, justifying the selection of this code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RM",
  "confidence": 0.95,
  "reasoning": "The description indicates dissatisfaction with the product quality, stating 'THIS PRODUCT IS TRASH!' which aligns directly with the reason code for Quality Discrepancy (RM). The strong emotional language used clearly indicates that the product did not meet the customer's expectations, justifying the selection of this code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(136)">
                <td>gen_discover_RM_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RM</span> <small>(exp: RM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-136" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently purchased a product using my Discover card, and to my dismay, it wasn't quite what I expected. I had a busy day at work, and when I finally got home, I was looking forward to using it. However, it didn't meet the quality standards I anticipated. I was really hoping for something better, especially after reading all those positive reviews. Could you please help me resolve this issue? Thank you so much for your assistance! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: RM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: RM</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently purchased a product using my Discover card, and to my dismay, it wasn't quite what I expected. I had a busy day at work, and when I finally got home, I was looking forward to using it. However, it didn't meet the quality standards I anticipated. I was really hoping for something better, especially after reading all those positive reviews. Could you please help me resolve this issue? Thank you so much for your assistance! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received a product that did not meet their quality expectations and was not as described based on their anticipation from positive reviews."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received a product that did not meet their quality expectations and was not as described based on their anticipation from positive reviews."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently purchased a product using my Discover card, and to my dismay, it wasn't quite what I expected. I had a busy day at work, and when I finally got home, I was looking forward to using it. However, it didn't meet the quality standards I anticipated. I was really hoping for something better, especially after reading all those positive reviews. Could you please help me resolve this issue? Thank you so much for your assistance! (Network: Discover)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **RM**: Quality Discrepancy


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RM",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the product did not meet the quality standards expected by the cardholder, which aligns perfectly with the reason code for Quality Discrepancy (RM). The description emphasizes disappointment with the product's quality, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RM",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the product did not meet the quality standards expected by the cardholder, which aligns perfectly with the reason code for Quality Discrepancy (RM). The description emphasizes disappointment with the product's quality, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(137)">
                <td>gen_discover_RM_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: RM)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-137" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought it would be different. It just doesn't seem right, you know? I was expecting something else entirely. Can we talk about this? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: RM</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought it would be different. It just doesn't seem right, you know? I was expecting something else entirely. Can we talk about this? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about the transaction and indicates they were expecting something different, but does not explicitly claim fraud or unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about the transaction and indicates they were expecting something different, but does not explicitly claim fraud or unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought it would be different. It just doesn't seem right, you know? I was expecting something else entirely. Can we talk about this? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder does not recognize the transaction and expresses confusion about the product received, which aligns perfectly with the 'Does Not Recognize' reason code. The statement 'I thought it would be different' suggests a lack of recognition or understanding of the charge, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder does not recognize the transaction and expresses confusion about the product received, which aligns perfectly with the 'Does Not Recognize' reason code. The statement 'I thought it would be different' suggests a lack of recognition or understanding of the charge, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(138)">
                <td>gen_discover_UA01_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">UA02</span> <small>(exp: UA01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-138" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy anything, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy anything, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of a fraudulent charge in a card not present scenario. This is a clear case of the cardholder claiming that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of a fraudulent charge in a card not present scenario. This is a clear case of the cardholder claiming that they did not authorize the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(139)">
                <td>gen_discover_UA01_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-139" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recognize. I was definitely not at the location where this transaction supposedly took place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "UA02",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recognize. I was definitely not at the location where this transaction supposedly took place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day yesterday, running errands and catching up with an old friend over coffee. However, when I checked my credit card statement this morning, I noticed a charge that I don't recognize. I was definitely not at the location where this transaction supposedly took place. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)

[System hint: Based on keywords '["don't recognize"]', consider code UA02 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the charge, which aligns perfectly with the reason code AA - Does Not Recognize. The description indicates a clear denial of the transaction, matching the criteria for this code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the charge, which aligns perfectly with the reason code AA - Does Not Recognize. The description indicates a clear denial of the transaction, matching the criteria for this code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(140)">
                <td>gen_discover_UA01_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA01)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-140" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. I wasn't anywhere near that place yesterday. Can we look into this? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA01</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. I wasn't anywhere near that place yesterday. Can we look into this? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. I wasn't anywhere near that place yesterday. Can we look into this? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the transaction and mentions they were not near the location where the charge occurred. This aligns perfectly with the 'Does Not Recognize' reason code, indicating a clear case of unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the transaction and mentions they were not near the location where the charge occurred. This aligns perfectly with the 'Does Not Recognize' reason code, indicating a clear case of unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(141)">
                <td>gen_discover_RN2_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RN2</span> <small>(exp: RN2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-141" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY REFUND? I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: RN2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: RN2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "RN2",
  "explanation": "Merchant promised credit that was never processed",
  "matched_keywords": [
    "where's my refund"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY REFUND? I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder is inquiring about a refund for a payment they made but did not receive any goods or services in return, indicating that they expect a refund that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder is inquiring about a refund for a payment they made but did not receive any goods or services in return, indicating that they expect a refund that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY REFUND? I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Discover)

[System hint: Based on keywords '["where's my refund"]', consider code RN2 - Merchant promised credit that was never processed]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **CR**: Cancelled Reservation

- **RN2**: Credit Not Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RN2",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'WHERE'S MY REFUND? I PAID AND GOT NOTHING!', indicating that the merchant promised a credit that was never processed. This directly aligns with the RN2 code for 'Credit Not Received'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RN2",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'WHERE'S MY REFUND? I PAID AND GOT NOTHING!', indicating that the merchant promised a credit that was never processed. This directly aligns with the RN2 code for 'Credit Not Received'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(142)">
                <td>gen_discover_RN2_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">RN2</span> <small>(exp: RN2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-142" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Discover card to pay, but later realized that the credit I was supposed to receive for a previous transaction hasn't been processed yet. I checked my statements multiple times, and it's still not there. Could you please look into this for me? Thank you so much for your help! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: RN2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: RN2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Discover card to pay, but later realized that the credit I was supposed to receive for a previous transaction hasn't been processed yet. I checked my statements multiple times, and it's still not there. Could you please look into this for me? Thank you so much for your help! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder mentions that they were supposed to receive a credit for a previous transaction that hasn't been processed yet, indicating an issue with expected refunds."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder mentions that they were supposed to receive a credit for a previous transaction that hasn't been processed yet, indicating an issue with expected refunds."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to treat ourselves to a nice dinner. I used my Discover card to pay, but later realized that the credit I was supposed to receive for a previous transaction hasn't been processed yet. I checked my statements multiple times, and it's still not there. Could you please look into this for me? Thank you so much for your help! (Network: Discover)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **CR**: Cancelled Reservation

- **RN2**: Credit Not Received


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "RN2",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the cardholder has not received the credit they were supposed to get for a previous transaction. This directly aligns with the reason code RN2, which specifically addresses situations where a credit has not been received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "RN2",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the cardholder has not received the credit they were supposed to get for a previous transaction. This directly aligns with the reason code RN2, which specifically addresses situations where a credit has not been received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(143)">
                <td>gen_discover_RN2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: RN2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-143" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd when I was reviewing my recent activities. It seems like there's a missing piece in the puzzle, and I'm not sure why things aren't adding up. Could you help me figure this out? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: RN2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd when I was reviewing my recent activities. It seems like there's a missing piece in the puzzle, and I'm not sure why things aren't adding up. Could you help me figure this out? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction and is seeking clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd when I was reviewing my recent activities. It seems like there's a missing piece in the puzzle, and I'm not sure why things aren't adding up. Could you help me figure this out? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates confusion about recent activities and suggests a lack of recognition of a transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'missing piece in the puzzle' implies that the cardholder does not recognize a charge, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates confusion about recent activities and suggests a lack of recognition of a transaction, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'missing piece in the puzzle' implies that the cardholder does not recognize a charge, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(144)">
                <td>gen_discover_NC_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">UA02</span> <small>(exp: NC)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-144" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "UA02",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Discover)

[System hint: Based on keywords '["didn't make"]', consider code UA02 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with the description of UA02 - Fraud - Card Not Present Transaction. The keywords 'didn't make' indicate a clear denial of the transaction, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with the description of UA02 - Fraud - Card Not Present Transaction. The keywords 'didn't make' indicate a clear denial of the transaction, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(145)">
                <td>gen_discover_NC_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: NC)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-145" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, so I might have missed something. I was at the grocery store, then picked up my kids from school, and later went to a yoga class. But I can't seem to place this particular transaction. Could you please help me understand what this charge is for? Thank you for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, so I might have missed something. I was at the grocery store, then picked up my kids from school, and later went to a yoga class. But I can't seem to place this particular transaction. Could you please help me understand what this charge is for? Thank you for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Discover card that I don't recall authorizing. It was a busy day, and I was juggling a lot of errands, so I might have missed something. I was at the grocery store, then picked up my kids from school, and later went to a yoga class. But I can't seem to place this particular transaction. Could you please help me understand what this charge is for? Thank you for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the charge and is unsure if they authorized it, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of memory regarding the transaction, confirming that it is an unrecognized charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the charge and is unsure if they authorized it, which aligns perfectly with the 'Does Not Recognize' reason code. The description indicates a lack of memory regarding the transaction, confirming that it is an unrecognized charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(146)">
                <td>gen_discover_NC_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: NC)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-146" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my statement and noticed something that doesn't quite add up. It's like finding an extra sock after doing laundry. Could you help me sort this out? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: general</div>
                            <div>Code: NC</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my statement and noticed something that doesn't quite add up. It's like finding an extra sock after doing laundry. Could you help me sort this out? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge they do not recognize, asking for help to sort it out, but has not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge they do not recognize, asking for help to sort it out, but has not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my statement and noticed something that doesn't quite add up. It's like finding an extra sock after doing laundry. Could you help me sort this out? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which directly aligns with the 'Does Not Recognize' reason code. The metaphor of finding an extra sock suggests confusion about an unexpected charge, confirming that this is a case of unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which directly aligns with the 'Does Not Recognize' reason code. The metaphor of finding an extra sock suggests confusion about an unexpected charge, confirming that this is a case of unrecognized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(147)">
                <td>gen_discover_UA02_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">UA02</span> <small>(exp: UA02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-147" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy anything, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy anything, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS RIDICULOUS! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of a fraudulent charge in a card not present scenario. This is a clear case of the cardholder claiming that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of a fraudulent charge in a card not present scenario. This is a clear case of the cardholder claiming that they did not authorize the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(148)">
                <td>gen_discover_UA02_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-148" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, Discover team. I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I haven't made any online purchases recently. I remember the last thing I bought was a book from the local store, and that was a week ago. Could you please help me understand this charge? Thank you for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "UA02",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, Discover team. I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I haven't made any online purchases recently. I remember the last thing I bought was a book from the local store, and that was a week ago. Could you please help me understand this charge? Thank you for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, Discover team. I hope this message finds you well. I was just going through my statements while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I haven't made any online purchases recently. I remember the last thing I bought was a book from the local store, and that was a week ago. Could you please help me understand this charge? Thank you for your assistance. (Network: Discover)

[System hint: Based on keywords '["don't recognize"]', consider code UA02 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the charge, which aligns perfectly with the reason code AA - Does Not Recognize. The description indicates a lack of familiarity with the transaction, confirming that this is the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the charge, which aligns perfectly with the reason code AA - Does Not Recognize. The description indicates a lack of familiarity with the transaction, confirming that this is the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(149)">
                <td>gen_discover_UA02_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA02)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-149" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping online lately, so this is a bit unexpected. Could you look into it for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA02</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping online lately, so this is a bit unexpected. Could you look into it for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a charge on their statement that they do not recognize and is asking for clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a charge on their statement that they do not recognize and is asking for clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a charge that doesn't quite fit with my usual spending. I haven't been shopping online lately, so this is a bit unexpected. Could you look into it for me? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder mentioned noticing an unexpected charge on their statement that does not align with their usual spending habits. This indicates a lack of recognition of the transaction, which directly corresponds to the 'Does Not Recognize' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder mentioned noticing an unexpected charge on their statement that does not align with their usual spending habits. This indicates a lack of recognition of the transaction, which directly corresponds to the 'Does Not Recognize' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(150)">
                <td>gen_discover_UA05_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">UA02</span> <small>(exp: UA05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-150" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS OUTRAGEOUS! I NEVER MADE THIS PURCHASE! FIX THIS NOW! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: UA02</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS OUTRAGEOUS! I NEVER MADE THIS PURCHASE! FIX THIS NOW! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never made the purchase, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never made the purchase, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS OUTRAGEOUS! I NEVER MADE THIS PURCHASE! FIX THIS NOW! (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA02",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they never made the purchase, indicating a clear case of fraud. Since the transaction is likely a card-not-present transaction, UA02 is the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA02",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they never made the purchase, indicating a clear case of fraud. Since the transaction is likely a card-not-present transaction, UA02 is the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(151)">
                <td>gen_discover_UA05_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-151" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a transaction that I don't recall making. It was a bit of a shock, to be honest, because I always keep my card with me. I even remember using it at the grocery store yesterday, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a transaction that I don't recall making. It was a bit of a shock, to be honest, because I always keep my card with me. I even remember using it at the grocery store yesterday, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recall making the transaction and is seeking clarification, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recall making the transaction and is seeking clarification, but has not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a transaction that I don't recall making. It was a bit of a shock, to be honest, because I always keep my card with me. I even remember using it at the grocery store yesterday, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recall making the transaction, indicating a lack of recognition of the charge. This aligns perfectly with the 'Does Not Recognize' reason code, as the description clearly indicates confusion about the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recall making the transaction, indicating a lack of recognition of the charge. This aligns perfectly with the 'Does Not Recognize' reason code, as the description clearly indicates confusion about the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(152)">
                <td>gen_discover_UA05_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA05)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-152" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my statement. It seems like my card had a mind of its own. Can you check this out? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA05</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my statement. It seems like my card had a mind of its own. Can you check this out? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about a charge on their statement but does not explicitly claim that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about a charge on their statement but does not explicitly claim that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my statement. It seems like my card had a mind of its own. Can you check this out? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'something strange on my statement' suggests a lack of recognition of the charge, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the 'Does Not Recognize' reason code. The phrase 'something strange on my statement' suggests a lack of recognition of the charge, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(153)">
                <td>gen_discover_UA06_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">UA06</span> <small>(exp: UA06)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-153" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">MY CARD WAS STOLEN! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA06</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: UA06</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "UA02",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "stolen"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
MY CARD WAS STOLEN! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states that their card was stolen and demands immediate action, indicating that they did not authorize any transactions made with the card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states that their card was stolen and demands immediate action, indicating that they did not authorize any transactions made with the card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
MY CARD WAS STOLEN! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Discover)

[System hint: Based on keywords '['stolen']', consider code UA02 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA06",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that their card was stolen, which directly aligns with the definition of UA06 - Fraud - Chip Card Lost/Stolen. This indicates that the cardholder did not authorize the transaction due to the theft of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA06",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that their card was stolen, which directly aligns with the definition of UA06 - Fraud - Chip Card Lost/Stolen. This indicates that the cardholder did not authorize the transaction due to the theft of their card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(154)">
                <td>gen_discover_UA06_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="">UA06</span> <small>(exp: UA06)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-154" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite a day yesterday, starting with a lovely breakfast at my favorite café. However, things took a turn when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA06</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: UA06</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a day yesterday, starting with a lovely breakfast at my favorite café. However, things took a turn when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder mentions that they noticed transactions they didn't recognize after losing their credit card, indicating that they did not authorize those transactions."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder mentions that they noticed transactions they didn't recognize after losing their credit card, indicating that they did not authorize those transactions."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a day yesterday, starting with a lovely breakfast at my favorite café. However, things took a turn when I realized my credit card was missing. I retraced my steps, but it was nowhere to be found. Later, I noticed some transactions I didn't recognize. I'm quite puzzled and would appreciate your help in resolving this matter. Thank you for your assistance. (Network: Discover)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UA01**: Fraud - Card Present Transaction

- **UA02**: Fraud - Card Not Present Transaction

- **UA05**: Fraud - Chip Card Counterfeit Transaction

- **UA06**: Fraud - Chip Card Lost/Stolen


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UA06",
    "confidence": 0.95,
    "reasoning": "The cardholder reported that their credit card was missing and later noticed transactions they did not recognize. This situation indicates that the card was likely lost or stolen, making UA06 (Fraud - Chip Card Lost/Stolen) the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UA06",
  "confidence": 0.95,
  "reasoning": "The cardholder reported that their credit card was missing and later noticed transactions they did not recognize. This situation indicates that the card was likely lost or stolen, making UA06 (Fraud - Chip Card Lost/Stolen) the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(155)">
                <td>gen_discover_UA06_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">discover</span> <small>(exp: discover)</small></td>
                <td><span class="mismatch">AA</span> <small>(exp: UA06)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-155" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed some unexpected activity on my account after a recent outing. Could you please look into this for me? (Network: Discover)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: discover</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UA06</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: discover</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: AA</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>discover</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed some unexpected activity on my account after a recent outing. Could you please look into this for me? (Network: Discover)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed unexpected activity and is seeking clarification about the charge, but they haven't explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed unexpected activity and is seeking clarification about the charge, but they haven't explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Discover chargeback reason codes.

Your task is to select the specific Discover reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed some unexpected activity on my account after a recent outing. Could you please look into this for me? (Network: Discover)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **AA**: Does Not Recognize


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Discover):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "AA",
    "confidence": 0.95,
    "reasoning": "The description indicates unexpected activity on the account, which aligns with the cardholder not recognizing the transaction. The phrase 'I DIDN'T MAKE this purchase' suggests a clear case of unrecognized activity, making the 'Does Not Recognize' code the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "AA",
  "confidence": 0.95,
  "reasoning": "The description indicates unexpected activity on the account, which aligns with the cardholder not recognizing the transaction. The phrase 'I DIDN'T MAKE this purchase' suggests a clear case of unrecognized activity, making the 'Does Not Recognize' code the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(156)">
                <td>gen_mastercard_4807_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4853</span> <small>(exp: 4807)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-156" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4807</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4853</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates an authorization issue rather than a specific chargeback reason like fraud or unrecognized transactions."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates an authorization issue rather than a specific chargeback reason like fraud or unrecognized transactions."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4853",
    "confidence": 0.95,
    "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates a dispute related to their account or card usage. This aligns with the 'Cardholder Dispute' reason code, as the user is seeking immediate resolution for an issue with their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4853",
  "confidence": 0.95,
  "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates a dispute related to their account or card usage. This aligns with the 'Cardholder Dispute' reason code, as the user is seeking immediate resolution for an issue with their card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(157)">
                <td>gen_mastercard_4807_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4808</span> <small>(exp: 4807)</small></td>
                <td>0.9</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-157" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just about to buy my morning coffee when I realized my card wasn't working. It was quite embarrassing, especially since I had already chatted with the barista about the weather. I checked my account, and everything seemed fine, so I'm not sure why this happened. Could you please help me understand what's going on? Thank you! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4807</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4808</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just about to buy my morning coffee when I realized my card wasn't working. It was quite embarrassing, especially since I had already chatted with the barista about the weather. I checked my account, and everything seemed fine, so I'm not sure why this happened. Could you please help me understand what's going on? Thank you! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a card decline at the point of sale but did not indicate any fraudulent activity or unauthorized transactions. The description suggests an authorization issue rather than a dispute over a specific transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a card decline at the point of sale but did not indicate any fraudulent activity or unauthorized transactions. The description suggests an authorization issue rather than a dispute over a specific transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just about to buy my morning coffee when I realized my card wasn't working. It was quite embarrassing, especially since I had already chatted with the barista about the weather. I checked my account, and everything seemed fine, so I'm not sure why this happened. Could you please help me understand what's going on? Thank you! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4808",
    "confidence": 0.90,
    "reasoning": "The cardholder experienced an issue with their card not working at the point of sale, which suggests an authorization-related problem. Although the account appeared fine, the inability to complete the transaction indicates a potential authorization failure."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4808",
  "confidence": 0.9,
  "reasoning": "The cardholder experienced an issue with their card not working at the point of sale, which suggests an authorization-related problem. Although the account appeared fine, the inability to complete the transaction indicates a potential authorization failure."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(158)">
                <td>gen_mastercard_4807_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4807)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-158" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Could you look into it? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4807</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Could you look into it? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about a charge on their card but does not explicitly claim fraud or unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about a charge on their card but does not explicitly claim fraud or unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Could you look into it? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unexpected happened with my card' suggests a lack of recognition or authorization for the transaction, making this the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unexpected happened with my card' suggests a lack of recognition or authorization for the transaction, making this the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(159)">
                <td>gen_mastercard_4812_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4808</span> <small>(exp: 4812)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-159" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is my card NOT working?! FIX THIS NOW! I NEED ANSWERS! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4812</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4808</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is my card NOT working?! FIX THIS NOW! I NEED ANSWERS! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card not working, which suggests an authorization issue rather than a claim of fraud or any specific transaction dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is my card NOT working?! FIX THIS NOW! I NEED ANSWERS! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4808",
    "confidence": 0.85,
    "reasoning": "The dispute description indicates frustration with the card not working, which suggests an issue with authorization. The selected code 4808 pertains to authorization-related chargebacks, which aligns with the user's concern about their card not functioning properly. However, the description lacks specific details about a declined transaction, leading to a slightly lower confidence level."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4808",
  "confidence": 0.85,
  "reasoning": "The dispute description indicates frustration with the card not working, which suggests an issue with authorization. The selected code 4808 pertains to authorization-related chargebacks, which aligns with the user's concern about their card not functioning properly. However, the description lacks specific details about a declined transaction, leading to a slightly lower confidence level."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(160)">
                <td>gen_mastercard_4812_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4812</span> <small>(exp: 4812)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-160" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I had quite a busy day today, running errands and trying to catch up on some work. However, I encountered a bit of a hiccup when I tried to use my Mastercard. It seems there was an issue with my account number not being recognized. I was quite surprised as I've been using this card for a while now without any problems. Could you please look into this for me? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4812</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 4812</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I had quite a busy day today, running errands and trying to catch up on some work. However, I encountered a bit of a hiccup when I tried to use my Mastercard. It seems there was an issue with my account number not being recognized. I was quite surprised as I've been using this card for a while now without any problems. Could you please look into this for me? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced an issue with their account number not being recognized while trying to use their Mastercard, which indicates an authorization issue rather than fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced an issue with their account number not being recognized while trying to use their Mastercard, which indicates an authorization issue rather than fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I had quite a busy day today, running errands and trying to catch up on some work. However, I encountered a bit of a hiccup when I tried to use my Mastercard. It seems there was an issue with my account number not being recognized. I was quite surprised as I've been using this card for a while now without any problems. Could you please look into this for me? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4812",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the account number was not recognized when attempting to use the Mastercard, which directly aligns with reason code 4812: Account Number Not on File. This is a clear match as the issue described is specifically about the account number not being recognized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4812",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the account number was not recognized when attempting to use the Mastercard, which directly aligns with reason code 4812: Account Number Not on File. This is a clear match as the issue described is specifically about the account number not being recognized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(161)">
                <td>gen_mastercard_4812_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4808</span> <small>(exp: 4812)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-161" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I tried to make a purchase today, but something seemed off. The transaction didn't go through, and I'm not sure why. Could you check if everything is in order on your end? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4812</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4808</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I tried to make a purchase today, but something seemed off. The transaction didn't go through, and I'm not sure why. Could you check if everything is in order on your end? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is unsure why the transaction didn't go through, indicating a potential authorization issue rather than a claim of fraud or any other specific dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is unsure why the transaction didn't go through, indicating a potential authorization issue rather than a claim of fraud or any other specific dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I tried to make a purchase today, but something seemed off. The transaction didn't go through, and I'm not sure why. Could you check if everything is in order on your end? (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4808",
    "confidence": 0.85,
    "reasoning": "The description indicates that the transaction did not go through, which suggests an issue related to authorization. The user is unsure why the transaction failed, aligning with the 'Authorization-Related Chargeback' reason code. However, the ambiguity in the description leaves room for interpretation, hence a slightly lower confidence."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4808",
  "confidence": 0.85,
  "reasoning": "The description indicates that the transaction did not go through, which suggests an issue related to authorization. The user is unsure why the transaction failed, aligning with the 'Authorization-Related Chargeback' reason code. However, the ambiguity in the description leaves room for interpretation, hence a slightly lower confidence."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(162)">
                <td>gen_mastercard_4808_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4834</span> <small>(exp: 4808)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-162" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4808</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4834",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged TWICE?! FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)

[System hint: Based on keywords '['charged twice']', consider code 4834 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the user was charged twice, which directly corresponds to the reason code 4834 for duplicate processing. The keywords 'charged TWICE' indicate that the same transaction was processed multiple times, making this the exact match for the situation described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the user was charged twice, which directly corresponds to the reason code 4834 for duplicate processing. The keywords 'charged TWICE' indicate that the same transaction was processed multiple times, making this the exact match for the situation described."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(163)">
                <td>gen_mastercard_4808_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4834</span> <small>(exp: 4808)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-163" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There was a charge that seemed to have been authorized twice for the same transaction. I'm a bit puzzled about how this happened, as I only made one purchase. Could you please help me understand and resolve this? Thank you so much for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4808</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There was a charge that seemed to have been authorized twice for the same transaction. I'm a bit puzzled about how this happened, as I only made one purchase. Could you please help me understand and resolve this? Thank you so much for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder noticed a charge that seemed to have been authorized twice for the same transaction, indicating they were charged multiple times for a single purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder noticed a charge that seemed to have been authorized twice for the same transaction, indicating they were charged multiple times for a single purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently had a rather busy day, running errands and catching up with an old friend over coffee. It was a lovely afternoon, but when I got home and checked my credit card statement, I noticed something odd. There was a charge that seemed to have been authorized twice for the same transaction. I'm a bit puzzled about how this happened, as I only made one purchase. Could you please help me understand and resolve this? Thank you so much for your assistance. (Network: Mastercard)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly indicates that the cardholder noticed a charge that was authorized twice for the same transaction, which directly aligns with the definition of duplicate processing. The specific mention of a single purchase being charged twice confirms that this is a case of duplicate processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly indicates that the cardholder noticed a charge that was authorized twice for the same transaction, which directly aligns with the definition of duplicate processing. The specific mention of a single purchase being charged twice confirms that this is a case of duplicate processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(164)">
                <td>gen_mastercard_4808_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4808)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-164" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement after a recent shopping trip. It seems like my card was a bit too eager to participate. Could you help clarify this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4808</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement after a recent shopping trip. It seems like my card was a bit too eager to participate. Could you help clarify this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, but they haven't explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, but they haven't explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement after a recent shopping trip. It seems like my card was a bit too eager to participate. Could you help clarify this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 4863 - 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unusual' suggests a lack of recognition, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 4863 - 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unusual' suggests a lack of recognition, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(165)">
                <td>gen_mastercard_4834_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4834</span> <small>(exp: 4834)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-165" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: duplicate</div>
                            <div>Code: 4834</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4834",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Mastercard)

[System hint: Based on keywords '['charged twice']', consider code 4834 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly corresponds to the reason code 4834 for duplicate processing. The description indicates a specific issue of the same transaction being processed multiple times, making this the exact match."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly corresponds to the reason code 4834 for duplicate processing. The description indicates a specific issue of the same transaction being processed multiple times, making this the exact match."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(166)">
                <td>gen_mastercard_4834_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4834</span> <small>(exp: 4834)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-166" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently noticed something odd on my credit card statement. You see, I went to my favorite coffee shop last Tuesday, and I remember the barista was super friendly. I ordered my usual latte, and everything seemed fine. But when I checked my statement later, I saw the same charge twice! I'm a bit puzzled because I only had one coffee. Could you please help me sort this out? Thank you so much! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: duplicate</div>
                            <div>Code: 4834</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4834",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "same charge twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently noticed something odd on my credit card statement. You see, I went to my favorite coffee shop last Tuesday, and I remember the barista was super friendly. I ordered my usual latte, and everything seemed fine. But when I checked my statement later, I saw the same charge twice! I'm a bit puzzled because I only had one coffee. Could you please help me sort this out? Thank you so much! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder explicitly states they see the same charge twice for a single transaction, indicating they were charged multiple times for the same purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder explicitly states they see the same charge twice for a single transaction, indicating they were charged multiple times for the same purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently noticed something odd on my credit card statement. You see, I went to my favorite coffee shop last Tuesday, and I remember the barista was super friendly. I ordered my usual latte, and everything seemed fine. But when I checked my statement later, I saw the same charge twice! I'm a bit puzzled because I only had one coffee. Could you please help me sort this out? Thank you so much! (Network: Mastercard)

[System hint: Based on keywords '['same charge twice']', consider code 4834 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder was charged twice for the same transaction, which directly aligns with the definition of code 4834 - Duplicate Processing. The description explicitly mentions seeing the 'same charge twice' on the statement, confirming that this is a case of duplicate processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder was charged twice for the same transaction, which directly aligns with the definition of code 4834 - Duplicate Processing. The description explicitly mentions seeing the 'same charge twice' on the statement, confirming that this is a case of duplicate processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(167)">
                <td>gen_mastercard_4834_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4834)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-167" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too active for a single visit. Could you take a closer look at this? Thanks. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: duplicate</div>
                            <div>Code: 4834</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too active for a single visit. Could you take a closer look at this? Thanks. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning the activity on their account and does not recognize the transactions, but has not explicitly claimed that they did not authorize them."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning the activity on their account and does not recognize the transactions, but has not explicitly claimed that they did not authorize them."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like my account has been a bit too active for a single visit. Could you take a closer look at this? Thanks. (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize the transactions on their account, suggesting potential fraud. The phrase 'my account has been a bit too active for a single visit' implies that the cardholder is questioning the legitimacy of the transactions, which aligns perfectly with the reason code for 'Cardholder Does Not Recognize - Potential Fraud'."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize the transactions on their account, suggesting potential fraud. The phrase 'my account has been a bit too active for a single visit' implies that the cardholder is questioning the legitimacy of the transactions, which aligns perfectly with the reason code for 'Cardholder Does Not Recognize - Potential Fraud'."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(168)">
                <td>gen_mastercard_4831_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4831</span> <small>(exp: 4831)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-168" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4831</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 4831</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the accuracy of their bill and claims they didn't spend that much, which indicates a potential issue with the transaction amount rather than a clear case of fraud or any other specific category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the accuracy of their bill and claims they didn't spend that much, which indicates a potential issue with the transaction amount rather than a clear case of fraud or any other specific category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4831",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder believes the transaction amount is incorrect ('I DIDN'T SPEND THAT MUCH!'), which directly aligns with the reason code 4831: Transaction Amount Differs. This code is specifically for situations where the amount charged does not match the amount the cardholder expected."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4831",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder believes the transaction amount is incorrect ('I DIDN'T SPEND THAT MUCH!'), which directly aligns with the reason code 4831: Transaction Amount Differs. This code is specifically for situations where the amount charged does not match the amount the cardholder expected."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(169)">
                <td>gen_mastercard_4831_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4831</span> <small>(exp: 4831)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-169" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just reviewing my recent credit card statement over a cup of coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local grocery store doesn't match what I remember paying. I distinctly recall the cashier saying a different total. Could you please help me understand why there's a discrepancy? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4831</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 4831</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just reviewing my recent credit card statement over a cup of coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local grocery store doesn't match what I remember paying. I distinctly recall the cashier saying a different total. Could you please help me understand why there's a discrepancy? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is reporting a discrepancy in the charged amount compared to what they remember paying, which indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is reporting a discrepancy in the charged amount compared to what they remember paying, which indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just reviewing my recent credit card statement over a cup of coffee, and I noticed something odd. It seems the amount charged for my last purchase at the local grocery store doesn't match what I remember paying. I distinctly recall the cashier saying a different total. Could you please help me understand why there's a discrepancy? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4831",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder noticed a discrepancy between the charged amount and what they remember paying. This directly aligns with the reason code 4831, which is specifically for situations where the transaction amount differs from what the cardholder expected."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4831",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder noticed a discrepancy between the charged amount and what they remember paying. This directly aligns with the reason code 4831, which is specifically for situations where the transaction amount differs from what the cardholder expected."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(170)">
                <td>gen_mastercard_4831_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4831</span> <small>(exp: 4831)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-170" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was just going through my statement and something doesn't quite add up. I remember a different number from what I see here. It's like when you think you have enough change for a coffee, but the barista tells you otherwise. Could you take a look and let me know what's going on? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4831</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 4831</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was just going through my statement and something doesn't quite add up. I remember a different number from what I see here. It's like when you think you have enough change for a coffee, but the barista tells you otherwise. Could you take a look and let me know what's going on? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification, but they have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification, but they have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was just going through my statement and something doesn't quite add up. I remember a different number from what I see here. It's like when you think you have enough change for a coffee, but the barista tells you otherwise. Could you take a look and let me know what's going on? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4831",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder is confused about the transaction amount on their statement, suggesting that the amount charged differs from what they expected. This aligns perfectly with reason code 4831, which specifically addresses situations where the transaction amount differs from what the cardholder believes they agreed to."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4831",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder is confused about the transaction amount on their statement, suggesting that the amount charged differs from what they expected. This aligns perfectly with reason code 4831, which specifically addresses situations where the transaction amount differs from what the cardholder believes they agreed to."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(171)">
                <td>gen_mastercard_4835_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4835)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-171" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I DIDN'T BUY THIS! FIX IT NOW OR I'M DONE WITH YOU! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4835</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I DIDN'T BUY THIS! FIX IT NOW OR I'M DONE WITH YOU! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY THIS!', indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY THIS!', indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I DIDN'T BUY THIS! FIX IT NOW OR I'M DONE WITH YOU! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The description 'I DIDN'T BUY THIS!' indicates that the cardholder did not authorize the transaction, which aligns perfectly with reason code 4837: No Cardholder Authorization. This code is specifically for situations where the cardholder denies making the purchase, indicating a clear case of potential fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The description 'I DIDN'T BUY THIS!' indicates that the cardholder did not authorize the transaction, which aligns perfectly with reason code 4837: No Cardholder Authorization. This code is specifically for situations where the cardholder denies making the purchase, indicating a clear case of potential fraud."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(172)">
                <td>gen_mastercard_4835_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4835)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-172" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember the last time I used it was at the grocery store last week. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4835</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember the last time I used it was at the grocery store last week. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's strange because I haven't used my card for any online purchases recently. I remember the last time I used it was at the grocery store last week. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)

[System hint: Based on keywords '["don't recognize"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, as indicated by the phrase 'I don't recognize' the charge. This aligns perfectly with reason code 4837, which is used when the cardholder claims they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, as indicated by the phrase 'I don't recognize' the charge. This aligns perfectly with reason code 4837, which is used when the cardholder claims they did not authorize the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(173)">
                <td>gen_mastercard_4835_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4835)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-173" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It's like a surprise I didn't expect, and I wasn't even shopping online. Can you help clarify this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4835</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It's like a surprise I didn't expect, and I wasn't even shopping online. Can you help clarify this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It's like a surprise I didn't expect, and I wasn't even shopping online. Can you help clarify this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses confusion about a transaction they do not recognize, indicating a potential fraud situation. The description aligns closely with the 'Cardholder Does Not Recognize - Potential Fraud' code, as it suggests the transaction was unexpected and not authorized by the cardholder."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses confusion about a transaction they do not recognize, indicating a potential fraud situation. The description aligns closely with the 'Cardholder Does Not Recognize - Potential Fraud' code, as it suggests the transaction was unexpected and not authorized by the cardholder."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(174)">
                <td>gen_mastercard_4840_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4840)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-174" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4840</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T make?! FIX THIS NOW! (Network: Mastercard)

[System hint: Based on keywords '["didn't make"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with reason code 4837 - No Cardholder Authorization. The phrase 'I DIDN'T make' indicates a clear denial of authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with reason code 4837 - No Cardholder Authorization. The phrase 'I DIDN'T make' indicates a clear denial of authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(175)">
                <td>gen_mastercard_4840_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4840)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-175" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge from a store I've never even heard of, let alone visited. I remember because I spent the entire day at home, catching up on my favorite TV series. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4840</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge from a store I've never even heard of, let alone visited. I remember because I spent the entire day at home, catching up on my favorite TV series. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge from a store they have never visited, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge from a store they have never visited, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge from a store I've never even heard of, let alone visited. I remember because I spent the entire day at home, catching up on my favorite TV series. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they did not make the purchase and does not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they did not make the purchase and does not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects fraud."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(176)">
                <td>gen_mastercard_4840_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4840)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-176" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my bill. It seems like there's a little surprise that I wasn't expecting. Could you help clarify this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4840</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my bill. It seems like there's a little surprise that I wasn't expecting. Could you help clarify this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their bill and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their bill and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my bill. It seems like there's a little surprise that I wasn't expecting. Could you help clarify this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a charge on their bill, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something strange on my bill' suggests a lack of recognition of the transaction, making this the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a charge on their bill, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something strange on my bill' suggests a lack of recognition of the transaction, making this the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(177)">
                <td>gen_mastercard_4837_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4837</span> <small>(exp: 4837)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-177" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T MAKE?! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4837</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T MAKE?! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T MAKE?! FIX THIS NOW! (Network: Mastercard)

[System hint: Based on keywords '["didn't make"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with reason code 4837 - No Cardholder Authorization. The phrase 'I DIDN'T MAKE this purchase' indicates a clear denial of authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with reason code 4837 - No Cardholder Authorization. The phrase 'I DIDN'T MAKE this purchase' indicates a clear denial of authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(178)">
                <td>gen_mastercard_4837_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4837)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-178" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4837</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge from a store they have never visited, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge from a store they have never visited, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I remember last week I was busy with work and didn't have time to shop. Could you please help me understand what's going on? Thank you! (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the transaction from a store they have never visited, indicating a potential fraud situation. This aligns perfectly with the reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the transaction from a store they have never visited, indicating a potential fraud situation. This aligns perfectly with the reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(179)">
                <td>gen_mastercard_4837_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4837</span> <small>(exp: 4837)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-179" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my statement. It seems like someone else might have been involved in a recent transaction. Can you look into this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4837</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "someone else"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my statement. It seems like someone else might have been involved in a recent transaction. Can you look into this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction on their statement and is seeking clarification, but they have not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction on their statement and is seeking clarification, but they have not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my statement. It seems like someone else might have been involved in a recent transaction. Can you look into this for me? (Network: Mastercard)

[System hint: Based on keywords '['someone else']', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, indicating a lack of authorization. The phrase 'someone else might have been involved' strongly suggests that the cardholder believes the transaction was unauthorized, which aligns perfectly with reason code 4837 - No Cardholder Authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, indicating a lack of authorization. The phrase 'someone else might have been involved' strongly suggests that the cardholder believes the transaction was unauthorized, which aligns perfectly with reason code 4837 - No Cardholder Authorization."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(180)">
                <td>gen_mastercard_4841_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4841</span> <small>(exp: 4841)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-180" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY am I STILL being charged?! I CANCELED this! FIX IT NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 4841</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: 4841</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELED this! FIX IT NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder explicitly states they canceled the service but is still being charged, indicating a recurring subscription that was not properly canceled."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder explicitly states they canceled the service but is still being charged, indicating a recurring subscription that was not properly canceled."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELED this! FIX IT NOW! (Network: Mastercard)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **4841**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4841",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the user canceled a subscription but is still being charged, which directly aligns with the reason code 4841 for Cancelled Recurring Transaction. The user's frustration about ongoing charges after cancellation supports this selection."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4841",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the user canceled a subscription but is still being charged, which directly aligns with the reason code 4841 for Cancelled Recurring Transaction. The user's frustration about ongoing charges after cancellation supports this selection."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(181)">
                <td>gen_mastercard_4841_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4841</span> <small>(exp: 4841)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-181" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month I decided to cancel a service I was no longer using. I remember it clearly because it was a sunny afternoon, and I was sipping on my favorite coffee while going through my subscriptions. However, to my surprise, I was charged again this month. I'm a bit puzzled and would appreciate your help in resolving this matter. Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 4841</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: 4841</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month I decided to cancel a service I was no longer using. I remember it clearly because it was a sunny afternoon, and I was sipping on my favorite coffee while going through my subscriptions. However, to my surprise, I was charged again this month. I'm a bit puzzled and would appreciate your help in resolving this matter. Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder explicitly states they canceled a service but were still charged, which fits the criteria for a subscription cancellation dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder explicitly states they canceled a service but were still charged, which fits the criteria for a subscription cancellation dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month I decided to cancel a service I was no longer using. I remember it clearly because it was a sunny afternoon, and I was sipping on my favorite coffee while going through my subscriptions. However, to my surprise, I was charged again this month. I'm a bit puzzled and would appreciate your help in resolving this matter. Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **4841**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4841",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder canceled a subscription service but was charged again after the cancellation. This directly aligns with the reason code 4841, which pertains to cancelled recurring transactions that were still processed despite the cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4841",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder canceled a subscription service but was charged again after the cancellation. This directly aligns with the reason code 4841, which pertains to cancelled recurring transactions that were still processed despite the cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(182)">
                <td>gen_mastercard_4841_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4854</span> <small>(exp: 4841)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-182" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we had an understanding last month, but it seems like things didn't go as planned. Can we revisit our previous conversation? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 4841</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 4854</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we had an understanding last month, but it seems like things didn't go as planned. Can we revisit our previous conversation? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates a misunderstanding or disagreement about a previous conversation regarding a transaction, but does not explicitly claim fraud or any specific issue related to the transaction itself."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates a misunderstanding or disagreement about a previous conversation regarding a transaction, but does not explicitly claim fraud or any specific issue related to the transaction itself."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we had an understanding last month, but it seems like things didn't go as planned. Can we revisit our previous conversation? (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4854",
    "confidence": 0.85,
    "reasoning": "The dispute description suggests a misunderstanding or disagreement regarding a prior conversation, which aligns with a general cardholder dispute that is not specifically classified elsewhere. The phrase 'I thought we had an understanding' indicates a potential issue with the terms of the transaction rather than a specific product or service issue."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4854",
  "confidence": 0.85,
  "reasoning": "The dispute description suggests a misunderstanding or disagreement regarding a prior conversation, which aligns with a general cardholder dispute that is not specifically classified elsewhere. The phrase 'I thought we had an understanding' indicates a potential issue with the terms of the transaction rather than a specific product or service issue."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(183)">
                <td>gen_mastercard_4842_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4842</span> <small>(exp: 4842)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-183" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged so late? FIX THIS NOW! Unacceptable! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4842</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 4842</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged so late? FIX THIS NOW! Unacceptable! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about the timing of the charge, which suggests an issue with the processing of the transaction rather than a specific claim of fraud or any of the other defined categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about the timing of the charge, which suggests an issue with the processing of the transaction rather than a specific claim of fraud or any of the other defined categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged so late? FIX THIS NOW! Unacceptable! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4842",
    "confidence": 0.95,
    "reasoning": "The dispute description expresses frustration about being charged late, which aligns directly with the Late Presentment reason code (4842). This code is specifically for situations where a transaction is processed after the acceptable time frame, leading to the cardholder's dissatisfaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4842",
  "confidence": 0.95,
  "reasoning": "The dispute description expresses frustration about being charged late, which aligns directly with the Late Presentment reason code (4842). This code is specifically for situations where a transaction is processed after the acceptable time frame, leading to the cardholder's dissatisfaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(184)">
                <td>gen_mastercard_4842_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4842)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-184" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently noticed a charge on my credit card statement that seemed a bit off. It was from a purchase I made quite some time ago, and I was surprised to see it appear just now. I remember that day well because it was sunny, and I had a lovely lunch with my friend before making the purchase. Could you please help me understand why this charge is showing up so late? Thank you for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4842</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently noticed a charge on my credit card statement that seemed a bit off. It was from a purchase I made quite some time ago, and I was surprised to see it appear just now. I remember that day well because it was sunny, and I had a lovely lunch with my friend before making the purchase. Could you please help me understand why this charge is showing up so late? Thank you for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification about it, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge they do not recognize and is seeking clarification about it, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently noticed a charge on my credit card statement that seemed a bit off. It was from a purchase I made quite some time ago, and I was surprised to see it appear just now. I remember that day well because it was sunny, and I had a lovely lunch with my friend before making the purchase. Could you please help me understand why this charge is showing up so late? Thank you for your assistance. (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses confusion about a charge that they do not recognize, indicating a potential fraud situation. The description suggests that the charge appeared unexpectedly, which aligns with the 'Cardholder Does Not Recognize - Potential Fraud' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses confusion about a charge that they do not recognize, indicating a potential fraud situation. The description suggests that the charge appeared unexpectedly, which aligns with the 'Cardholder Does Not Recognize - Potential Fraud' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(185)">
                <td>gen_mastercard_4842_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4842)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-185" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my statement and noticed something odd. It seems like a transaction from a while back just appeared. I thought everything was settled, but now I'm not so sure. Could you look into this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4842</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my statement and noticed something odd. It seems like a transaction from a while back just appeared. I thought everything was settled, but now I'm not so sure. Could you look into this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed an unexpected transaction on their statement and is seeking clarification, but they haven't explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed an unexpected transaction on their statement and is seeking clarification, but they haven't explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my statement and noticed something odd. It seems like a transaction from a while back just appeared. I thought everything was settled, but now I'm not so sure. Could you look into this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder expresses confusion about a transaction that they do not recognize, indicating a potential fraud situation. The description aligns closely with the 'Cardholder Does Not Recognize - Potential Fraud' reason code, as the user is unsure about the legitimacy of the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder expresses confusion about a transaction that they do not recognize, indicating a potential fraud situation. The description aligns closely with the 'Cardholder Does Not Recognize - Potential Fraud' reason code, as the user is unsure about the legitimacy of the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(186)">
                <td>gen_mastercard_4846_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4846)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-186" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL IN EUROS?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4846</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL IN EUROS?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL IN EUROS?! FIX THIS NOW! I DIDN'T AUTHORIZE THIS! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they did not authorize the transaction, which aligns perfectly with reason code 4837: No Cardholder Authorization. The mention of the bill being in euros further emphasizes the cardholder's confusion and lack of recognition of the transaction, reinforcing the claim of unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they did not authorize the transaction, which aligns perfectly with reason code 4837: No Cardholder Authorization. The mention of the bill being in euros further emphasizes the cardholder's confusion and lack of recognition of the transaction, reinforcing the claim of unauthorized use."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(187)">
                <td>gen_mastercard_4846_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4846</span> <small>(exp: 4846)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-187" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to appear in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I need to do on my end to correct this. Thank you for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4846</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 4846</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to appear in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I need to do on my end to correct this. Thank you for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is confused about the currency of the charge and is seeking clarification, which indicates a potential processing error or misunderstanding rather than fraud or an issue with the product or service."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is confused about the currency of the charge and is seeking clarification, which indicates a potential processing error or misunderstanding rather than fraud or an issue with the product or service."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to appear in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I need to do on my end to correct this. Thank you for your assistance! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4846",
    "confidence": 0.95,
    "reasoning": "The cardholder expected the transaction to be processed in dollars but was charged in euros instead. This indicates that the correct transaction currency code was not provided, which aligns perfectly with reason code 4846."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4846",
  "confidence": 0.95,
  "reasoning": "The cardholder expected the transaction to be processed in dollars but was charged in euros instead. This indicates that the correct transaction currency code was not provided, which aligns perfectly with reason code 4846."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(188)">
                <td>gen_mastercard_4846_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4846)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-188" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my recent statement. It seems like the numbers don't quite add up the way I expected. Could you help clarify this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4846</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my recent statement. It seems like the numbers don't quite add up the way I expected. Could you help clarify this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and seeking clarification, indicating they do not recognize the transaction, but they have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and seeking clarification, indicating they do not recognize the transaction, but they have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my recent statement. It seems like the numbers don't quite add up the way I expected. Could you help clarify this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder's statement indicates confusion about a transaction that they do not recognize, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The description suggests that the cardholder is questioning the legitimacy of the charge, which is a clear indicator of potential fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder's statement indicates confusion about a transaction that they do not recognize, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The description suggests that the cardholder is questioning the legitimacy of the charge, which is a clear indicator of potential fraud."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(189)">
                <td>gen_mastercard_4849_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4849)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-189" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4849</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(190)">
                <td>gen_mastercard_4849_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4849)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-190" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a merchant I don't recognize at all. I haven't made any purchases from them, and I'm quite puzzled about how this ended up on my account. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4849</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a merchant I don't recognize at all. I haven't made any purchases from them, and I'm quite puzzled about how this ended up on my account. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge from a merchant and is seeking clarification, but has not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge from a merchant and is seeking clarification, but has not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a merchant I don't recognize at all. I haven't made any purchases from them, and I'm quite puzzled about how this ended up on my account. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)

[System hint: Based on keywords '["don't recognize"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, as indicated by the phrase 'I don't recognize' the charge. This aligns perfectly with reason code 4837, which is used when the cardholder denies authorization for the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, as indicated by the phrase 'I don't recognize' the charge. This aligns perfectly with reason code 4837, which is used when the cardholder denies authorization for the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(191)">
                <td>gen_mastercard_4849_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4849)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-191" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you look into this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4849</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you look into this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something unusual on their statement and is seeking clarification, but they haven't explicitly claimed fraud or denied making the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something unusual on their statement and is seeking clarification, but they haven't explicitly claimed fraud or denied making the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you look into this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder's statement indicates they do not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The description suggests a lack of awareness or expectation of the charge, indicating a potential fraudulent transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder's statement indicates they do not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The description suggests a lack of awareness or expectation of the charge, indicating a potential fraudulent transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(192)">
                <td>gen_mastercard_4850_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4854</span> <small>(exp: 4850)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-192" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY am I still being charged?! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4850</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4854</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY am I still being charged?! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about ongoing charges without providing specific details about authorization or fraud, indicating a potential authorization issue."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about ongoing charges without providing specific details about authorization or fraud, indicating a potential authorization issue."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY am I still being charged?! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4854",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates frustration over ongoing charges without clarity on the reason, which aligns with a general cardholder dispute. The specific mention of being charged without understanding why suggests that the transaction is not classified under more specific categories, making 'Cardholder Dispute - Not Elsewhere Classified' the most fitting reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4854",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates frustration over ongoing charges without clarity on the reason, which aligns with a general cardholder dispute. The specific mention of being charged without understanding why suggests that the transaction is not classified under more specific categories, making 'Cardholder Dispute - Not Elsewhere Classified' the most fitting reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(193)">
                <td>gen_mastercard_4850_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4841</span> <small>(exp: 4850)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-193" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently noticed something odd with my credit card statement. You see, I signed up for a service a while back, and it was supposed to be a one-time payment. However, I keep seeing these charges pop up every month. It's quite puzzling because I distinctly remember agreeing to a single payment. I was just enjoying my morning coffee when I saw the latest charge, and it really threw me off. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4850</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: subscription_canceled</div>
                            <div class="mismatch">Code: 4841</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently noticed something odd with my credit card statement. You see, I signed up for a service a while back, and it was supposed to be a one-time payment. However, I keep seeing these charges pop up every month. It's quite puzzling because I distinctly remember agreeing to a single payment. I was just enjoying my morning coffee when I saw the latest charge, and it really threw me off. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder claims they signed up for a service with a one-time payment but is experiencing recurring charges, indicating they canceled a subscription but were still charged."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder claims they signed up for a service with a one-time payment but is experiencing recurring charges, indicating they canceled a subscription but were still charged."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently noticed something odd with my credit card statement. You see, I signed up for a service a while back, and it was supposed to be a one-time payment. However, I keep seeing these charges pop up every month. It's quite puzzling because I distinctly remember agreeing to a single payment. I was just enjoying my morning coffee when I saw the latest charge, and it really threw me off. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **4841**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4841",
    "confidence": 0.95,
    "reasoning": "The user describes a situation where they signed up for a service with the expectation of a one-time payment, but they are experiencing recurring charges. This aligns perfectly with the reason code 4841, which is specifically for cancelled recurring transactions. The user's clear indication of confusion over unexpected monthly charges strongly supports this selection."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4841",
  "confidence": 0.95,
  "reasoning": "The user describes a situation where they signed up for a service with the expectation of a one-time payment, but they are experiencing recurring charges. This aligns perfectly with the reason code 4841, which is specifically for cancelled recurring transactions. The user's clear indication of confusion over unexpected monthly charges strongly supports this selection."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(194)">
                <td>gen_mastercard_4850_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4854</span> <small>(exp: 4850)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-194" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we had an understanding, but it seems like things are still happening. Can we revisit our agreement? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4850</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4854</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we had an understanding, but it seems like things are still happening. Can we revisit our agreement? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder expresses a concern about an agreement but does not explicitly claim fraud or any specific issue related to a transaction. The language used is vague and does not fit into the other defined categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder expresses a concern about an agreement but does not explicitly claim fraud or any specific issue related to a transaction. The language used is vague and does not fit into the other defined categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we had an understanding, but it seems like things are still happening. Can we revisit our agreement? (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4854",
    "confidence": 0.85,
    "reasoning": "The dispute description suggests a disagreement regarding an understanding or agreement, which aligns with a cardholder dispute that is not classified elsewhere. The language indicates a potential issue with the terms of the transaction rather than a specific product or service issue, making 'Cardholder Dispute - Not Elsewhere Classified' the most fitting choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4854",
  "confidence": 0.85,
  "reasoning": "The dispute description suggests a disagreement regarding an understanding or agreement, which aligns with a cardholder dispute that is not classified elsewhere. The language indicates a potential issue with the terms of the transaction rather than a specific product or service issue, making 'Cardholder Dispute - Not Elsewhere Classified' the most fitting choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(195)">
                <td>gen_mastercard_4854_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4854)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-195" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged $200?! FIX THIS NOW! I DIDN'T AUTHORIZE IT! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4854</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged $200?! FIX THIS NOW! I DIDN'T AUTHORIZE IT! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the charge, indicating a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the charge, indicating a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged $200?! FIX THIS NOW! I DIDN'T AUTHORIZE IT! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they did not authorize the transaction, which directly aligns with the definition of 'No Cardholder Authorization'. This indicates a clear case of unauthorized use of the card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they did not authorize the transaction, which directly aligns with the definition of 'No Cardholder Authorization'. This indicates a clear case of unauthorized use of the card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(196)">
                <td>gen_mastercard_4854_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4854)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-196" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Mastercard that I don't recognize. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I remember checking my account in the evening and seeing this unexpected charge. I don't recall making any purchases that would match this amount. Could you please help me understand what happened? Thank you for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4854</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Mastercard that I don't recognize. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I remember checking my account in the evening and seeing this unexpected charge. I don't recall making any purchases that would match this amount. Could you please help me understand what happened? Thank you for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Mastercard that I don't recognize. It was a busy day, and I was juggling a lot, from picking up groceries to attending a friend's birthday party. I remember checking my account in the evening and seeing this unexpected charge. I don't recall making any purchases that would match this amount. Could you please help me understand what happened? Thank you for your assistance. (Network: Mastercard)

[System hint: Based on keywords '["don't recognize"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, stating they do not recognize the charge. This aligns perfectly with reason code 4837, which is used when the cardholder denies authorization for the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, stating they do not recognize the charge. This aligns perfectly with reason code 4837, which is used when the cardholder denies authorization for the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(197)">
                <td>gen_mastercard_4854_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4854)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-197" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It doesn't seem to fit with my usual activities. Could you look into it? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4854</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It doesn't seem to fit with my usual activities. Could you look into it? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It doesn't seem to fit with my usual activities. Could you look into it? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. This suggests that the cardholder believes the transaction may be fraudulent, making this the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. This suggests that the cardholder believes the transaction may be fraudulent, making this the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(198)">
                <td>gen_mastercard_4853_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4834</span> <small>(exp: 4853)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-198" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged TWICE for the same thing? FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4853</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4834",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged TWICE for the same thing? FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged TWICE for the same thing? FIX THIS NOW! (Network: Mastercard)

[System hint: Based on keywords '['charged twice']', consider code 4834 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the user was charged twice for the same transaction, which directly aligns with the definition of code 4834 - Duplicate Processing. The keywords 'charged TWICE' indicate a clear case of duplicate processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the user was charged twice for the same transaction, which directly aligns with the definition of code 4834 - Duplicate Processing. The keywords 'charged TWICE' indicate a clear case of duplicate processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(199)">
                <td>gen_mastercard_4853_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4834</span> <small>(exp: 4853)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-199" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last Tuesday, after a long day at work, I decided to treat myself to a nice dinner at my favorite restaurant. Imagine my surprise when I checked my statement and saw two charges for the same meal! I remember the waiter being a bit flustered, but I didn't think much of it at the time. Could you please help me understand why this happened? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4853</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: duplicate</div>
                            <div class="mismatch">Code: 4834</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4834",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "two charges"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last Tuesday, after a long day at work, I decided to treat myself to a nice dinner at my favorite restaurant. Imagine my surprise when I checked my statement and saw two charges for the same meal! I remember the waiter being a bit flustered, but I didn't think much of it at the time. Could you please help me understand why this happened? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder explicitly states they were charged twice for the same meal, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder explicitly states they were charged twice for the same meal, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed something odd on my credit card statement. You see, last Tuesday, after a long day at work, I decided to treat myself to a nice dinner at my favorite restaurant. Imagine my surprise when I checked my statement and saw two charges for the same meal! I remember the waiter being a bit flustered, but I didn't think much of it at the time. Could you please help me understand why this happened? Thank you so much for your assistance! (Network: Mastercard)

[System hint: Based on keywords '['two charges']', consider code 4834 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **4834**: Duplicate Processing


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4834",
    "confidence": 0.95,
    "reasoning": "The dispute clearly describes a situation where the cardholder was charged twice for the same meal, which directly aligns with the definition of duplicate processing. The mention of 'two charges for the same meal' indicates that the transaction was processed multiple times, making reason code 4834 the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4834",
  "confidence": 0.95,
  "reasoning": "The dispute clearly describes a situation where the cardholder was charged twice for the same meal, which directly aligns with the definition of duplicate processing. The mention of 'two charges for the same meal' indicates that the transaction was processed multiple times, making reason code 4834 the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(200)">
                <td>gen_mastercard_4853_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4831</span> <small>(exp: 4853)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-200" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something peculiar. It seems like there's a bit of a mix-up with the amounts. I remember the day clearly because it was quite eventful, and I was sure everything was settled correctly. Could you take a closer look at this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4853</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 4831</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like there's a bit of a mix-up with the amounts. I remember the day clearly because it was quite eventful, and I was sure everything was settled correctly. Could you take a closer look at this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder mentions a mix-up with the amounts and requests a closer look, indicating a potential processing error or authorization issue rather than a clear case of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder mentions a mix-up with the amounts and requests a closer look, indicating a potential processing error or authorization issue rather than a clear case of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like there's a bit of a mix-up with the amounts. I remember the day clearly because it was quite eventful, and I was sure everything was settled correctly. Could you take a closer look at this for me? (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4831",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates a mix-up with the transaction amounts, which aligns perfectly with reason code 4831: Transaction Amount Differs. The cardholder is expressing concern about the accuracy of the charged amount, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4831",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates a mix-up with the transaction amounts, which aligns perfectly with reason code 4831: Transaction Amount Differs. The cardholder is expressing concern about the accuracy of the charged amount, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(201)">
                <td>gen_mastercard_4857_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4857)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-201" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged for a call I NEVER made?! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4857</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged for a call I NEVER made?! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never made the call and is questioning the charge, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never made the call and is questioning the charge, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged for a call I NEVER made?! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they were charged for a call they never made, indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they were charged for a call they never made, indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(202)">
                <td>gen_mastercard_4857_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4857)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-202" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge for a phone call that I don't recall making. It's quite puzzling because I usually keep track of my calls, especially those that might incur charges. Could you please help me understand this? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4857</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge for a phone call that I don't recall making. It's quite puzzling because I usually keep track of my calls, especially those that might incur charges. Could you please help me understand this? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize a charge for a phone call and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize a charge for a phone call and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge for a phone call that I don't recall making. It's quite puzzling because I usually keep track of my calls, especially those that might incur charges. Could you please help me understand this? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the charge for a phone call, indicating a potential fraud situation. The description clearly states that the cardholder did not make the purchase, which aligns perfectly with the 'Cardholder Does Not Recognize - Potential Fraud' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the charge for a phone call, indicating a potential fraud situation. The description clearly states that the cardholder did not make the purchase, which aligns perfectly with the 'Cardholder Does Not Recognize - Potential Fraud' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(203)">
                <td>gen_mastercard_4857_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4857)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-203" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement related to a service I didn't expect. Could you clarify this for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4857</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement related to a service I didn't expect. Could you clarify this for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is inquiring about a charge they find unusual and does not recognize, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is inquiring about a charge they find unusual and does not recognize, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement related to a service I didn't expect. Could you clarify this for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unusual' suggests a lack of recognition, making this the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something unusual' suggests a lack of recognition, making this the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(204)">
                <td>gen_mastercard_4855_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4855</span> <small>(exp: 4855)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-204" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 4855</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: 4855</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods or services."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating a failure to deliver the goods or services."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **4855**: Goods or Services Not Provided


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4855",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer has not received the goods or services they paid for. This directly aligns with the reason code 4855, which is specifically for goods or services not provided."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4855",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer has not received the goods or services they paid for. This directly aligns with the reason code 4855, which is specifically for goods or services not provided."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(205)">
                <td>gen_mastercard_4855_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4855</span> <small>(exp: 4855)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-205" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently ordered a lovely set of garden tools from a website that seemed quite reputable. I was really looking forward to sprucing up my backyard this weekend. However, it's been over two weeks, and I haven't seen any sign of the package. I checked my emails, and there's no update on the delivery. Could you please help me figure out what's going on? Thank you so much for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 4855</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: 4855</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently ordered a lovely set of garden tools from a website that seemed quite reputable. I was really looking forward to sprucing up my backyard this weekend. However, it's been over two weeks, and I haven't seen any sign of the package. I checked my emails, and there's no update on the delivery. Could you please help me figure out what's going on? Thank you so much for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder paid for a set of garden tools but has not received the package after two weeks and is seeking assistance regarding the delivery status."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder paid for a set of garden tools but has not received the package after two weeks and is seeking assistance regarding the delivery status."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently ordered a lovely set of garden tools from a website that seemed quite reputable. I was really looking forward to sprucing up my backyard this weekend. However, it's been over two weeks, and I haven't seen any sign of the package. I checked my emails, and there's no update on the delivery. Could you please help me figure out what's going on? Thank you so much for your assistance. (Network: Mastercard)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **4855**: Goods or Services Not Provided


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4855",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the customer ordered a set of garden tools but has not received the package after over two weeks, with no updates on delivery. This directly aligns with the reason code 4855, which is for goods or services not provided."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4855",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the customer ordered a set of garden tools but has not received the package after over two weeks, with no updates on delivery. This directly aligns with the reason code 4855, which is for goods or services not provided."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(206)">
                <td>gen_mastercard_4855_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4854</span> <small>(exp: 4855)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-206" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was eagerly waiting for something special, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I wonder if there's a way to resolve this unexpected turn of events. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 4855</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 4854</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I wonder if there's a way to resolve this unexpected turn of events. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description expresses disappointment and a desire for resolution but does not provide explicit indicators of fraud, product not received, or any specific issue that fits the other categories. It seems to reflect a general dissatisfaction rather than a clear dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description expresses disappointment and a desire for resolution but does not provide explicit indicators of fraud, product not received, or any specific issue that fits the other categories. It seems to reflect a general dissatisfaction rather than a clear dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the excitement was short-lived. The anticipation was high, but the outcome was rather disappointing. I wonder if there's a way to resolve this unexpected turn of events. (Network: Mastercard)
"""

Target Category: general

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4854",
    "confidence": 0.85,
    "reasoning": "The description indicates a general dissatisfaction with a purchase, suggesting that the cardholder is disputing the transaction due to unmet expectations. This aligns with the 'Cardholder Dispute - Not Elsewhere Classified' code, as the situation does not fit neatly into other specific categories but reflects a general dispute regarding the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4854",
  "confidence": 0.85,
  "reasoning": "The description indicates a general dissatisfaction with a purchase, suggesting that the cardholder is disputing the transaction due to unmet expectations. This aligns with the 'Cardholder Dispute - Not Elsewhere Classified' code, as the situation does not fit neatly into other specific categories but reflects a general dispute regarding the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(207)">
                <td>gen_mastercard_4859_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4840</span> <small>(exp: 4859)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-207" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged for a hotel I NEVER stayed at?! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4859</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 4840</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged for a hotel I NEVER stayed at?! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never stayed at the hotel and questions why they were charged, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never stayed at the hotel and questions why they were charged, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged for a hotel I NEVER stayed at?! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4840",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they were charged for a hotel they never stayed at, indicating a clear case of fraudulent processing of transactions. This aligns perfectly with reason code 4840, which addresses situations where the transaction is deemed fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4840",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they were charged for a hotel they never stayed at, indicating a clear case of fraudulent processing of transactions. This aligns perfectly with reason code 4840, which addresses situations where the transaction is deemed fraudulent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(208)">
                <td>gen_mastercard_4859_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4841</span> <small>(exp: 4859)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-208" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a lovely day. I recently had a rather peculiar experience. You see, I was planning a weekend getaway to the mountains, but due to unforeseen circumstances, I had to cancel my trip. Imagine my surprise when I noticed a charge from the hotel on my statement! I distinctly remember canceling the reservation well in advance. Could you please help me sort this out? Thank you so much for your assistance! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4859</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: credit_not_processed</div>
                            <div class="mismatch">Code: 4841</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a lovely day. I recently had a rather peculiar experience. You see, I was planning a weekend getaway to the mountains, but due to unforeseen circumstances, I had to cancel my trip. Imagine my surprise when I noticed a charge from the hotel on my statement! I distinctly remember canceling the reservation well in advance. Could you please help me sort this out? Thank you so much for your assistance! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder canceled their hotel reservation but was still charged, indicating that they expected a refund which was not processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder canceled their hotel reservation but was still charged, indicating that they expected a refund which was not processed."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a lovely day. I recently had a rather peculiar experience. You see, I was planning a weekend getaway to the mountains, but due to unforeseen circumstances, I had to cancel my trip. Imagine my surprise when I noticed a charge from the hotel on my statement! I distinctly remember canceling the reservation well in advance. Could you please help me sort this out? Thank you so much for your assistance! (Network: Mastercard)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4841",
    "confidence": 0.95,
    "reasoning": "The cardholder canceled their hotel reservation in advance but was still charged, indicating that the transaction should not have been processed. This aligns perfectly with the reason code for 'Cancelled Recurring Transaction', as the charge was made despite the cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4841",
  "confidence": 0.95,
  "reasoning": "The cardholder canceled their hotel reservation in advance but was still charged, indicating that the transaction should not have been processed. This aligns perfectly with the reason code for 'Cancelled Recurring Transaction', as the charge was made despite the cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(209)">
                <td>gen_mastercard_4859_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4859)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-209" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement after my trip plans changed. Could you check the recent charges for me? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: general</div>
                            <div>Code: 4859</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement after my trip plans changed. Could you check the recent charges for me? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification about recent charges, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification about recent charges, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement after my trip plans changed. Could you check the recent charges for me? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder noticed something odd on their statement after their trip plans changed, suggesting they do not recognize the transaction. This aligns perfectly with the reason code 4863, which is for situations where the cardholder does not recognize a transaction and suspects potential fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder noticed something odd on their statement after their trip plans changed, suggesting they do not recognize the transaction. This aligns perfectly with the reason code 4863, which is for situations where the cardholder does not recognize a transaction and suspects potential fraud."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(210)">
                <td>gen_mastercard_4870_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4870)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-210" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged? I DIDN'T DO THIS! FIX IT NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4870</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged? I DIDN'T DO THIS! FIX IT NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states 'I DIDN'T DO THIS!' indicating they did not authorize the transaction, which falls under the fraudulent category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states 'I DIDN'T DO THIS!' indicating they did not authorize the transaction, which falls under the fraudulent category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged? I DIDN'T DO THIS! FIX IT NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The description clearly indicates that the cardholder did not authorize the transaction, as they state 'I DIDN'T DO THIS!' This aligns perfectly with reason code 4837, which is specifically for cases where there is no cardholder authorization for the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The description clearly indicates that the cardholder did not authorize the transaction, as they state 'I DIDN'T DO THIS!' This aligns perfectly with reason code 4837, which is specifically for cases where there is no cardholder authorization for the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(211)">
                <td>gen_mastercard_4870_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4870)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-211" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I always make sure to use my card responsibly. I remember the last time I used it was at the grocery store, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4870</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "4837",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I always make sure to use my card responsibly. I remember the last time I used it was at the grocery store, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recognize. It's quite puzzling because I always make sure to use my card responsibly. I remember the last time I used it was at the grocery store, and everything seemed fine. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Mastercard)

[System hint: Based on keywords '["don't recognize"]', consider code 4837 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 4837 - No Cardholder Authorization. The description indicates a lack of recognition of the charge, suggesting that the cardholder did not authorize it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 4837 - No Cardholder Authorization. The description indicates a lack of recognition of the charge, suggesting that the cardholder did not authorize it."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(212)">
                <td>gen_mastercard_4870_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4870)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-212" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement after my last visit to the store. It seems like things didn't go as expected. Could you look into it? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4870</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement after my last visit to the store. It seems like things didn't go as expected. Could you look into it? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement after my last visit to the store. It seems like things didn't go as expected. Could you look into it? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 4863 for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something odd on my statement' suggests a lack of recognition of the transaction, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, which aligns perfectly with the reason code 4863 for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'something odd on my statement' suggests a lack of recognition of the transaction, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(213)">
                <td>gen_mastercard_4863_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4863)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-213" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4863</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a lack of authorization for the transaction. This aligns perfectly with reason code 4837, which is used when there is no cardholder authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(214)">
                <td>gen_mastercard_4863_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4863</span> <small>(exp: 4863)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-214" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I usually keep track of my expenses meticulously. I even checked my calendar to see if I had any appointments or events that might explain it, but nothing seems to match. Could you please help me understand this charge? Thank you so much for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4863</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I usually keep track of my expenses meticulously. I even checked my calendar to see if I had any appointments or events that might explain it, but nothing seems to match. Could you please help me understand this charge? Thank you so much for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I usually keep track of my expenses meticulously. I even checked my calendar to see if I had any appointments or events that might explain it, but nothing seems to match. Could you please help me understand this charge? Thank you so much for your assistance. (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(215)">
                <td>gen_mastercard_4863_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="">4863</span> <small>(exp: 4863)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-215" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something that doesn't quite fit with my usual spending habits. It's like finding a puzzle piece that doesn't belong in the picture. Could you help me sort this out? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4863</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite fit with my usual spending habits. It's like finding a puzzle piece that doesn't belong in the picture. Could you help me sort this out? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a transaction that doesn't fit their usual spending habits, but they haven't explicitly claimed fraud or denied making the purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a transaction that doesn't fit their usual spending habits, but they haven't explicitly claimed fraud or denied making the purchase."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite fit with my usual spending habits. It's like finding a puzzle piece that doesn't belong in the picture. Could you help me sort this out? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'doesn't quite fit with my usual spending habits' suggests a lack of recognition, making this the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize the transaction, which aligns perfectly with the code for 'Cardholder Does Not Recognize - Potential Fraud'. The phrase 'doesn't quite fit with my usual spending habits' suggests a lack of recognition, making this the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(216)">
                <td>gen_mastercard_4871_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4837</span> <small>(exp: 4871)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-216" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged? I DIDN'T authorize this! FIX IT NOW! (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4871</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 4837</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged? I DIDN'T authorize this! FIX IT NOW! (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged? I DIDN'T authorize this! FIX IT NOW! (Network: Mastercard)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4849**: Questionable Merchant Activity

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4837",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they did not authorize the charge, which directly aligns with the definition of 'No Cardholder Authorization'. This indicates a clear case of unauthorized use of the card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4837",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they did not authorize the charge, which directly aligns with the definition of 'No Cardholder Authorization'. This indicates a clear case of unauthorized use of the card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(217)">
                <td>gen_mastercard_4871_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4871)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-217" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I always use my card with the chip and PIN, and I'm very careful about it. Could you please help me understand how this happened? Thank you so much for your assistance. (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4871</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I always use my card with the chip and PIN, and I'm very careful about it. Could you please help me understand how this happened? Thank you so much for your assistance. (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed a charge that I don't recall making. It's quite puzzling because I always use my card with the chip and PIN, and I'm very careful about it. Could you please help me understand how this happened? Thank you so much for your assistance. (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states they do not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states they do not recognize the charge, indicating a potential fraud situation. This aligns perfectly with reason code 4863, which is specifically for cases where the cardholder does not recognize a transaction and suspects it may be fraudulent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(218)">
                <td>gen_mastercard_4871_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">mastercard</span> <small>(exp: mastercard)</small></td>
                <td><span class="mismatch">4863</span> <small>(exp: 4871)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-218" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there was a mix-up with how my card was used. Can you check what happened? (Network: Mastercard)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: mastercard</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 4871</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: mastercard</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 4863</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>mastercard</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up with how my card was used. Can you check what happened? (Network: Mastercard)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification about the transaction, indicating they don't recognize it but haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification about the transaction, indicating they don't recognize it but haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Mastercard chargeback reason codes.

Your task is to select the specific Mastercard reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there was a mix-up with how my card was used. Can you check what happened? (Network: Mastercard)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **4807**: Warning Bulletin File

- **4808**: Authorization-Related Chargeback

- **4812**: Account Number Not on File

- **4831**: Transaction Amount Differs

- **4834**: Duplicate Processing

- **4835**: Card Not Present

- **4837**: No Cardholder Authorization

- **4840**: Fraudulent Processing of Transactions

- **4841**: Cancelled Recurring Transaction

- **4842**: Late Presentment

- **4846**: Correct Transaction Currency Code Not Provided

- **4849**: Questionable Merchant Activity

- **4850**: Installment Billing Dispute

- **4853**: Cardholder Dispute

- **4854**: Cardholder Dispute - Not Elsewhere Classified

- **4855**: Goods or Services Not Provided

- **4857**: Card-Activated Telephone Transaction

- **4859**: Addendum, No-show, or ATM Dispute

- **4863**: Cardholder Does Not Recognize - Potential Fraud

- **4870**: Chip Liability Shift

- **4871**: Chip/PIN Liability Shift


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Mastercard):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "4863",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, suggesting a potential fraud situation. The specific mention of an 'odd' charge aligns closely with the reason code for cardholder disputes related to unrecognized transactions, making code 4863 the best fit."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "4863",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder does not recognize a transaction on their statement, suggesting a potential fraud situation. The specific mention of an 'odd' charge aligns closely with the reason code for cardholder disputes related to unrecognized transactions, making code 4863 the best fit."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(219)">
                <td>gen_openapi_gateway_response_UNAUTHORIZED_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="">UNAUTHORIZED</span> <small>(exp: UNAUTHORIZED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-219" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UNAUTHORIZED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not buy anything and expresses confusion about the charge, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW! (Network: Openapi_Gateway_Response)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.95,
    "reasoning": "The user explicitly states 'I DIDN'T BUY ANYTHING', which indicates a denial of the transaction. This aligns perfectly with the fraudulent category, specifically the unauthorized reason code, as the cardholder is claiming they did not authorize the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.95,
  "reasoning": "The user explicitly states 'I DIDN'T BUY ANYTHING', which indicates a denial of the transaction. This aligns perfectly with the fraudulent category, specifically the unauthorized reason code, as the cardholder is claiming they did not authorize the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(220)">
                <td>gen_openapi_gateway_response_UNAUTHORIZED_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="">UNAUTHORIZED</span> <small>(exp: UNAUTHORIZED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-220" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I was quite surprised because I always keep track of my expenses. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UNAUTHORIZED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I was quite surprised because I always keep track of my expenses. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge from a store they have never heard of, but they have not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge from a store they have never heard of, but they have not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I've never even heard of, let alone visited. I was quite surprised because I always keep track of my expenses. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Openapi_Gateway_Response)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **QUOTA_EXCEEDED**: 

- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.95,
    "reasoning": "The user explicitly states that they noticed a charge from a store they have never heard of and denies making the purchase, which aligns perfectly with the definition of an unauthorized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.95,
  "reasoning": "The user explicitly states that they noticed a charge from a store they have never heard of and denies making the purchase, which aligns perfectly with the definition of an unauthorized transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(221)">
                <td>gen_openapi_gateway_response_UNAUTHORIZED_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="">UNAUTHORIZED</span> <small>(exp: UNAUTHORIZED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-221" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you help clarify this for me? (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: fraudulent</div>
                            <div>Code: UNAUTHORIZED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you help clarify this for me? (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like a surprise, and I wasn't expecting it. Could you help clarify this for me? (Network: Openapi_Gateway_Response)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **QUOTA_EXCEEDED**: 

- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.95,
    "reasoning": "The user's statement indicates they noticed something unusual and unexpected on their statement, which aligns with the definition of an unauthorized transaction where the cardholder denies making the purchase. The phrase 'I DIDN'T MAKE this purchase' is a clear indicator of a potential fraud situation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.95,
  "reasoning": "The user's statement indicates they noticed something unusual and unexpected on their statement, which aligns with the definition of an unauthorized transaction where the cardholder denies making the purchase. The phrase 'I DIDN'T MAKE this purchase' is a clear indicator of a potential fraud situation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(222)">
                <td>gen_openapi_gateway_response_QUOTA_EXCEEDED_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="mismatch">UNAUTHORIZED</span> <small>(exp: QUOTA_EXCEEDED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-222" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY CARD BLOCKED?! FIX THIS NOW! I DIDN'T DO ANYTHING WRONG! (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: </div>
                            <div>Code: QUOTA_EXCEEDED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY CARD BLOCKED?! FIX THIS NOW! I DIDN'T DO ANYTHING WRONG! (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being blocked without providing explicit claims of fraud or unauthorized transactions. The language suggests an authorization issue rather than a clear case of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being blocked without providing explicit claims of fraud or unauthorized transactions. The language suggests an authorization issue rather than a clear case of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY CARD BLOCKED?! FIX THIS NOW! I DIDN'T DO ANYTHING WRONG! (Network: Openapi_Gateway_Response)
"""

Target Category: general

### Candidate Reason Codes:


- **QUOTA_EXCEEDED**: 

- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.95,
    "reasoning": "The user expresses frustration about their card being blocked and insists they did nothing wrong, which indicates they believe a transaction was unauthorized or fraudulent. This aligns directly with the 'UNAUTHORIZED' reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.95,
  "reasoning": "The user expresses frustration about their card being blocked and insists they did nothing wrong, which indicates they believe a transaction was unauthorized or fraudulent. This aligns directly with the 'UNAUTHORIZED' reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(223)">
                <td>gen_openapi_gateway_response_QUOTA_EXCEEDED_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="mismatch">UNAUTHORIZED</span> <small>(exp: QUOTA_EXCEEDED)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-223" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just going about my usual routine, you know, grabbing my morning coffee and planning my errands when I suddenly found myself unable to use my credit card. It was quite embarrassing at the checkout line. I checked my account and everything seemed fine, so I'm really puzzled as to why this happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: </div>
                            <div>Code: QUOTA_EXCEEDED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going about my usual routine, you know, grabbing my morning coffee and planning my errands when I suddenly found myself unable to use my credit card. It was quite embarrassing at the checkout line. I checked my account and everything seemed fine, so I'm really puzzled as to why this happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced an issue with their credit card being declined at the checkout, which suggests an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced an issue with their credit card being declined at the checkout, which suggests an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going about my usual routine, you know, grabbing my morning coffee and planning my errands when I suddenly found myself unable to use my credit card. It was quite embarrassing at the checkout line. I checked my account and everything seemed fine, so I'm really puzzled as to why this happened. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Openapi_Gateway_Response)
"""

Target Category: general

### Candidate Reason Codes:


- **QUOTA_EXCEEDED**: 

- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.85,
    "reasoning": "The user describes being unable to use their credit card at checkout, which suggests a potential issue with authorization. While they mention that their account seemed fine, the inability to use the card indicates a possible unauthorized transaction or a block on the card, making 'UNAUTHORIZED' the most fitting reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.85,
  "reasoning": "The user describes being unable to use their credit card at checkout, which suggests a potential issue with authorization. While they mention that their account seemed fine, the inability to use the card indicates a possible unauthorized transaction or a block on the card, making 'UNAUTHORIZED' the most fitting reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(224)">
                <td>gen_openapi_gateway_response_QUOTA_EXCEEDED_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">openapi_gateway_response</span> <small>(exp: openapi_gateway_response)</small></td>
                <td><span class="mismatch">UNAUTHORIZED</span> <small>(exp: QUOTA_EXCEEDED)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-224" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was trying to make a purchase, but it seems like my usual access isn't available. Could you look into this? It was unexpected, and I'm not sure what changed. (Network: Openapi_Gateway_Response)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: openapi_gateway_response</div>
                            <div>Category: </div>
                            <div>Code: QUOTA_EXCEEDED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: openapi_gateway_response</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: UNAUTHORIZED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>openapi_gateway_response</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was trying to make a purchase, but it seems like my usual access isn't available. Could you look into this? It was unexpected, and I'm not sure what changed. (Network: Openapi_Gateway_Response)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is experiencing an issue with access to their account, which suggests a potential authorization issue rather than a claim of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is experiencing an issue with access to their account, which suggests a potential authorization issue rather than a claim of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Openapi_gateway_response chargeback reason codes.

Your task is to select the specific Openapi_gateway_response reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was trying to make a purchase, but it seems like my usual access isn't available. Could you look into this? It was unexpected, and I'm not sure what changed. (Network: Openapi_Gateway_Response)
"""

Target Category: general

### Candidate Reason Codes:


- **QUOTA_EXCEEDED**: 

- **UNAUTHORIZED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Openapi_gateway_response):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "UNAUTHORIZED",
    "confidence": 0.85,
    "reasoning": "The user indicates that their usual access is not available and expresses uncertainty about what has changed, suggesting that they did not authorize the current situation or access. This aligns with the 'UNAUTHORIZED' reason code, as it reflects a lack of permission or access to the service."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "UNAUTHORIZED",
  "confidence": 0.85,
  "reasoning": "The user indicates that their usual access is not available and expresses uncertainty about what has changed, suggesting that they did not authorize the current situation or access. This aligns with the 'UNAUTHORIZED' reason code, as it reflects a lack of permission or access to the service."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(225)">
                <td>gen_visa_10.1_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-225" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they were charged for something they did not buy, indicating a lack of authorization for the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they were charged for something they did not buy, indicating a lack of authorization for the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder did not authorize the transaction, which aligns with the definition of 'Other Fraud - Card Absent Environment'. The phrase 'I DIDN'T buy' strongly suggests that the cardholder is disputing a charge due to fraudulent activity, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder did not authorize the transaction, which aligns with the definition of 'Other Fraud - Card Absent Environment'. The phrase 'I DIDN'T buy' strongly suggests that the cardholder is disputing a charge due to fraudulent activity, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(226)">
                <td>gen_visa_10.1_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-226" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that I don't recognize. It was a busy day for me; I had just returned from a long walk with my dog, and I was preparing dinner when I decided to check my bank statement. To my surprise, there was a transaction that seemed out of place. I am quite certain I didn't make this purchase, and I'm a bit puzzled about how it ended up on my account. Could you please help me resolve this issue? Thank you for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "10.4",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make",
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that I don't recognize. It was a busy day for me; I had just returned from a long walk with my dog, and I was preparing dinner when I decided to check my bank statement. To my surprise, there was a transaction that seemed out of place. I am quite certain I didn't make this purchase, and I'm a bit puzzled about how it ended up on my account. Could you please help me resolve this issue? Thank you for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the transaction and is seeking assistance to identify it, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the transaction and is seeking assistance to identify it, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that I don't recognize. It was a busy day for me; I had just returned from a long walk with my dog, and I was preparing dinner when I decided to check my bank statement. To my surprise, there was a transaction that seemed out of place. I am quite certain I didn't make this purchase, and I'm a bit puzzled about how it ended up on my account. Could you please help me resolve this issue? Thank you for your assistance. (Network: Visa)

[System hint: Based on keywords '["didn't make", "don't recognize"]', consider code 10.4 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, stating they don't recognize the charge. This aligns perfectly with reason code 10.4, which is designated for cases where the cardholder denies making a transaction in a card absent environment."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, stating they don't recognize the charge. This aligns perfectly with reason code 10.4, which is designated for cases where the cardholder denies making a transaction in a card absent environment."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(227)">
                <td>gen_visa_10.1_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.1)</small></td>
                <td>0.9</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-227" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement after visiting a store that usually doesn't have any issues. Can you look into it? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement after visiting a store that usually doesn't have any issues. Can you look into it? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something odd on their statement and is asking for clarification, but they haven't explicitly claimed fraud or indicated that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement after visiting a store that usually doesn't have any issues. Can you look into it? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.90,
    "reasoning": "The description indicates that the user noticed something odd on their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies a potential unauthorized transaction that the cardholder did not make."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.9,
  "reasoning": "The description indicates that the user noticed something odd on their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies a potential unauthorized transaction that the cardholder did not make."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(228)">
                <td>gen_paypal_ITEM_NOT_RECEIVED_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">paypal</span> <small>(exp: paypal)</small></td>
                <td><span class="">ITEM_NOT_RECEIVED</span> <small>(exp: ITEM_NOT_RECEIVED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-228" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY ORDER?! I paid and got NOTHING! FIX THIS NOW! (Network: Paypal)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: paypal</div>
                            <div>Category: product_not_received</div>
                            <div>Code: ITEM_NOT_RECEIVED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: paypal</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: ITEM_NOT_RECEIVED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>paypal</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY ORDER?! I paid and got NOTHING! FIX THIS NOW! (Network: Paypal)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating that they are disputing a transaction based on non-receipt of goods."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating that they are disputing a transaction based on non-receipt of goods."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Paypal chargeback reason codes.

Your task is to select the specific Paypal reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY ORDER?! I paid and got NOTHING! FIX THIS NOW! (Network: Paypal)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **ITEM_NOT_RECEIVED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Paypal):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "ITEM_NOT_RECEIVED",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I paid and got NOTHING!', indicating that the customer has not received the item they paid for. This directly aligns with the ITEM_NOT_RECEIVED reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "ITEM_NOT_RECEIVED",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I paid and got NOTHING!', indicating that the customer has not received the item they paid for. This directly aligns with the ITEM_NOT_RECEIVED reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(229)">
                <td>gen_paypal_ITEM_NOT_RECEIVED_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">paypal</span> <small>(exp: paypal)</small></td>
                <td><span class="">ITEM_NOT_RECEIVED</span> <small>(exp: ITEM_NOT_RECEIVED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-229" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently made a purchase through PayPal, and while I was excited to receive my item, it seems to have vanished into thin air. I checked my mailbox every day last week, even during the rain, but alas, nothing arrived. I was really looking forward to this package as it was a gift for my niece's birthday. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Paypal)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: paypal</div>
                            <div>Category: product_not_received</div>
                            <div>Code: ITEM_NOT_RECEIVED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: paypal</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: ITEM_NOT_RECEIVED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>paypal</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase through PayPal, and while I was excited to receive my item, it seems to have vanished into thin air. I checked my mailbox every day last week, even during the rain, but alas, nothing arrived. I was really looking forward to this package as it was a gift for my niece's birthday. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Paypal)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder claims they made a purchase but did not receive the item, indicating that the product was never delivered."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder claims they made a purchase but did not receive the item, indicating that the product was never delivered."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Paypal chargeback reason codes.

Your task is to select the specific Paypal reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase through PayPal, and while I was excited to receive my item, it seems to have vanished into thin air. I checked my mailbox every day last week, even during the rain, but alas, nothing arrived. I was really looking forward to this package as it was a gift for my niece's birthday. Could you please help me figure out what happened? Thank you so much for your assistance. (Network: Paypal)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **ITEM_NOT_RECEIVED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Paypal):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "ITEM_NOT_RECEIVED",
    "confidence": 0.95,
    "reasoning": "The user clearly states that they made a purchase but did not receive the item, describing it as having 'vanished into thin air' and checking their mailbox daily without success. This directly aligns with the reason code for items not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "ITEM_NOT_RECEIVED",
  "confidence": 0.95,
  "reasoning": "The user clearly states that they made a purchase but did not receive the item, describing it as having 'vanished into thin air' and checking their mailbox daily without success. This directly aligns with the reason code for items not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(230)">
                <td>gen_paypal_ITEM_NOT_RECEIVED_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">paypal</span> <small>(exp: paypal)</small></td>
                <td><span class="">ITEM_NOT_RECEIVED</span> <small>(exp: ITEM_NOT_RECEIVED)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-230" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was eagerly waiting for something special, but it seems like the universe had other plans. My anticipation turned into a waiting game, and now I'm left wondering if it was all just a dream. Any insights on this would be appreciated. (Network: Paypal)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: paypal</div>
                            <div>Category: product_not_received</div>
                            <div>Code: ITEM_NOT_RECEIVED</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: paypal</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: ITEM_NOT_RECEIVED</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>paypal</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the universe had other plans. My anticipation turned into a waiting game, and now I'm left wondering if it was all just a dream. Any insights on this would be appreciated. (Network: Paypal)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion and uncertainty about the transaction, indicating they do not recognize it, but they do not explicitly claim fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion and uncertainty about the transaction, indicating they do not recognize it, but they do not explicitly claim fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Paypal chargeback reason codes.

Your task is to select the specific Paypal reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was eagerly waiting for something special, but it seems like the universe had other plans. My anticipation turned into a waiting game, and now I'm left wondering if it was all just a dream. Any insights on this would be appreciated. (Network: Paypal)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **ITEM_NOT_RECEIVED**: 


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Paypal):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "ITEM_NOT_RECEIVED",
    "confidence": 0.95,
    "reasoning": "The user's description indicates a sense of anticipation for something special that was expected but never received. The phrase 'waiting game' suggests that the item was not delivered, which aligns perfectly with the reason code for items not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "ITEM_NOT_RECEIVED",
  "confidence": 0.95,
  "reasoning": "The user's description indicates a sense of anticipation for something special that was expected but never received. The phrase 'waiting game' suggests that the item was not delivered, which aligns perfectly with the reason code for items not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(231)">
                <td>gen_visa_10.3_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-231" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was $500 charged at a store I NEVER visited?! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was $500 charged at a store I NEVER visited?! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they never visited the store where the charge occurred, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they never visited the store where the charge occurred, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was $500 charged at a store I NEVER visited?! FIX THIS NOW! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they never visited the store where the charge occurred, indicating that they did not authorize the transaction. This aligns perfectly with 'Other Fraud - Card Absent Environment' as it suggests that the transaction was made without the cardholder's consent, fitting the description of fraudulent activity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they never visited the store where the charge occurred, indicating that they did not authorize the transaction. This aligns perfectly with 'Other Fraud - Card Absent Environment' as it suggests that the transaction was made without the cardholder's consent, fitting the description of fraudulent activity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(232)">
                <td>gen_visa_10.3_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-232" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I don't recall visiting. I usually keep track of my purchases, and this one doesn't ring a bell. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I don't recall visiting. I usually keep track of my purchases, and this one doesn't ring a bell. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a store I don't recall visiting. I usually keep track of my purchases, and this one doesn't ring a bell. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the charge and indicates they did not make the purchase, which aligns with the definition of 'Other Fraud - Card Absent Environment'. This code is appropriate as it reflects a situation where the cardholder denies the transaction, suggesting potential unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the charge and indicates they did not make the purchase, which aligns with the definition of 'Other Fraud - Card Absent Environment'. This code is appropriate as it reflects a situation where the cardholder denies the transaction, suggesting potential unauthorized use of their card."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(233)">
                <td>gen_visa_10.3_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-233" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my bill. I was at home all day, yet there's an unexpected entry. Can you check this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my bill. I was at home all day, yet there's an unexpected entry. Can you check this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed an unexpected entry on their bill and is seeking clarification, but they haven't explicitly claimed fraud or denied making the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed an unexpected entry on their bill and is seeking clarification, but they haven't explicitly claimed fraud or denied making the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my bill. I was at home all day, yet there's an unexpected entry. Can you check this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder did not recognize a transaction on their bill and was at home all day, suggesting that they did not authorize the transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies that the transaction was made without the cardholder's knowledge or consent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder did not recognize a transaction on their bill and was at home all day, suggesting that they did not authorize the transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies that the transaction was made without the cardholder's knowledge or consent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(234)">
                <td>gen_visa_10.2_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-234" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they were charged for something they did not buy, indicating a lack of authorization for the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they were charged for something they did not buy, indicating a lack of authorization for the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged for something I DIDN'T buy?! FIX THIS NOW! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder did not authorize the transaction, which aligns with the definition of 'Other Fraud - Card Absent Environment'. The phrase 'I DIDN'T buy' strongly suggests that the cardholder is disputing a charge due to fraudulent activity, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder did not authorize the transaction, which aligns with the definition of 'Other Fraud - Card Absent Environment'. The phrase 'I DIDN'T buy' strongly suggests that the cardholder is disputing a charge due to fraudulent activity, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(235)">
                <td>gen_visa_10.2_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-235" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I had quite a busy day today, running errands and catching up with some old friends. However, when I finally sat down to review my credit card statement, I noticed a charge that I don't recognize. It seems to have occurred at a time when I was nowhere near the location of the transaction. I'm quite puzzled and would appreciate your assistance in resolving this matter. Thank you for your help! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "10.4",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "don't recognize"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day today, running errands and catching up with some old friends. However, when I finally sat down to review my credit card statement, I noticed a charge that I don't recognize. It seems to have occurred at a time when I was nowhere near the location of the transaction. I'm quite puzzled and would appreciate your assistance in resolving this matter. Thank you for your help! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking assistance to identify it, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking assistance to identify it, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I had quite a busy day today, running errands and catching up with some old friends. However, when I finally sat down to review my credit card statement, I noticed a charge that I don't recognize. It seems to have occurred at a time when I was nowhere near the location of the transaction. I'm quite puzzled and would appreciate your assistance in resolving this matter. Thank you for your help! (Network: Visa)

[System hint: Based on keywords '["don't recognize"]', consider code 10.4 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 10.4 - Other Fraud - Card Absent Environment. The description indicates a lack of recognition of the charge and suggests that the cardholder was not present at the location of the transaction, further supporting this code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 10.4 - Other Fraud - Card Absent Environment. The description indicates a lack of recognition of the charge and suggests that the cardholder was not present at the location of the transaction, further supporting this code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(236)">
                <td>gen_visa_10.2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-236" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like a mix-up, as I wasn't where it says I was. Can you look into it? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like a mix-up, as I wasn't where it says I was. Can you look into it? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and indicates they were not where the transaction suggests, but does not explicitly claim fraud or that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and indicates they were not where the transaction suggests, but does not explicitly claim fraud or that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like a mix-up, as I wasn't where it says I was. Can you look into it? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the cardholder did not recognize a transaction and suggests a mix-up regarding their location, which aligns with the definition of fraud in a card-absent environment. The phrase 'I wasn't where it says I was' strongly implies that the cardholder did not authorize the transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the cardholder did not recognize a transaction and suggests a mix-up regarding their location, which aligns with the definition of fraud in a card-absent environment. The phrase 'I wasn't where it says I was' strongly implies that the cardholder did not authorize the transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(237)">
                <td>gen_visa_10.5_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-237" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "10.4",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not make the charge, indicating a claim of unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a charge I DIDN'T make? FIX THIS NOW! (Network: Visa)

[System hint: Based on keywords '["didn't make"]', consider code 10.4 - Cardholder explicitly denies making the transaction]
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of code 10.4 - Other Fraud - Card Absent Environment. The phrase 'I DIDN'T make this purchase' indicates a clear denial of authorization for the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which directly aligns with the definition of code 10.4 - Other Fraud - Card Absent Environment. The phrase 'I DIDN'T make this purchase' indicates a clear denial of authorization for the charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(238)">
                <td>gen_visa_10.5_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-238" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I don't recall making any such purchase. It's quite puzzling, and I'm not sure how to proceed. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I don't recall making any such purchase. It's quite puzzling, and I'm not sure how to proceed. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I don't recall making any such purchase. It's quite puzzling, and I'm not sure how to proceed. Could you please help me understand what's going on? Thank you so much for your assistance. (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder does not recognize the charge and does not recall making any purchase, indicating a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it suggests that the transaction was made without the cardholder's consent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder does not recognize the charge and does not recall making any purchase, indicating a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it suggests that the transaction was made without the cardholder's consent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(239)">
                <td>gen_visa_10.5_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 10.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-239" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something unusual on my statement. It seems like there's a surprise I wasn't expecting. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there's a surprise I wasn't expecting. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something unusual on my statement. It seems like there's a surprise I wasn't expecting. Could you help clarify this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user noticed something unusual on their statement and refers to it as a 'surprise' they weren't expecting, which strongly suggests they did not authorize the transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment' (10.4), as it implies a lack of recognition of the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user noticed something unusual on their statement and refers to it as a 'surprise' they weren't expecting, which strongly suggests they did not authorize the transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment' (10.4), as it implies a lack of recognition of the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(240)">
                <td>gen_visa_11.1_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">11.2</span> <small>(exp: 11.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-240" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 11.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates an authorization issue rather than a specific chargeback reason like fraud or unrecognized transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being blocked, which indicates an authorization issue rather than a specific chargeback reason like fraud or unrecognized transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is my card blocked?! FIX THIS NOW! I NEED IT! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.2",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the card is blocked, which suggests that an authorization attempt was declined. The phrase 'FIX THIS NOW! I NEED IT!' implies urgency related to the inability to use the card, aligning with the declined authorization scenario."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.2",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the card is blocked, which suggests that an authorization attempt was declined. The phrase 'FIX THIS NOW! I NEED IT!' implies urgency related to the inability to use the card, aligning with the declined authorization scenario."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(241)">
                <td>gen_visa_11.1_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">11.2</span> <small>(exp: 11.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-241" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just trying to buy some groceries when my card was unexpectedly declined. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 11.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "11.2",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just trying to buy some groceries when my card was unexpectedly declined. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than a fraudulent transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a card decline while attempting to make a purchase, which indicates an authorization issue rather than a fraudulent transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just trying to buy some groceries when my card was unexpectedly declined. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)

[System hint: Based on keywords '['declined']', consider code 11.2 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.2",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly states that the card was unexpectedly declined at the point of sale, which directly corresponds to the reason code 11.2 - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.2",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly states that the card was unexpectedly declined at the point of sale, which directly corresponds to the reason code 11.2 - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(242)">
                <td>gen_visa_11.1_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 11.1)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-242" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Can you look into it? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Can you look into it? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about an unexpected issue with their card but does not explicitly claim fraud or provide details indicating unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about an unexpected issue with their card but does not explicitly claim fraud or provide details indicating unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite a surprise, and I'm not sure what to do next. Can you look into it? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description indicates that the cardholder experienced something unexpected with their card, which suggests a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies that the cardholder did not recognize the transaction and may not have authorized it. However, the lack of specific details about the transaction leaves some ambiguity."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description indicates that the cardholder experienced something unexpected with their card, which suggests a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies that the cardholder did not recognize the transaction and may not have authorized it. However, the lack of specific details about the transaction leaves some ambiguity."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(243)">
                <td>gen_visa_10.4_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">10.4</span> <small>(exp: 10.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-243" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: fraudulent</div>
                            <div class="">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the transaction and expresses confusion about the charge, indicating a belief that the transaction was unauthorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the transaction and expresses confusion about the charge, indicating a belief that the transaction was unauthorized."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHAT IS THIS CHARGE?! I DIDN'T BUY ANYTHING! FIX THIS NOW OR I'M DONE WITH YOU! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of 'Other Fraud - Card Absent Environment'. This suggests that the transaction was made without the cardholder's authorization, fitting the fraudulent nature of the dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states 'I DIDN'T BUY ANYTHING', indicating a denial of the transaction, which aligns perfectly with the definition of 'Other Fraud - Card Absent Environment'. This suggests that the transaction was made without the cardholder's authorization, fitting the fraudulent nature of the dispute."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(244)">
                <td>gen_visa_10.4_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">10.4</span> <small>(exp: 10.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-244" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I certainly didn't make any purchases online recently. I usually keep track of my expenses, and this one just doesn't add up. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: fraud</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "10.4",
  "explanation": "Cardholder explicitly denies making the transaction",
  "matched_keywords": [
    "didn't make"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I certainly didn't make any purchases online recently. I usually keep track of my expenses, and this one just doesn't add up. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge from a place I've never heard of, and I certainly didn't make any purchases online recently. I usually keep track of my expenses, and this one just doesn't add up. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)

[System hint: Based on keywords '["didn't make"]', consider code 10.4 - Cardholder explicitly denies making the transaction]
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 10.4 - Other Fraud - Card Absent Environment. The description indicates that the charge is unrecognized and the cardholder did not authorize it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly denies making the transaction, which aligns perfectly with reason code 10.4 - Other Fraud - Card Absent Environment. The description indicates that the charge is unrecognized and the cardholder did not authorize it."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(245)">
                <td>gen_visa_10.4_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">10.4</span> <small>(exp: 10.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-245" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something that doesn't quite fit. It's like finding a puzzle piece that doesn't belong in the picture. I haven't been shopping online or anything, so this is a bit puzzling. Could you take a look and let me know what might be happening? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: fraudulent</div>
                            <div>Code: 10.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite fit. It's like finding a puzzle piece that doesn't belong in the picture. I haven't been shopping online or anything, so this is a bit puzzling. Could you take a look and let me know what might be happening? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed that it is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed that it is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite fit. It's like finding a puzzle piece that doesn't belong in the picture. I haven't been shopping online or anything, so this is a bit puzzling. Could you take a look and let me know what might be happening? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user did not recognize a transaction and has not been shopping online, suggesting that the transaction may have been unauthorized. This aligns with the fraud code for card absent environments, where the cardholder denies the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user did not recognize a transaction and has not been shopping online, suggesting that the transaction may have been unauthorized. This aligns with the fraud code for card absent environments, where the cardholder denies the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(246)">
                <td>gen_visa_11.2_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">11.2</span> <small>(exp: 11.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-246" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 11.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "11.2",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration about their card being declined, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration about their card being declined, which indicates an authorization issue rather than a claim of fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY WAS MY CARD DECLINED?! FIX THIS NOW! I NEED ANSWERS! (Network: Visa)

[System hint: Based on keywords '['declined']', consider code 11.2 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.2",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly indicates that the card was declined, which directly corresponds to the reason code 11.2 - Declined Authorization. The keywords 'declined' and 'authorization issue' confirm that this is not a fraud-related issue, but rather a problem with the authorization process at the point of sale."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.2",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly indicates that the card was declined, which directly corresponds to the reason code 11.2 - Declined Authorization. The keywords 'declined' and 'authorization issue' confirm that this is not a fraud-related issue, but rather a problem with the authorization process at the point of sale."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(247)">
                <td>gen_visa_11.2_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">11.2</span> <small>(exp: 11.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-247" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just trying to buy some groceries yesterday, and to my surprise, my card was declined at the checkout. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand what went wrong? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 11.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: authorization</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "11.2",
  "explanation": "Card declined at point of sale - authorization issue, not fraud",
  "matched_keywords": [
    "declined"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just trying to buy some groceries yesterday, and to my surprise, my card was declined at the checkout. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand what went wrong? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced a card decline at checkout, which indicates an authorization issue rather than a fraudulent transaction or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced a card decline at checkout, which indicates an authorization issue rather than a fraudulent transaction or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just trying to buy some groceries yesterday, and to my surprise, my card was declined at the checkout. It was quite embarrassing, especially since I had a long line of people behind me. I checked my account, and everything seemed fine. Could you please help me understand what went wrong? Thank you so much for your assistance. (Network: Visa)

[System hint: Based on keywords '['declined']', consider code 11.2 - Card declined at point of sale - authorization issue, not fraud]
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.2",
    "confidence": 0.95,
    "reasoning": "The dispute description clearly states that the card was declined at the checkout, which directly corresponds to the reason code 11.2 - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.2",
  "confidence": 0.95,
  "reasoning": "The dispute description clearly states that the card was declined at the checkout, which directly corresponds to the reason code 11.2 - Declined Authorization. There are no indications of fraud or other issues, making this the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(248)">
                <td>gen_visa_11.2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">11.2</span> <small>(exp: 11.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-248" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was at the store, and something unexpected happened with my card. It was quite inconvenient, and I had to leave without my items. Could you look into this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 11.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite inconvenient, and I had to leave without my items. Could you look into this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder describes an unexpected issue with their card that caused inconvenience, but does not explicitly claim fraud or provide details about unauthorized use. This suggests an authorization issue rather than a fraudulent transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder describes an unexpected issue with their card that caused inconvenience, but does not explicitly claim fraud or provide details about unauthorized use. This suggests an authorization issue rather than a fraudulent transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was at the store, and something unexpected happened with my card. It was quite inconvenient, and I had to leave without my items. Could you look into this for me? (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.2",
    "confidence": 0.95,
    "reasoning": "The description indicates that the card was not accepted during the transaction, which aligns with the 'Declined Authorization' reason code. The phrase 'something unexpected happened with my card' suggests that the transaction was declined at the point of sale, leading to the inconvenience of leaving without the items."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.2",
  "confidence": 0.95,
  "reasoning": "The description indicates that the card was not accepted during the transaction, which aligns with the 'Declined Authorization' reason code. The phrase 'something unexpected happened with my card' suggests that the transaction was declined at the point of sale, leading to the inconvenience of leaving without the items."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(249)">
                <td>gen_visa_11.3_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 11.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-249" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my card charged without my OK? FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my card charged without my OK? FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states that their card was charged without their permission, indicating they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states that their card was charged without their permission, indicating they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my card charged without my OK? FIX THIS NOW! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the cardholder did not authorize the charge, which aligns with the definition of 'Other Fraud - Card Absent Environment'. This code is appropriate as it covers situations where a transaction is disputed due to unauthorized use of the card without the cardholder's consent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the cardholder did not authorize the charge, which aligns with the definition of 'Other Fraud - Card Absent Environment'. This code is appropriate as it covers situations where a transaction is disputed due to unauthorized use of the card without the cardholder's consent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(250)">
                <td>gen_visa_11.3_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 11.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-250" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the charge and is seeking clarification, but has not explicitly claimed that the transaction was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There was a charge that I don't recall authorizing. It's quite puzzling because I usually keep track of my expenses meticulously. Could you please help me understand how this happened? Thank you so much for your assistance! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder states they noticed a charge they do not recall authorizing, indicating a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it suggests that the transaction was made without the cardholder's consent, fitting the description of fraud in a card-not-present scenario."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder states they noticed a charge they do not recall authorizing, indicating a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it suggests that the transaction was made without the cardholder's consent, fitting the description of fraud in a card-not-present scenario."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(251)">
                <td>gen_visa_11.3_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 11.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-251" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my statement. It seems like there was a mix-up or oversight. Could you look into it? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 11.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my statement. It seems like there was a mix-up or oversight. Could you look into it? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed something strange on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed something strange on their statement and is asking for clarification, indicating they don't recognize the transaction but haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my statement. It seems like there was a mix-up or oversight. Could you look into it? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user noticed something strange on their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies a potential unauthorized transaction that the cardholder did not make."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user noticed something strange on their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies a potential unauthorized transaction that the cardholder did not make."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(252)">
                <td>gen_visa_12.1_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">12.5</span> <small>(exp: 12.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-252" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged NOW? FIX THIS IMMEDIATELY! UNACCEPTABLE! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="mismatch">Code: 12.5</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged NOW? FIX THIS IMMEDIATELY! UNACCEPTABLE! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing confusion and frustration about a charge they did not expect, but does not explicitly claim fraud or provide details indicating unauthorized use of the card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing confusion and frustration about a charge they did not expect, but does not explicitly claim fraud or provide details indicating unauthorized use of the card."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged NOW? FIX THIS IMMEDIATELY! UNACCEPTABLE! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.5",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates frustration over an unexpected charge, which suggests that the amount charged may not align with the cardholder's expectations or prior agreement. This aligns closely with reason code 12.5, which pertains to an incorrect amount being charged."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.5",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates frustration over an unexpected charge, which suggests that the amount charged may not align with the cardholder's expectations or prior agreement. This aligns closely with reason code 12.5, which pertains to an incorrect amount being charged."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(253)">
                <td>gen_visa_12.1_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.1</span> <small>(exp: 12.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-253" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that seemed a bit off. It was a lovely day, and I was just enjoying my morning coffee when I decided to check my account. To my surprise, there was a transaction that appeared much later than expected. I remember making the purchase weeks ago, and it just showed up now. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 12.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that seemed a bit off. It was a lovely day, and I was just enjoying my morning coffee when I decided to check my account. To my surprise, there was a transaction that appeared much later than expected. I remember making the purchase weeks ago, and it just showed up now. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed fraud or indicated that they did not authorize the charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize the transaction and is seeking clarification, but has not explicitly claimed fraud or indicated that they did not authorize the charge."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently noticed a charge on my Visa card that seemed a bit off. It was a lovely day, and I was just enjoying my morning coffee when I decided to check my account. To my surprise, there was a transaction that appeared much later than expected. I remember making the purchase weeks ago, and it just showed up now. Could you please help me understand why this happened? Thank you so much for your assistance. (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.1",
    "confidence": 0.95,
    "reasoning": "The cardholder is disputing a charge that appeared much later than expected, indicating a potential issue with the timing of the transaction being presented. This aligns with the Late Presentment reason code, which applies when a transaction is processed after a significant delay."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.1",
  "confidence": 0.95,
  "reasoning": "The cardholder is disputing a charge that appeared much later than expected, indicating a potential issue with the timing of the transaction being presented. This aligns with the Late Presentment reason code, which applies when a transaction is processed after a significant delay."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(254)">
                <td>gen_visa_12.1_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-254" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd with my recent statement. It seems like things aren't lining up as they should. Could you take a look? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd with my recent statement. It seems like things aren't lining up as they should. Could you take a look? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is expressing confusion about a charge on their statement but has not explicitly claimed that it was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is expressing confusion about a charge on their statement but has not explicitly claimed that it was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd with my recent statement. It seems like things aren't lining up as they should. Could you take a look? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user noticed something odd with their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies the user is disputing a charge they did not authorize."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user noticed something odd with their statement, suggesting they did not recognize a transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as it implies the user is disputing a charge they did not authorize."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(255)">
                <td>gen_visa_12.2_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-255" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is there a WRONG charge on my card?! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is there a WRONG charge on my card?! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about a charge on their card without explicitly claiming fraud or indicating that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about a charge on their card without explicitly claiming fraud or indicating that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is there a WRONG charge on my card?! FIX THIS NOW! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates a charge that the cardholder did not recognize, which aligns with the definition of fraud in a card-absent environment. The phrase 'I DIDN'T MAKE this purchase' strongly suggests that the cardholder is disputing the legitimacy of the transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates a charge that the cardholder did not recognize, which aligns with the definition of fraud in a card-absent environment. The phrase 'I DIDN'T MAKE this purchase' strongly suggests that the cardholder is disputing the legitimacy of the transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(256)">
                <td>gen_visa_12.2_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-256" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There seems to be a transaction that doesn't quite match what I remember doing. I was sure I only bought groceries last week, but there's this charge that seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There seems to be a transaction that doesn't quite match what I remember doing. I was sure I only bought groceries last week, but there's this charge that seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder does not recognize a specific charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder does not recognize a specific charge on their statement and is seeking clarification, but they have not explicitly claimed that the transaction is fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There seems to be a transaction that doesn't quite match what I remember doing. I was sure I only bought groceries last week, but there's this charge that seems out of place. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder states that there is a transaction that they do not recognize, indicating that they did not authorize this charge. This aligns with the fraud code for card absent environments, where the cardholder denies making the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder states that there is a transaction that they do not recognize, indicating that they did not authorize this charge. This aligns with the fraud code for card absent environments, where the cardholder denies making the transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(257)">
                <td>gen_visa_12.2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-257" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent activities and noticed something that doesn't align with my usual spending habits. It's like a puzzle piece that doesn't fit. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent activities and noticed something that doesn't align with my usual spending habits. It's like a puzzle piece that doesn't fit. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge that doesn't align with their usual spending habits but has not explicitly claimed fraud or denied authorization."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge that doesn't align with their usual spending habits but has not explicitly claimed fraud or denied authorization."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent activities and noticed something that doesn't align with my usual spending habits. It's like a puzzle piece that doesn't fit. Could you help clarify this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user does not recognize a transaction, suggesting it may be fraudulent. The phrase 'doesn't align with my usual spending habits' strongly implies that the user did not authorize the transaction, which fits the 'Other Fraud - Card Absent Environment' code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user does not recognize a transaction, suggesting it may be fraudulent. The phrase 'doesn't align with my usual spending habits' strongly implies that the user did not authorize the transaction, which fits the 'Other Fraud - Card Absent Environment' code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(258)">
                <td>gen_visa_12.4_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.4</span> <small>(exp: 12.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-258" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">FIX THIS NOW! Wrong account number! I NEED MY MONEY BACK ASAP! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 12.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
FIX THIS NOW! Wrong account number! I NEED MY MONEY BACK ASAP! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is indicating a wrong account number and requesting a refund, which suggests an authorization issue rather than a claim of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is indicating a wrong account number and requesting a refund, which suggests an authorization issue rather than a claim of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
FIX THIS NOW! Wrong account number! I NEED MY MONEY BACK ASAP! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.4",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'Wrong account number', which directly corresponds to the reason code for 'Incorrect Account Number'. The urgency expressed in the request for a refund further emphasizes the need for correction related to the account details."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.4",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'Wrong account number', which directly corresponds to the reason code for 'Incorrect Account Number'. The urgency expressed in the request for a refund further emphasizes the need for correction related to the account details."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(259)">
                <td>gen_visa_12.4_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.4</span> <small>(exp: 12.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-259" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems like there's a transaction linked to an account number that doesn't match mine. I double-checked my records, and I'm quite certain there's been a mix-up. Could you please look into this for me? Thank you so much for your help! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 12.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems like there's a transaction linked to an account number that doesn't match mine. I double-checked my records, and I'm quite certain there's been a mix-up. Could you please look into this for me? Thank you so much for your help! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a transaction linked to an account number that doesn't match theirs and is seeking clarification, but they haven't explicitly claimed fraud or unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a transaction linked to an account number that doesn't match theirs and is seeking clarification, but they haven't explicitly claimed fraud or unauthorized use."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I was just going through my statements while sipping my morning coffee, and I noticed something odd. It seems like there's a transaction linked to an account number that doesn't match mine. I double-checked my records, and I'm quite certain there's been a mix-up. Could you please look into this for me? Thank you so much for your help! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.4",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the transaction is linked to an account number that does not match the user's account, suggesting an incorrect account number was used for the transaction. This aligns perfectly with reason code 12.4, which specifically addresses issues related to incorrect account numbers."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.4",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the transaction is linked to an account number that does not match the user's account, suggesting an incorrect account number was used for the transaction. This aligns perfectly with reason code 12.4, which specifically addresses issues related to incorrect account numbers."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(260)">
                <td>gen_visa_12.4_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.4)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-260" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something peculiar. It seems like the details don't quite align with what I expected. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like the details don't quite align with what I expected. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a transaction they do not recognize, but they have not explicitly claimed that it was fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a transaction they do not recognize, but they have not explicitly claimed that it was fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like the details don't quite align with what I expected. Could you help clarify this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The dispute description indicates that the user noticed something peculiar about their transactions, suggesting they may not recognize a charge. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a potential unauthorized transaction. However, the description lacks explicit denial of the transaction, leading to a slightly lower confidence."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The dispute description indicates that the user noticed something peculiar about their transactions, suggesting they may not recognize a charge. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a potential unauthorized transaction. However, the description lacks explicit denial of the transaction, leading to a slightly lower confidence."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(261)">
                <td>gen_visa_12.5_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.5</span> <small>(exp: 12.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-261" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 12.5</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the accuracy of their bill and expressing dissatisfaction with the amount charged, which indicates a potential authorization issue or processing error rather than a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the accuracy of their bill and expressing dissatisfaction with the amount charged, which indicates a potential authorization issue or processing error rather than a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY BILL WRONG? FIX THIS NOW! I DIDN'T SPEND THAT MUCH! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.5",
    "confidence": 0.95,
    "reasoning": "The dispute indicates that the cardholder believes the billed amount is incorrect, suggesting that they were charged more than they expected or agreed to. This aligns directly with reason code 12.5, which pertains to an 'Incorrect Amount'. The urgency in the statement 'FIX THIS NOW!' further emphasizes the cardholder's concern about the amount charged."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.5",
  "confidence": 0.95,
  "reasoning": "The dispute indicates that the cardholder believes the billed amount is incorrect, suggesting that they were charged more than they expected or agreed to. This aligns directly with reason code 12.5, which pertains to an 'Incorrect Amount'. The urgency in the statement 'FIX THIS NOW!' further emphasizes the cardholder's concern about the amount charged."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(262)">
                <td>gen_visa_12.5_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.5</span> <small>(exp: 12.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-262" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. It seems the amount charged for my recent purchase at the bookstore is higher than what I remember paying. I distinctly recall the cashier saying it was $25, but my statement shows $35. Could you please help me understand this discrepancy? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 12.5</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "12.5",
  "explanation": "Amount charged differs from what was authorized",
  "matched_keywords": [
    "higher than"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. It seems the amount charged for my recent purchase at the bookstore is higher than what I remember paying. I distinctly recall the cashier saying it was $25, but my statement shows $35. Could you please help me understand this discrepancy? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is disputing the amount charged, stating it is higher than what they remember paying. This indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is disputing the amount charged, stating it is higher than what they remember paying. This indicates a potential processing error or authorization issue rather than fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope you're having a good day. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. It seems the amount charged for my recent purchase at the bookstore is higher than what I remember paying. I distinctly recall the cashier saying it was $25, but my statement shows $35. Could you please help me understand this discrepancy? Thank you so much for your assistance! (Network: Visa)

[System hint: Based on keywords '['higher than']', consider code 12.5 - Amount charged differs from what was authorized]
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.5",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the amount charged on the credit card statement ($35) is higher than what the cardholder remembers paying ($25). This directly corresponds to the reason code 12.5, which is for situations where the amount charged differs from what was authorized."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.5",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the amount charged on the credit card statement ($35) is higher than what the cardholder remembers paying ($25). This directly corresponds to the reason code 12.5, which is for situations where the amount charged differs from what was authorized."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(263)">
                <td>gen_visa_12.5_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-263" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like when you expect a certain number of apples in a basket, but there are more than you remember picking. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like when you expect a certain number of apples in a basket, but there are more than you remember picking. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a transaction they do not remember, which indicates a lack of recognition rather than an explicit claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a transaction they do not remember, which indicates a lack of recognition rather than an explicit claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something that doesn't quite add up. It's like when you expect a certain number of apples in a basket, but there are more than you remember picking. Could you help clarify this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the user is disputing a transaction they do not recognize, which aligns with the definition of fraud in a card-absent environment. The metaphor of expecting a certain number of apples but finding more suggests that the user believes there has been an unauthorized transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the user is disputing a transaction they do not recognize, which aligns with the definition of fraud in a card-absent environment. The metaphor of expecting a certain number of apples but finding more suggests that the user believes there has been an unauthorized transaction, making 'Other Fraud - Card Absent Environment' the most appropriate reason code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(264)">
                <td>gen_visa_12.3_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.3</span> <small>(exp: 12.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-264" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was I charged in euros?! FIX THIS NOW! I want my money back! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: general</div>
                            <div class="">Code: 12.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was I charged in euros?! FIX THIS NOW! I want my money back! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is questioning the charge in euros and demanding a refund, which indicates a potential issue with the transaction processing or currency conversion, rather than a clear case of fraud or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is questioning the charge in euros and demanding a refund, which indicates a potential issue with the transaction processing or currency conversion, rather than a clear case of fraud or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was I charged in euros?! FIX THIS NOW! I want my money back! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.3",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates a concern about being charged in euros, which directly relates to the currency of the transaction. The specific mention of 'Incorrect Currency' aligns perfectly with reason code 12.3."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.3",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates a concern about being charged in euros, which directly relates to the currency of the transaction. The specific mention of 'Incorrect Currency' aligns perfectly with reason code 12.3."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(265)">
                <td>gen_visa_12.3_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.3</span> <small>(exp: 12.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-265" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to be in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I might have missed. Thank you for your help! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="">Code: 12.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to be in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I might have missed. Thank you for your help! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is surprised by the charge being in euros instead of dollars and is seeking clarification, indicating they do not recognize the transaction in its current form, but they haven't explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is surprised by the charge being in euros instead of dollars and is seeking clarification, indicating they do not recognize the transaction in its current form, but they haven't explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently made a purchase while on a trip to Paris, and I was expecting the charge to be in dollars, as that's what I usually see. However, when I checked my statement, it was in euros, which was quite surprising. I was just wondering if there might have been a mix-up or if there's something I might have missed. Thank you for your help! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.3",
    "confidence": 0.95,
    "reasoning": "The cardholder is disputing a charge due to an unexpected currency conversion, indicating that the transaction was processed in euros instead of dollars. This directly aligns with the reason code for 'Incorrect Currency', making it the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.3",
  "confidence": 0.95,
  "reasoning": "The cardholder is disputing a charge due to an unexpected currency conversion, indicating that the transaction was processed in euros instead of dollars. This directly aligns with the reason code for 'Incorrect Currency', making it the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(266)">
                <td>gen_visa_12.3_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.3)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-266" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement after my recent trip. The numbers don't quite add up the way I expected. Could you take a look and let me know what's going on? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement after my recent trip. The numbers don't quite add up the way I expected. Could you take a look and let me know what's going on? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is questioning a charge on their statement and is unsure about the details, but they have not explicitly claimed that the transaction was unauthorized or fraudulent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is questioning a charge on their statement and is unsure about the details, but they have not explicitly claimed that the transaction was unauthorized or fraudulent."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement after my recent trip. The numbers don't quite add up the way I expected. Could you take a look and let me know what's going on? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description indicates that the user noticed something odd on their statement after a trip, suggesting they did not recognize the transactions. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies potential unauthorized transactions. However, the ambiguity in the description leaves room for interpretation, hence a slightly lower confidence."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description indicates that the user noticed something odd on their statement after a trip, suggesting they did not recognize the transactions. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies potential unauthorized transactions. However, the ambiguity in the description leaves room for interpretation, hence a slightly lower confidence."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(267)">
                <td>gen_visa_12.6.1_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.6.1</span> <small>(exp: 12.6.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-267" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: 12.6.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "12.6.1",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is expressing frustration about being charged twice for the same transaction, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! UNACCEPTABLE! (Network: Visa)

[System hint: Based on keywords '['charged twice']', consider code 12.6.1 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.6.1",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with reason code 12.6.1 - Duplicate Processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.6.1",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with reason code 12.6.1 - Duplicate Processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(268)">
                <td>gen_visa_12.6.1_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.6.1</span> <small>(exp: 12.6.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-268" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently went to my favorite coffee shop, and after enjoying a lovely latte, I noticed something odd on my statement. It seems like I've been charged twice for the same purchase. I remember the barista was new, and there was a bit of a mix-up with the card machine. Could you please look into this for me? Thank you so much for your help! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: 12.6.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "12.6.1",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently went to my favorite coffee shop, and after enjoying a lovely latte, I noticed something odd on my statement. It seems like I've been charged twice for the same purchase. I remember the barista was new, and there was a bit of a mix-up with the card machine. Could you please look into this for me? Thank you so much for your help! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder explicitly states they were charged twice for the same purchase, which fits the definition of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder explicitly states they were charged twice for the same purchase, which fits the definition of a duplicate charge."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently went to my favorite coffee shop, and after enjoying a lovely latte, I noticed something odd on my statement. It seems like I've been charged twice for the same purchase. I remember the barista was new, and there was a bit of a mix-up with the card machine. Could you please look into this for me? Thank you so much for your help! (Network: Visa)

[System hint: Based on keywords '['charged twice']', consider code 12.6.1 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.6.1",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the user was charged twice for the same purchase, which directly aligns with the definition of 'Duplicate Processing' as indicated by the reason code 12.6.1. The mention of a mix-up with the card machine further supports the likelihood of a duplicate charge."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.6.1",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the user was charged twice for the same purchase, which directly aligns with the definition of 'Duplicate Processing' as indicated by the reason code 12.6.1. The mention of a mix-up with the card machine further supports the likelihood of a duplicate charge."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(269)">
                <td>gen_visa_12.6.1_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.6.1)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-269" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something strange on my statement after my last visit to the store. It seems like the numbers don't quite add up, and I'm a bit puzzled. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something strange on my statement after my last visit to the store. It seems like the numbers don't quite add up, and I'm a bit puzzled. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is puzzled by a charge on their statement and is seeking clarification, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is puzzled by a charge on their statement and is seeking clarification, indicating they do not recognize the transaction but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something strange on my statement after my last visit to the store. It seems like the numbers don't quite add up, and I'm a bit puzzled. Could you help clarify this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description indicates confusion about a transaction on the statement, suggesting the cardholder does not recognize the charge. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a potential unauthorized transaction. However, the ambiguity in the statement means it could also relate to other issues, hence the confidence level is slightly lower."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description indicates confusion about a transaction on the statement, suggesting the cardholder does not recognize the charge. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a potential unauthorized transaction. However, the ambiguity in the statement means it could also relate to other issues, hence the confidence level is slightly lower."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(270)">
                <td>gen_visa_12.6.2_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">12.6.1</span> <small>(exp: 12.6.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-270" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: duplicate</div>
                            <div class="mismatch">Code: 12.6.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: processing_errors</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "12.6.1",
  "explanation": "Same transaction processed multiple times",
  "matched_keywords": [
    "charged twice"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder is claiming they were charged twice for the same transaction, as indicated by their statement 'WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY!'"
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder is claiming they were charged twice for the same transaction, as indicated by their statement 'WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY!'"
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY CHARGED TWICE? FIX THIS NOW! I PAID ALREADY! (Network: Visa)

[System hint: Based on keywords '['charged twice']', consider code 12.6.1 - Same transaction processed multiple times]
"""

Target Category: duplicate

### Candidate Reason Codes:


- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.6.1",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with reason code 12.6.1 - Duplicate Processing."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.6.1",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'charged twice', which directly indicates that the same transaction was processed multiple times. This aligns perfectly with reason code 12.6.1 - Duplicate Processing."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(271)">
                <td>gen_visa_12.6.2_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">12.6.2</span> <small>(exp: 12.6.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-271" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have dinner at our favorite restaurant. I remember paying for the meal with cash, but to my surprise, I noticed a charge on my credit card statement for the same amount. I'm a bit puzzled as I distinctly recall settling the bill in person. Could you please help me resolve this? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: duplicate</div>
                            <div class="">Code: 12.6.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have dinner at our favorite restaurant. I remember paying for the meal with cash, but to my surprise, I noticed a charge on my credit card statement for the same amount. I'm a bit puzzled as I distinctly recall settling the bill in person. Could you please help me resolve this? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder claims to have paid for the meal in cash but also sees a charge on their credit card for the same amount, indicating they were charged twice for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder claims to have paid for the meal in cash but also sees a charge on their credit card for the same amount, indicating they were charged twice for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I recently had a lovely day out with my family, and we decided to have dinner at our favorite restaurant. I remember paying for the meal with cash, but to my surprise, I noticed a charge on my credit card statement for the same amount. I'm a bit puzzled as I distinctly recall settling the bill in person. Could you please help me resolve this? Thank you so much for your assistance. (Network: Visa)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.6.2",
    "confidence": 0.95,
    "reasoning": "The cardholder states they paid for the meal in cash but later found a charge on their credit card for the same amount. This situation clearly indicates that they paid by other means (cash) and were also charged on their card, which aligns perfectly with the reason code 12.6.2."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.6.2",
  "confidence": 0.95,
  "reasoning": "The cardholder states they paid for the meal in cash but later found a charge on their credit card for the same amount. This situation clearly indicates that they paid by other means (cash) and were also charged on their card, which aligns perfectly with the reason code 12.6.2."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(272)">
                <td>gen_visa_12.6.2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">12.6.1</span> <small>(exp: 12.6.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-272" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you check it out? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: duplicate</div>
                            <div>Code: 12.6.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: duplicate</div>
                            <div class="mismatch">Code: 12.6.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you check it out? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "duplicate",
    "reasoning": "The cardholder mentions noticing something odd on their statement and refers to a repeat of something they handled differently, which suggests they were charged multiple times for the same transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "duplicate",
  "reasoning": "The cardholder mentions noticing something odd on their statement and refers to a repeat of something they handled differently, which suggests they were charged multiple times for the same transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like there's a repeat of something I handled differently. Could you check it out? (Network: Visa)
"""

Target Category: duplicate

### Candidate Reason Codes:


- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "12.6.1",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates a concern about a repeat charge, which aligns directly with the definition of 'Duplicate Processing'. The phrase 'repeat of something I handled differently' suggests that the cardholder believes they were charged again for a transaction that should not have been duplicated."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "12.6.1",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates a concern about a repeat charge, which aligns directly with the definition of 'Duplicate Processing'. The phrase 'repeat of something I handled differently' suggests that the cardholder believes they were charged again for a transaction that should not have been duplicated."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(273)">
                <td>gen_visa_12.7_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.7)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-273" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY is my card charged? FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: fraudulent</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY is my card charged? FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "fraudulent",
    "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "fraudulent",
  "reasoning": "The cardholder explicitly states they did not authorize the transaction, indicating a claim of fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY is my card charged? FIX THIS NOW! I DIDN'T AUTHORIZE! (Network: Visa)
"""

Target Category: fraudulent

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder explicitly states that they did not authorize the charge, indicating a clear case of fraud in a card absent environment. This aligns perfectly with reason code 10.4, which covers situations where the cardholder denies the transaction due to unauthorized use."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder explicitly states that they did not authorize the charge, indicating a clear case of fraud in a card absent environment. This aligns perfectly with reason code 10.4, which covers situations where the cardholder denies the transaction due to unauthorized use."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(274)">
                <td>gen_visa_12.7_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.7)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-274" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that doesn't seem right. I remember using my card at the grocery store last week, but this amount doesn't match any of my receipts. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that doesn't seem right. I remember using my card at the grocery store last week, but this amount doesn't match any of my receipts. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder noticed a charge that doesn't match their receipts and is seeking clarification, but they haven't explicitly claimed fraud or that they didn't authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder noticed a charge that doesn't match their receipts and is seeking clarification, but they haven't explicitly claimed fraud or that they didn't authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello, I hope this message finds you well. I was just going through my credit card statement while sipping my morning coffee, and I noticed something odd. There's a charge that doesn't seem right. I remember using my card at the grocery store last week, but this amount doesn't match any of my receipts. Could you please help me understand what's going on? Thank you so much for your assistance! (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.95,
    "reasoning": "The cardholder is disputing a charge that they do not recognize, indicating that they did not authorize this transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as the cardholder is claiming they did not make the purchase."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.95,
  "reasoning": "The cardholder is disputing a charge that they do not recognize, indicating that they did not authorize this transaction. This aligns with the fraud category, specifically 'Other Fraud - Card Absent Environment', as the cardholder is claiming they did not make the purchase."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(275)">
                <td>gen_visa_12.7_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 12.7)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-275" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was reviewing my recent transactions and noticed something peculiar. It seems like there's a mismatch somewhere, and I'm not sure how it happened. Could you take a closer look at this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 12.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like there's a mismatch somewhere, and I'm not sure how it happened. Could you take a closer look at this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder is unsure about a transaction and is asking for clarification, which indicates they do not recognize the charge but have not explicitly claimed fraud."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder is unsure about a transaction and is asking for clarification, which indicates they do not recognize the charge but have not explicitly claimed fraud."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was reviewing my recent transactions and noticed something peculiar. It seems like there's a mismatch somewhere, and I'm not sure how it happened. Could you take a closer look at this for me? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description indicates a mismatch in transactions, which suggests the cardholder may not recognize a charge, potentially indicating unauthorized use of their card. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a lack of recognition of the transaction, although the exact nature of the mismatch is not specified."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description indicates a mismatch in transactions, which suggests the cardholder may not recognize a charge, potentially indicating unauthorized use of their card. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies a lack of recognition of the transaction, although the exact nature of the mismatch is not specified."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(276)">
                <td>gen_visa_13.2_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.2</span> <small>(exp: 13.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-276" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 13.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: 13.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder explicitly states they canceled their subscription but are still being charged, indicating a recurring charge after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder explicitly states they canceled their subscription but are still being charged, indicating a recurring charge after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY am I STILL being charged?! I CANCELLED! FIX THIS NOW! (Network: Visa)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **13.2**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.2",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the user canceled their subscription but is still being charged, which directly aligns with the reason code 13.2 for Cancelled Recurring Transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.2",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the user canceled their subscription but is still being charged, which directly aligns with the reason code 13.2 for Cancelled Recurring Transaction."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(277)">
                <td>gen_visa_13.2_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.2</span> <small>(exp: 13.2)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-277" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month, I decided to cancel my membership with a service I was using. I even received a confirmation email about it. However, to my surprise, I saw a charge from them again this month. I was just sipping my morning coffee when I noticed it, and it really threw me off. Could you please help me sort this out? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 13.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: subscription_canceled</div>
                            <div class="">Code: 13.2</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month, I decided to cancel my membership with a service I was using. I even received a confirmation email about it. However, to my surprise, I saw a charge from them again this month. I was just sipping my morning coffee when I noticed it, and it really threw me off. Could you please help me sort this out? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "subscription_canceled",
    "reasoning": "The cardholder canceled their membership and received a confirmation, yet they were charged again, indicating a recurring charge after cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "subscription_canceled",
  "reasoning": "The cardholder canceled their membership and received a confirmation, yet they were charged again, indicating a recurring charge after cancellation."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I wanted to reach out because I noticed something odd on my credit card statement. You see, last month, I decided to cancel my membership with a service I was using. I even received a confirmation email about it. However, to my surprise, I saw a charge from them again this month. I was just sipping my morning coffee when I noticed it, and it really threw me off. Could you please help me sort this out? Thank you so much for your assistance! (Network: Visa)
"""

Target Category: subscription_canceled

### Candidate Reason Codes:


- **13.2**: Cancelled Recurring Transaction


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.2",
    "confidence": 0.95,
    "reasoning": "The user explicitly states that they canceled their membership and received a confirmation email, yet they were charged again. This directly aligns with the reason code for a canceled recurring transaction, as the charge occurred after the cancellation was confirmed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.2",
  "confidence": 0.95,
  "reasoning": "The user explicitly states that they canceled their membership and received a confirmation email, yet they were charged again. This directly aligns with the reason code for a canceled recurring transaction, as the charge occurred after the cancellation was confirmed."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(278)">
                <td>gen_visa_13.2_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">11.1</span> <small>(exp: 13.2)</small></td>
                <td>0.7</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-278" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought we had an understanding, but it seems like things are still happening. Can we revisit our previous conversation? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: subscription_canceled</div>
                            <div>Code: 13.2</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 11.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought we had an understanding, but it seems like things are still happening. Can we revisit our previous conversation? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates a need to revisit a previous conversation, suggesting a potential misunderstanding or issue with the transaction, but does not explicitly claim fraud or any specific chargeback reason."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates a need to revisit a previous conversation, suggesting a potential misunderstanding or issue with the transaction, but does not explicitly claim fraud or any specific chargeback reason."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought we had an understanding, but it seems like things are still happening. Can we revisit our previous conversation? (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.1",
    "confidence": 0.70,
    "reasoning": "The description suggests a misunderstanding or ongoing issue related to a previous conversation, which could imply a lack of clarity or agreement. While it doesn't directly indicate a specific transaction issue, the mention of revisiting a conversation may relate to a Card Recovery Bulletin situation where there are unresolved matters regarding the cardholder's account or transactions."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.1",
  "confidence": 0.7,
  "reasoning": "The description suggests a misunderstanding or ongoing issue related to a previous conversation, which could imply a lack of clarity or agreement. While it doesn't directly indicate a specific transaction issue, the mention of revisiting a conversation may relate to a Card Recovery Bulletin situation where there are unresolved matters regarding the cardholder's account or transactions."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(279)">
                <td>gen_visa_13.1_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.1</span> <small>(exp: 13.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-279" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: 13.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating that they are disputing a transaction based on non-receipt of goods."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder explicitly states they paid but did not receive their order, indicating that they are disputing a transaction based on non-receipt of goods."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY ORDER?! I PAID AND GOT NOTHING! FIX THIS NOW! (Network: Visa)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **13.1**: Merchandise/Services Not Received

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.1",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer has not received the merchandise they paid for. This directly aligns with reason code 13.1, which is specifically for merchandise/services not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.1",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states 'WHERE'S MY ORDER?! I PAID AND GOT NOTHING!', indicating that the customer has not received the merchandise they paid for. This directly aligns with reason code 13.1, which is specifically for merchandise/services not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(280)">
                <td>gen_visa_13.1_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.1</span> <small>(exp: 13.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-280" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently ordered a lovely set of garden tools from a website using my Visa card. I was so excited because my garden is in desperate need of some TLC. However, it's been over a month, and I haven't seen any sign of the package. I even checked with my neighbors to see if it was delivered to the wrong address, but no luck. Could you please help me figure out what's going on? Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: 13.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently ordered a lovely set of garden tools from a website using my Visa card. I was so excited because my garden is in desperate need of some TLC. However, it's been over a month, and I haven't seen any sign of the package. I even checked with my neighbors to see if it was delivered to the wrong address, but no luck. Could you please help me figure out what's going on? Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder ordered garden tools but has not received the package after over a month, indicating that they paid for goods that were never delivered."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder ordered garden tools but has not received the package after over a month, indicating that they paid for goods that were never delivered."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently ordered a lovely set of garden tools from a website using my Visa card. I was so excited because my garden is in desperate need of some TLC. However, it's been over a month, and I haven't seen any sign of the package. I even checked with my neighbors to see if it was delivered to the wrong address, but no luck. Could you please help me figure out what's going on? Thank you so much for your assistance! (Network: Visa)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **13.1**: Merchandise/Services Not Received

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.1",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the customer ordered a set of garden tools but has not received the package after over a month. This directly aligns with the reason code 13.1, which is specifically for merchandise or services not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.1",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the customer ordered a set of garden tools but has not received the package after over a month. This directly aligns with the reason code 13.1, which is specifically for merchandise or services not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(281)">
                <td>gen_visa_13.1_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.1</span> <small>(exp: 13.1)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-281" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was eagerly waiting for something special to arrive, but it seems like the universe had other plans. It's been a while, and my anticipation has turned into a bit of a mystery. I wonder if there's a way to unravel this little puzzle? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.1</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_not_received</div>
                            <div class="">Code: 13.1</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was eagerly waiting for something special to arrive, but it seems like the universe had other plans. It's been a while, and my anticipation has turned into a bit of a mystery. I wonder if there's a way to unravel this little puzzle? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_not_received",
    "reasoning": "The cardholder expresses anticipation for an item that has not arrived, indicating they paid for something but did not receive it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_not_received",
  "reasoning": "The cardholder expresses anticipation for an item that has not arrived, indicating they paid for something but did not receive it."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was eagerly waiting for something special to arrive, but it seems like the universe had other plans. It's been a while, and my anticipation has turned into a bit of a mystery. I wonder if there's a way to unravel this little puzzle? (Network: Visa)
"""

Target Category: product_not_received

### Candidate Reason Codes:


- **13.1**: Merchandise/Services Not Received

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.1",
    "confidence": 0.95,
    "reasoning": "The description clearly indicates that the user is waiting for a product that has not arrived, which directly aligns with the reason code for merchandise/services not received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.1",
  "confidence": 0.95,
  "reasoning": "The description clearly indicates that the user is waiting for a product that has not arrived, which directly aligns with the reason code for merchandise/services not received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(282)">
                <td>gen_visa_13.3_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.3</span> <small>(exp: 13.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-282" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder is expressing dissatisfaction with the product received, stating it is 'NOTHING like what I ordered', which indicates that the product is not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder is expressing dissatisfaction with the product received, stating it is 'NOTHING like what I ordered', which indicates that the product is not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS UNACCEPTABLE! The product is NOTHING like what I ordered! FIX THIS NOW! (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the product is 'NOTHING like what I ordered', indicating that the item received does not match the description provided at the time of purchase. This aligns perfectly with reason code 13.3, which covers situations where merchandise is not as described or is defective."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the product is 'NOTHING like what I ordered', indicating that the item received does not match the description provided at the time of purchase. This aligns perfectly with reason code 13.3, which covers situations where merchandise is not as described or is defective."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(283)">
                <td>gen_visa_13.3_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.3</span> <small>(exp: 13.3)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-283" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a wonderful day. I recently ordered a lovely vase from your store, and I was so excited to receive it. However, when it arrived, it was not quite what I had expected. The color was off, and there were some chips on the edges. I was really looking forward to using it for my sister's birthday party, but now I'm not sure what to do. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently ordered a lovely vase from your store, and I was so excited to receive it. However, when it arrived, it was not quite what I had expected. The color was off, and there were some chips on the edges. I was really looking forward to using it for my sister's birthday party, but now I'm not sure what to do. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received the vase but it was not as expected due to color issues and chips, indicating the product was defective or not as described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received the vase but it was not as expected due to color issues and chips, indicating the product was defective or not as described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a wonderful day. I recently ordered a lovely vase from your store, and I was so excited to receive it. However, when it arrived, it was not quite what I had expected. The color was off, and there were some chips on the edges. I was really looking forward to using it for my sister's birthday party, but now I'm not sure what to do. Could you please help me resolve this issue? Thank you so much for your assistance. (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the vase received was not as expected due to an incorrect color and chips on the edges, indicating it is defective or not as described. This aligns perfectly with reason code 13.3."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the vase received was not as expected due to an incorrect color and chips on the edges, indicating it is defective or not as described. This aligns perfectly with reason code 13.3."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(284)">
                <td>gen_visa_13.3_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.3</span> <small>(exp: 13.3)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-284" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was really looking forward to using the item for a special occasion, but it seems like it won't work out as planned. It's not quite what I envisioned, and I'm unsure how to proceed. Any guidance would be appreciated. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.3</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was really looking forward to using the item for a special occasion, but it seems like it won't work out as planned. It's not quite what I envisioned, and I'm unsure how to proceed. Any guidance would be appreciated. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder expresses disappointment with the item, stating it is not what they envisioned, which indicates the product does not meet their expectations or description."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder expresses disappointment with the item, stating it is not what they envisioned, which indicates the product does not meet their expectations or description."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was really looking forward to using the item for a special occasion, but it seems like it won't work out as planned. It's not quite what I envisioned, and I'm unsure how to proceed. Any guidance would be appreciated. (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.85,
    "reasoning": "The description indicates that the item is not quite what the user envisioned, suggesting it may not meet their expectations or description. This aligns with the reason code 13.3 for 'Not as Described or Defective Merchandise/Services'. However, the user's uncertainty about how to proceed introduces some ambiguity, preventing a higher confidence rating."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.85,
  "reasoning": "The description indicates that the item is not quite what the user envisioned, suggesting it may not meet their expectations or description. This aligns with the reason code 13.3 for 'Not as Described or Defective Merchandise/Services'. However, the user's uncertainty about how to proceed introduces some ambiguity, preventing a higher confidence rating."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(285)">
                <td>gen_visa_13.5_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.5</span> <small>(exp: 13.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-285" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS UNACCEPTABLE! I was LIED to about the product! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: 13.5</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS UNACCEPTABLE! I was LIED to about the product! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder claims they were lied to about the product, indicating that the product received was not as described or expected."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder claims they were lied to about the product, indicating that the product received was not as described or expected."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS UNACCEPTABLE! I was LIED to about the product! FIX THIS NOW! (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.5",
    "confidence": 0.95,
    "reasoning": "The description indicates that the customer feels they were lied to about the product, which aligns with misrepresentation. This suggests that the product was not accurately represented or described, making reason code 13.5 the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.5",
  "confidence": 0.95,
  "reasoning": "The description indicates that the customer feels they were lied to about the product, which aligns with misrepresentation. This suggests that the product was not accurately represented or described, making reason code 13.5 the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(286)">
                <td>gen_visa_13.5_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.3</span> <small>(exp: 13.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-286" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently purchased a product using my Visa card, and it was supposed to be a top-of-the-line gadget. I was really excited because it was a gift for my nephew's birthday. However, when it arrived, it was nothing like what was advertised. I spent the whole afternoon trying to figure out if I had ordered the wrong item, but everything matched. I'm really puzzled and would appreciate your help in resolving this matter. Thank you! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="mismatch">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "13.3",
  "explanation": "Product received was defective or not as described",
  "matched_keywords": [
    "wrong item"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently purchased a product using my Visa card, and it was supposed to be a top-of-the-line gadget. I was really excited because it was a gift for my nephew's birthday. However, when it arrived, it was nothing like what was advertised. I spent the whole afternoon trying to figure out if I had ordered the wrong item, but everything matched. I'm really puzzled and would appreciate your help in resolving this matter. Thank you! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received a product that was not as advertised and expressed dissatisfaction with the item, indicating it was not what they expected."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received a product that was not as advertised and expressed dissatisfaction with the item, indicating it was not what they expected."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently purchased a product using my Visa card, and it was supposed to be a top-of-the-line gadget. I was really excited because it was a gift for my nephew's birthday. However, when it arrived, it was nothing like what was advertised. I spent the whole afternoon trying to figure out if I had ordered the wrong item, but everything matched. I'm really puzzled and would appreciate your help in resolving this matter. Thank you! (Network: Visa)

[System hint: Based on keywords '['wrong item']', consider code 13.3 - Product received was defective or not as described]
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description clearly states that the product received was not as advertised, which directly aligns with the definition of code 13.3 - Not as Described or Defective Merchandise/Services. The user's confusion about the item matching their order further supports this classification."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description clearly states that the product received was not as advertised, which directly aligns with the definition of code 13.3 - Not as Described or Defective Merchandise/Services. The user's confusion about the item matching their order further supports this classification."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(287)">
                <td>gen_visa_13.5_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.3</span> <small>(exp: 13.5)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-287" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I was expecting something quite different from what I received. It's like ordering a gourmet meal and getting fast food instead. I hope you understand the situation. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.5</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="mismatch">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I was expecting something quite different from what I received. It's like ordering a gourmet meal and getting fast food instead. I hope you understand the situation. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder expresses dissatisfaction with the product received, comparing it to receiving fast food instead of a gourmet meal, indicating that the product was not as expected or described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder expresses dissatisfaction with the product received, comparing it to receiving fast food instead of a gourmet meal, indicating that the product was not as expected or described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I was expecting something quite different from what I received. It's like ordering a gourmet meal and getting fast food instead. I hope you understand the situation. (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description indicates that the item received was significantly different from what was expected, akin to receiving fast food instead of a gourmet meal. This aligns perfectly with the reason code 13.3, which covers situations where merchandise or services are not as described or defective."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description indicates that the item received was significantly different from what was expected, akin to receiving fast food instead of a gourmet meal. This aligns perfectly with the reason code 13.3, which covers situations where merchandise or services are not as described or defective."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(288)">
                <td>gen_visa_13.4_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.4</span> <small>(exp: 13.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-288" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">THIS IS UNACCEPTABLE! I got a FAKE product! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="">Code: 13.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
THIS IS UNACCEPTABLE! I got a FAKE product! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder claims to have received a fake product, which indicates that the item was not as described or defective."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder claims to have received a fake product, which indicates that the item was not as described or defective."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
THIS IS UNACCEPTABLE! I got a FAKE product! FIX THIS NOW! (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.4",
    "confidence": 0.95,
    "reasoning": "The description indicates that the product received is fake, which directly aligns with the definition of counterfeit merchandise. The strong language used ('FAKE product') clearly indicates that the item is not genuine, making reason code 13.4 the most appropriate choice."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.4",
  "confidence": 0.95,
  "reasoning": "The description indicates that the product received is fake, which directly aligns with the definition of counterfeit merchandise. The strong language used ('FAKE product') clearly indicates that the item is not genuine, making reason code 13.4 the most appropriate choice."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(289)">
                <td>gen_visa_13.4_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.3</span> <small>(exp: 13.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-289" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope this message finds you well. I recently ordered a lovely handbag from a store online, and it was supposed to be a genuine designer piece. I was so excited when it arrived, but after a closer look, I realized it wasn't what I expected. It was a busy day, and I had just come back from a long walk with my dog, so I might have missed some details initially. Anyway, I believe there's been a mistake, and I'd appreciate your help in resolving this matter. Thank you for your understanding. (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="mismatch">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently ordered a lovely handbag from a store online, and it was supposed to be a genuine designer piece. I was so excited when it arrived, but after a closer look, I realized it wasn't what I expected. It was a busy day, and I had just come back from a long walk with my dog, so I might have missed some details initially. Anyway, I believe there's been a mistake, and I'd appreciate your help in resolving this matter. Thank you for your understanding. (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder received a handbag that was not as expected and implies it may not be genuine, indicating dissatisfaction with the product received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder received a handbag that was not as expected and implies it may not be genuine, indicating dissatisfaction with the product received."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope this message finds you well. I recently ordered a lovely handbag from a store online, and it was supposed to be a genuine designer piece. I was so excited when it arrived, but after a closer look, I realized it wasn't what I expected. It was a busy day, and I had just come back from a long walk with my dog, so I might have missed some details initially. Anyway, I believe there's been a mistake, and I'd appreciate your help in resolving this matter. Thank you for your understanding. (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description indicates that the handbag received was not as expected, suggesting it may not match the description provided by the seller. This aligns perfectly with reason code 13.3, which covers situations where merchandise is not as described or is defective."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description indicates that the handbag received was not as expected, suggesting it may not match the description provided by the seller. This aligns perfectly with reason code 13.3, which covers situations where merchandise is not as described or is defective."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(290)">
                <td>gen_visa_13.4_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.3</span> <small>(exp: 13.4)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-290" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I received something that doesn't quite match the description. It's like when you expect a sunny day but get rain instead. Could we look into this? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_unacceptable</div>
                            <div>Code: 13.4</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: product_unacceptable</div>
                            <div class="mismatch">Code: 13.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I received something that doesn't quite match the description. It's like when you expect a sunny day but get rain instead. Could we look into this? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "product_unacceptable",
    "reasoning": "The cardholder indicates that the received item does not match the description, which aligns with the definition of 'product_unacceptable' as it suggests the product is not as expected or described."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "product_unacceptable",
  "reasoning": "The cardholder indicates that the received item does not match the description, which aligns with the definition of 'product_unacceptable' as it suggests the product is not as expected or described."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I received something that doesn't quite match the description. It's like when you expect a sunny day but get rain instead. Could we look into this? (Network: Visa)
"""

Target Category: product_unacceptable

### Candidate Reason Codes:


- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.3",
    "confidence": 0.95,
    "reasoning": "The description indicates that the item received does not match the expected description, which aligns perfectly with reason code 13.3 for 'Not as Described or Defective Merchandise/Services'. The metaphor of expecting a sunny day but receiving rain suggests a clear mismatch between expectation and reality."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.3",
  "confidence": 0.95,
  "reasoning": "The description indicates that the item received does not match the expected description, which aligns perfectly with reason code 13.3 for 'Not as Described or Defective Merchandise/Services'. The metaphor of expecting a sunny day but receiving rain suggests a clear mismatch between expectation and reality."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(291)">
                <td>gen_visa_13.6_emotional</td>
                <td>emotional</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.6</span> <small>(exp: 13.6)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-291" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY IS MY REFUND STILL MISSING?! FIX THIS NOW! IT'S BEEN WEEKS! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.6</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY IS MY REFUND STILL MISSING?! FIX THIS NOW! IT'S BEEN WEEKS! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder is inquiring about a missing refund, indicating they expected a credit to be processed but have not received it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder is inquiring about a missing refund, indicating they expected a credit to be processed but have not received it."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY IS MY REFUND STILL MISSING?! FIX THIS NOW! IT'S BEEN WEEKS! (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder is inquiring about a missing refund, which directly aligns with the reason code for 'Credit Not Processed'. The urgency and frustration expressed in the description further confirm that the issue is specifically about a refund that has not been credited back to the account."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder is inquiring about a missing refund, which directly aligns with the reason code for 'Credit Not Processed'. The urgency and frustration expressed in the description further confirm that the issue is specifically about a refund that has not been credited back to the account."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(292)">
                <td>gen_visa_13.6_narrative</td>
                <td>narrative</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.6</span> <small>(exp: 13.6)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-292" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently returned a pair of shoes I bought online because they didn't fit quite right. The store assured me that the refund would be processed within a week. It's been over two weeks now, and I still haven't seen any changes on my credit card statement. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.6</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "13.6",
  "explanation": "Customer returned merchandise but credit not received",
  "matched_keywords": [
    "returned"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently returned a pair of shoes I bought online because they didn't fit quite right. The store assured me that the refund would be processed within a week. It's been over two weeks now, and I still haven't seen any changes on my credit card statement. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder returned the shoes and is inquiring about a refund that has not yet been processed, which fits the criteria for a credit not processed dispute."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder returned the shoes and is inquiring about a refund that has not yet been processed, which fits the criteria for a credit not processed dispute."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently returned a pair of shoes I bought online because they didn't fit quite right. The store assured me that the refund would be processed within a week. It's been over two weeks now, and I still haven't seen any changes on my credit card statement. I understand these things can take time, but I'm starting to get a bit worried. Could you please look into this for me? Thank you so much for your help! (Network: Visa)

[System hint: Based on keywords '['returned']', consider code 13.6 - Customer returned merchandise but credit not received]
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the customer returned merchandise (the shoes) and has not received the promised refund, which directly aligns with reason code 13.6 - Credit Not Processed. The description indicates a specific situation where the return was made, but the credit has not been reflected on the credit card statement, confirming the appropriateness of this code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the customer returned merchandise (the shoes) and has not received the promised refund, which directly aligns with reason code 13.6 - Credit Not Processed. The description indicates a specific situation where the return was made, but the credit has not been reflected on the credit card statement, confirming the appropriateness of this code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-pass status-pass" onclick="toggleTrace(293)">
                <td>gen_visa_13.6_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-pass">PASS</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="">13.6</span> <small>(exp: 13.6)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-293" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd on my statement. It seems like things aren't balancing out as expected after my recent return. Could you help clarify this for me? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.6</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd on my statement. It seems like things aren't balancing out as expected after my recent return. Could you help clarify this for me? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder mentions a recent return and is seeking clarification about their statement, which suggests they are expecting a refund that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder mentions a recent return and is seeking clarification about their statement, which suggests they are expecting a refund that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd on my statement. It seems like things aren't balancing out as expected after my recent return. Could you help clarify this for me? (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the user is experiencing issues with their statement after a recent return, suggesting that a credit for the returned item has not been processed. This aligns perfectly with reason code 13.6, which specifically addresses situations where a credit was not processed after a return."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the user is experiencing issues with their statement after a recent return, suggesting that a credit for the returned item has not been processed. This aligns perfectly with reason code 13.6, which specifically addresses situations where a credit was not processed after a return."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(294)">
                <td>gen_visa_13.8_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.6</span> <small>(exp: 13.8)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-294" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHY was my refund not processed?! FIX THIS NOW! I'm FURIOUS! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 13.8</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: credit_not_processed</div>
                            <div class="mismatch">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHY was my refund not processed?! FIX THIS NOW! I'm FURIOUS! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder is expressing frustration about a refund that was not processed, indicating they expected a credit but did not receive it."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder is expressing frustration about a refund that was not processed, indicating they expected a credit but did not receive it."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHY was my refund not processed?! FIX THIS NOW! I'm FURIOUS! (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates frustration over a refund not being processed, which directly aligns with the reason code 13.6 for 'Credit Not Processed'. The user's emphasis on the refund issue confirms that this is the most appropriate code."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates frustration over a refund not being processed, which directly aligns with the reason code 13.6 for 'Credit Not Processed'. The user's emphasis on the refund issue confirms that this is the most appropriate code."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(295)">
                <td>gen_visa_13.8_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.6</span> <small>(exp: 13.8)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-295" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently tried to return an item I purchased, and the merchant assured me that the refund would be processed back to my card. However, it's been over two weeks, and I haven't seen any changes in my account. I even called the store, and they confirmed the transaction was completed on their end. I'm a bit puzzled and would appreciate any help you can provide. Thank you! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 13.8</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: credit_not_processed</div>
                            <div class="mismatch">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently tried to return an item I purchased, and the merchant assured me that the refund would be processed back to my card. However, it's been over two weeks, and I haven't seen any changes in my account. I even called the store, and they confirmed the transaction was completed on their end. I'm a bit puzzled and would appreciate any help you can provide. Thank you! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder returned an item and was assured a refund, but has not received it despite confirmation from the merchant that the transaction was completed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder returned an item and was assured a refund, but has not received it despite confirmation from the merchant that the transaction was completed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently tried to return an item I purchased, and the merchant assured me that the refund would be processed back to my card. However, it's been over two weeks, and I haven't seen any changes in my account. I even called the store, and they confirmed the transaction was completed on their end. I'm a bit puzzled and would appreciate any help you can provide. Thank you! (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute clearly states that the customer returned an item and was assured by the merchant that a refund would be processed, but the customer has not seen any changes in their account after two weeks. This directly aligns with the reason code 13.6, which is specifically for situations where a credit was not processed after a return."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute clearly states that the customer returned an item and was assured by the merchant that a refund would be processed, but the customer has not seen any changes in their account after two weeks. This directly aligns with the reason code 13.6, which is specifically for situations where a credit was not processed after a return."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(296)">
                <td>gen_visa_13.8_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 13.8)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-296" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I noticed something odd with my account. It seems like something I expected didn't quite happen. Could you look into it? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: general</div>
                            <div>Code: 13.8</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I noticed something odd with my account. It seems like something I expected didn't quite happen. Could you look into it? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about a transaction and requests assistance in understanding it, but does not explicitly claim fraud or indicate that they did not authorize the transaction."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about a transaction and requests assistance in understanding it, but does not explicitly claim fraud or indicate that they did not authorize the transaction."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I noticed something odd with my account. It seems like something I expected didn't quite happen. Could you look into it? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description indicates that the user noticed something odd with their account and that something they expected didn't happen, which suggests a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies the user did not recognize a transaction that may have occurred without their consent."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description indicates that the user noticed something odd with their account and that something they expected didn't happen, which suggests a potential unauthorized transaction. This aligns with the 'Other Fraud - Card Absent Environment' code, as it implies the user did not recognize a transaction that may have occurred without their consent."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(297)">
                <td>gen_visa_13.7_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.6</span> <small>(exp: 13.7)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-297" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I CANCELLED! Why is my money still gone? FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I CANCELLED! Why is my money still gone? FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder indicates they canceled a transaction but is still seeing a charge, suggesting they expected a refund that has not been processed."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder indicates they canceled a transaction but is still seeing a charge, suggesting they expected a refund that has not been processed."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I CANCELLED! Why is my money still gone? FIX THIS NOW! (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The dispute description indicates that the user cancelled a transaction and is questioning why their money has not been refunded. This directly aligns with the reason code 13.6, which is specifically for situations where a credit was not processed after a cancellation."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The dispute description indicates that the user cancelled a transaction and is questioning why their money has not been refunded. This directly aligns with the reason code 13.6, which is specifically for situations where a credit was not processed after a cancellation."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(298)">
                <td>gen_visa_13.7_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.6</span> <small>(exp: 13.7)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-298" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a good day. I recently had a bit of a mix-up with a purchase I made. You see, I ordered a lovely set of garden tools online, but then I realized I didn't need them after all. I promptly canceled the order, and the seller confirmed it. However, I noticed that the charge is still on my credit card statement. I was hoping you could help me sort this out. Thank you so much for your assistance! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="">Category: credit_not_processed</div>
                            <div class="mismatch">Code: 13.6</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: cardholder_disputes</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently had a bit of a mix-up with a purchase I made. You see, I ordered a lovely set of garden tools online, but then I realized I didn't need them after all. I promptly canceled the order, and the seller confirmed it. However, I noticed that the charge is still on my credit card statement. I was hoping you could help me sort this out. Thank you so much for your assistance! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "credit_not_processed",
    "reasoning": "The cardholder canceled the order and received confirmation from the seller, but the charge still appears on their credit card statement, indicating that they did not receive the expected refund."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "credit_not_processed",
  "reasoning": "The cardholder canceled the order and received confirmation from the seller, but the charge still appears on their credit card statement, indicating that they did not receive the expected refund."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a good day. I recently had a bit of a mix-up with a purchase I made. You see, I ordered a lovely set of garden tools online, but then I realized I didn't need them after all. I promptly canceled the order, and the seller confirmed it. However, I noticed that the charge is still on my credit card statement. I was hoping you could help me sort this out. Thank you so much for your assistance! (Network: Visa)
"""

Target Category: credit_not_processed

### Candidate Reason Codes:


- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.6",
    "confidence": 0.95,
    "reasoning": "The user canceled the order and received confirmation from the seller, but the charge remains on their credit card statement. This situation directly aligns with the 'Credit Not Processed' reason code, as the user is expecting a credit for a canceled transaction that has not been reflected on their account."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.6",
  "confidence": 0.95,
  "reasoning": "The user canceled the order and received confirmation from the seller, but the charge remains on their credit card statement. This situation directly aligns with the 'Credit Not Processed' reason code, as the user is expecting a credit for a canceled transaction that has not been reflected on their account."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(299)">
                <td>gen_visa_13.7_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">10.4</span> <small>(exp: 13.7)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-299" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I thought everything was sorted out, but it seems like there's still something lingering on my account. It's a bit puzzling since I was under the impression that things were settled. Could you take a look and see what's going on? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: credit_not_processed</div>
                            <div>Code: 13.7</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: unrecognized</div>
                            <div class="mismatch">Code: 10.4</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I thought everything was sorted out, but it seems like there's still something lingering on my account. It's a bit puzzling since I was under the impression that things were settled. Could you take a look and see what's going on? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "unrecognized",
    "reasoning": "The cardholder expresses confusion about their account status and indicates they do not recognize the current situation, but they do not explicitly claim fraud or unauthorized use of their card."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "unrecognized",
  "reasoning": "The cardholder expresses confusion about their account status and indicates they do not recognize the current situation, but they do not explicitly claim fraud or unauthorized use of their card."
}</div>
                    </div><div class="trace-step"><h4>Step: fallback_search</h4><div>Falling back to network-only search</div></div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I thought everything was sorted out, but it seems like there's still something lingering on my account. It's a bit puzzling since I was under the impression that things were settled. Could you take a look and see what's going on? (Network: Visa)
"""

Target Category: unrecognized

### Candidate Reason Codes:


- **10.1**: EMV Liability Shift Counterfeit Fraud

- **10.2**: EMV Liability Shift Non-Counterfeit Fraud

- **10.3**: Other Fraud - Card Present Environment

- **10.4**: Other Fraud - Card Absent Environment

- **10.5**: Visa Fraud Monitoring Program

- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.6.1**: Duplicate Processing

- **12.6.2**: Paid by Other Means

- **12.7**: Invalid Data

- **13.1**: Merchandise/Services Not Received

- **13.2**: Cancelled Recurring Transaction

- **13.3**: Not as Described or Defective Merchandise/Services

- **13.4**: Counterfeit Merchandise

- **13.5**: Misrepresentation

- **13.6**: Credit Not Processed

- **13.7**: Cancelled Merchandise/Services

- **13.8**: Original Credit Transaction Not Accepted

- **13.9**: Non-Receipt of Cash or Load Transaction Value


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "10.4",
    "confidence": 0.85,
    "reasoning": "The description suggests confusion regarding a transaction that the user believed was settled, indicating a potential issue of unauthorized or unrecognized charges. The phrase 'I didn't think there was anything lingering' aligns with the notion of fraud in a card-absent environment, where the user may not recognize a charge on their account."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "10.4",
  "confidence": 0.85,
  "reasoning": "The description suggests confusion regarding a transaction that the user believed was settled, indicating a potential issue of unauthorized or unrecognized charges. The phrase 'I didn't think there was anything lingering' aligns with the notion of fraud in a card-absent environment, where the user may not recognize a charge on their account."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(300)">
                <td>gen_visa_13.9_emotional</td>
                <td>emotional</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">11.3</span> <small>(exp: 13.9)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-300" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">WHERE'S MY MONEY?! ATM said it dispensed cash, but I got NOTHING! FIX THIS NOW! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.9</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 11.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
WHERE'S MY MONEY?! ATM said it dispensed cash, but I got NOTHING! FIX THIS NOW! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder is expressing frustration over not receiving cash from an ATM, which indicates a processing error rather than a fraudulent transaction or any of the other specific categories."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder is expressing frustration over not receiving cash from an ATM, which indicates a processing error rather than a fraudulent transaction or any of the other specific categories."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
WHERE'S MY MONEY?! ATM said it dispensed cash, but I got NOTHING! FIX THIS NOW! (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.3",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the ATM claimed to dispense cash, but the cardholder did not receive any money. This situation aligns perfectly with the 'No Authorization' reason code, as the transaction was not completed successfully despite the ATM's indication."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.3",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the ATM claimed to dispense cash, but the cardholder did not receive any money. This situation aligns perfectly with the 'No Authorization' reason code, as the transaction was not completed successfully despite the ATM's indication."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(301)">
                <td>gen_visa_13.9_narrative</td>
                <td>narrative</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">13.8</span> <small>(exp: 13.9)</small></td>
                <td>0.95</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-301" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">Hello there, I hope you're having a lovely day. I went to the ATM yesterday after a long day at work, hoping to withdraw some cash for the weekend. I was really looking forward to treating myself to a nice dinner. However, the machine said it dispensed the money, but I didn't receive anything. I checked my account, and the amount was deducted. Could you please help me resolve this? Thank you so much! (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.9</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 13.8</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: keyword_hint</h4><div>Hint Applied: {
  "code": "13.1",
  "explanation": "Goods or services were never received",
  "matched_keywords": [
    "didn't receive"
  ]
}</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
Hello there, I hope you're having a lovely day. I went to the ATM yesterday after a long day at work, hoping to withdraw some cash for the weekend. I was really looking forward to treating myself to a nice dinner. However, the machine said it dispensed the money, but I didn't receive anything. I checked my account, and the amount was deducted. Could you please help me resolve this? Thank you so much! (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The cardholder experienced an issue with an ATM where the transaction was processed, but the cash was not dispensed. This indicates a processing error rather than fraud or a product issue."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The cardholder experienced an issue with an ATM where the transaction was processed, but the cash was not dispensed. This indicates a processing error rather than fraud or a product issue."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
Hello there, I hope you're having a lovely day. I went to the ATM yesterday after a long day at work, hoping to withdraw some cash for the weekend. I was really looking forward to treating myself to a nice dinner. However, the machine said it dispensed the money, but I didn't receive anything. I checked my account, and the amount was deducted. Could you please help me resolve this? Thank you so much! (Network: Visa)

[System hint: Based on keywords '["didn't receive"]', consider code 13.1 - Goods or services were never received]
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "13.8",
    "confidence": 0.95,
    "reasoning": "The dispute clearly indicates that the cardholder attempted to withdraw cash from an ATM but did not receive the money, despite the transaction being processed. This situation aligns perfectly with the reason code 13.1, which pertains to goods or services that were never received."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "13.8",
  "confidence": 0.95,
  "reasoning": "The dispute clearly indicates that the cardholder attempted to withdraw cash from an ATM but did not receive the money, despite the transaction being processed. This situation aligns perfectly with the reason code 13.1, which pertains to goods or services that were never received."
}</div>
                    </div>
                </td>
            </tr>
        
            <tr class="case-row row-fail status-fail" onclick="toggleTrace(302)">
                <td>gen_visa_13.9_ambiguous</td>
                <td>ambiguous</td>
                <td class="status-fail">FAIL</td>
                <td><span class="">visa</span> <small>(exp: visa)</small></td>
                <td><span class="mismatch">11.3</span> <small>(exp: 13.9)</small></td>
                <td>0.85</td>
                <td><button style="padding: 2px 8px; font-size: 12px;">View Trace</button></td>
            </tr>
            <tr id="trace-302" class="trace-detail" style="display: none;">
                <td colspan="7">
                    <div style="margin-bottom: 20px;">
                        <strong>Description:</strong><br>
                        <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin-top: 5px;">I visited the ATM recently, and something unexpected happened. The machine seemed to complete the process, but my plans for the day took a different turn. I was left wondering about the outcome. Can we look into this together? (Network: Visa)</div>
                    </div>
                    
                    <div class="diff-container">
                        <div class="diff-col">
                            <h3>Expected</h3>
                            <div>Network: visa</div>
                            <div>Category: product_not_received</div>
                            <div>Code: 13.9</div>
                        </div>
                        <div class="diff-col">
                            <h3>Actual</h3>
                            <div class="">Network: visa</div>
                            <div class="mismatch">Category: general</div>
                            <div class="mismatch">Code: 11.3</div>
                        </div>
                    </div>
                    
                    <h3>Execution Trace</h3>
        <div class="trace-step"><h4>Step: identify_network</h4><div>Detected: <strong>visa</strong> (Source: keyword_detection)</div></div><div class="trace-step"><h4>Step: detect_network_family</h4><div>Family Signal: None</div></div><div class="trace-step"><h4>Step: identify_category</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are an expert Dispute Classification AI specializing in payment card chargebacks.

Your task is to analyze the following dispute description and classify it into one of the standardized categories.

Dispute Description:
"""
I visited the ATM recently, and something unexpected happened. The machine seemed to complete the process, but my plans for the day took a different turn. I was left wondering about the outcome. Can we look into this together? (Network: Visa)
"""

### Standardized Categories with Examples:

1. **fraudulent**: The cardholder claims they did not participate in or authorize the transaction.
   - IS: "I didn't make this purchase", "My card was stolen", "I don't recognize this merchant", "Someone used my card without permission"
   - IS NOT: "They charged me more than I agreed to" (→ general), "My card was declined" (→ general)

2. **product_not_received**: The cardholder paid but never received the goods or services.
   - IS: "My order never arrived", "I paid but got nothing", "Package was never delivered"
   - IS NOT: "I received it but it was broken" (→ product_unacceptable), "I returned it and want refund" (→ credit_not_processed)

3. **duplicate**: The cardholder was charged multiple times for the same single transaction.
   - IS: "I see two identical charges", "Charged twice for same purchase", "I paid with cash but also got charged on card"
   - IS NOT: "I was charged for a cancelled order" (→ credit_not_processed), "Recurring charge I cancelled" (→ subscription_canceled)

4. **subscription_canceled**: The cardholder canceled a recurring subscription but was charged again.
   - IS: "I cancelled my subscription but was still charged", "Recurring billing after cancellation"
   - IS NOT: "I cancelled a one-time order" (→ credit_not_processed), "I don't recognize this recurring charge" (→ fraudulent)

5. **product_unacceptable**: The received goods/services were defective, damaged, or not as described.
   - IS: "Item arrived broken", "Not what I ordered", "Product doesn't work", "Counterfeit merchandise"
   - IS NOT: "Never received it" (→ product_not_received), "Want to return for refund" (→ credit_not_processed)

6. **credit_not_processed**: The cardholder returned goods or canceled services but didn't receive the expected refund.
   - IS: "I returned the item but no refund", "Cancelled order, still charged", "Merchant promised credit but never issued it"
   - IS NOT: "Charged twice" (→ duplicate), "Subscription cancelled" (→ subscription_canceled)

7. **unrecognized**: The cardholder doesn't recognize the transaction but hasn't explicitly claimed fraud.
   - IS: "What is this charge?", "I don't remember this purchase", "Can you help me identify this?"
   - IS NOT: "I definitely didn't do this" (→ fraudulent)

8. **general**: Authorization issues, processing errors, or disputes that don't fit above categories.
   - IS: "Charged more than authorized amount", "Card was declined but charge appeared", "Wrong amount", "Transaction processed incorrectly"
   - IS NOT: Any of the specific categories above

### Classification Rules:
1. Read the ENTIRE description before classifying.
2. Look for EXPLICIT indicators, not assumptions.
3. If "declined", "refused", "wouldn't go through" → likely **general** (authorization issue), NOT fraudulent.
4. If "didn't authorize" without context of card theft/loss → consider **general** (authorization amount dispute).
5. If "returned" or "sent back" goods → **credit_not_processed**, NOT product_unacceptable.
6. If ambiguous between fraud and authorization → prefer **general** unless explicit fraud language.

Output the result in JSON format:
{
    "category": "category_name",
    "reasoning": "brief explanation"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "category": "general",
    "reasoning": "The description indicates uncertainty about the outcome of an ATM transaction, which suggests a potential processing error or authorization issue rather than fraud or any other specific dispute category."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "category": "general",
  "reasoning": "The description indicates uncertainty about the outcome of an ATM transaction, which suggests a potential processing error or authorization issue rather than fraud or any other specific dispute category."
}</div>
                    </div><div class="trace-step"><h4>Step: select_code</h4>
                        <div class="label">Prompt:</div>
                        <div class="prompt-box">You are a Payment Dispute Resolution Specialist with expertise in Visa chargeback reason codes.

Your task is to select the specific Visa reason code that best applies to the dispute, given the user's description and a pre-filtered list of valid candidates.

Dispute Description:
"""
I visited the ATM recently, and something unexpected happened. The machine seemed to complete the process, but my plans for the day took a different turn. I was left wondering about the outcome. Can we look into this together? (Network: Visa)
"""

Target Category: general

### Candidate Reason Codes:


- **11.1**: Card Recovery Bulletin

- **11.2**: Declined Authorization

- **11.3**: No Authorization

- **12.1**: Late Presentment

- **12.2**: Incorrect Transaction Code

- **12.3**: Incorrect Currency

- **12.4**: Incorrect Account Number

- **12.5**: Incorrect Amount

- **12.7**: Invalid Data

- **13.8**: Original Credit Transaction Not Accepted


### Reference Examples for Common Confusions:

**Authorization vs Fraud (Visa):**
- "Card was DECLINED at checkout" → Authorization code (A08/11.2) - card refused at point of sale
- "I DIDN'T MAKE this purchase" → Fraud code (F24/10.4) - cardholder denies transaction
- "Charged MORE than I agreed" → Authorization code (A01/12.5) - amount exceeds authorization

**Refund-Related Distinctions:**
- "RETURNED item, no refund yet" → C04/13.6 - goods returned, credit not processed
- "CANCELLED order before shipping" → C05/13.7 - cancelled merchandise/services
- "Never got CREDIT promised" → C02/13.6 - credit not processed (general)

**Duplicate vs Paid by Other Means:**
- "Charged TWICE for same item" → P08/12.6.1 - duplicate processing
- "Paid with CASH, also charged card" → C14/12.6.2 - paid by other means

**Product Issues:**
- "Item NEVER arrived" → C08/13.1 - goods not received
- "Item arrived BROKEN/WRONG" → C32/13.3 - defective or not as described

### Selection Instructions:
1. You MUST select one code from the Candidate Reason Codes list above.
2. Do NOT invent a code or select one not in the list.
3. Match the SPECIFIC situation described, not just the general category.
4. Pay attention to keywords: "declined" ≠ "unauthorized", "returned" ≠ "not received".
5. Assign confidence based on how clearly the description matches the code:
   - 0.95+: Exact match with clear indicators
   - 0.85-0.94: Strong match with minor ambiguity
   - 0.70-0.84: Reasonable match but could be another code
   - &lt;0.70: Uncertain, multiple codes could apply

Output the result in JSON format:
{
    "reason_code": "selected_code",
    "confidence": 0.95,
    "reasoning": "explanation for why this specific code fits best"
}</div>
                        <div class="label">LLM Response:</div>
                        <div class="response-box">```json
{
    "reason_code": "11.3",
    "confidence": 0.85,
    "reasoning": "The description indicates that the ATM process was completed, but the user is uncertain about the outcome, suggesting that there may have been no authorization for the transaction to proceed correctly. This aligns with the 'No Authorization' reason code, as the user is left wondering about the transaction's result."
}
```</div>
                        <div class="label">Parsed Output:</div>
                        <div class="response-box">{
  "reason_code": "11.3",
  "confidence": 0.85,
  "reasoning": "The description indicates that the ATM process was completed, but the user is uncertain about the outcome, suggesting that there may have been no authorization for the transaction to proceed correctly. This aligns with the 'No Authorization' reason code, as the user is left wondering about the transaction's result."
}</div>
                    </div>
                </td>
            </tr>
        
            </tbody>
        </table>
    </div>
</body>
</html>
    